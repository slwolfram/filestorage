{"version":3,"sources":["filestorage/core.cljs"],"mappings":";AAcA,0BAAA,1BAAMA;AAAN,AAAA,0FAAA,mDAAA,mFAAA,kDAAA,2CAAA,uDAAA,2CAAA,yDAAA,0BAAA;;AAMA,GAAA,QAAAC,wCAAAC,6CAAAC;AAAA;AAAA,AAAA,AAASC,yBAAM,gDAAA,hDAACC;;AAEhB,gCAAA,hCAAMC;AAAN,AAEE,AAAA,AACE,iCAAA,2CAAA,rEAACC,yJAEC,WAAKC;AAAL,AACE,gHAAA,zGAACC;GAHL,yEAME;AAAA,AACE,YAAA,ZAACE;;AADH,0FAAA,mDAAA,mHAAA,mFAAA,8/GAAA,mFAAA,wDAAA,mFAAA,yDAAA,AAAAD,0CAAA,mFAAA,yDAAA,mFAAA,jpIAIIV,qKAEA,kIAAA,mFAAA,kDAAA,2CAAA,uDAAA,2CAAA,mEAAA,SAAA,gEAAA,uBAAA,mFAAA,gDAAA,2CAAA,uDAAA,2CAAA,0DAAA,SAAA,yDAAA,uBAAA,mFAAA,gDAAA,2CAAA,mOAAA,4BAAA,mFAAA,gDAAA,2CAAA,uDAAA,2CAAA,0DAAA,SAAA,yDAAA,uBAAA,mFAAA,gDAAA,2CAAA,qNAAA,iCAAA,mFAAA,kDAAA,2CAAA,uDAAA,2CAAA,mEAAA,SAAA,gEAAA,uBAAA,mFAAA,gDAAA,2CAAA,uDAAA,2CAAA,0DAAA,SAAA,yDAAA,uBAAA,mFAAA,gDAAA,2CAAA,mNAAA,r6GAAI,GAAK,0BAAA,AAAAU,0CAAA,pEAACE,0CAAWC,8oCAGN,wDAAA,xDAACC,g1BAED,wDAAA,xDAACA,4vCAGD,wDAAA,xDAACA,0eAEVD,iTAKP,kBAAA,AAAAH,gBAAKN,yBACH,iBAAMW,OAAK,AAAA,mFAAO,AAAA,mFAAA,AAAAL,gBAAQN;AAA1B,AAAA,+FAAA,AAAAM,LACGK,qBAAMX;KAFX;;;AAST,0BAAA,mFAAA,mFAAA,IAAA,2CAAA,qDAAA,6FAAA,2FAAA,mFAAA,SAAA,2CAAA,qDAAA,+FAAA,iGAAA,mFAAA,YAAA,2CAAA,qDAAA,6GAAA,poCAAKY,sbAGMC,sXAIAC,6YAIAC;AAEX,8BAAA,9BAAMC;AAAN,AACE,AAACC,iCACA,6EAAA,2CAAA,qDAAA,2CAAA,xNAACC,qDAAUN,+NAAyBO,+CACpC,WAAKC;AAAL,AAAQ,OAACC,sBAAOrB,uBAAMoB;GAFvB,2CAAA,sEAAA;;AAKA,4BAAA,mFAAA,/GAACE;;AACD,yDAAA,lDAACC,qIAAUrB,sCAAc,wBAAA,xBAAiBsB;;AAE5C,AAACR","names":["filestorage.core/header","js/filestorage","js/filestorage.core","js/filestorage.core.match","filestorage.core/match","reagent.core.atom","filestorage.core/current-page","reagent.core/create-class","this","cljs.core.println","cljs.core/deref","js/console.log","cljs.core/contains?","filestorage.db/app-state","reitit.frontend.easy.href","view","filestorage.core/routes","filestorage.main/home","filestorage.main/login-form","filestorage.main/registration-form","filestorage.core/init!","reitit.frontend.easy/start!","reitit.frontend.router","reitit.coercion.spec/coercion","m","cljs.core/reset!","re-frame.core/dispatch-sync","reagent.core.render","js/document"],"sourcesContent":["(ns filestorage.core\n  (:require [reagent.core :as r]\n            [re-frame.core :as rfc]\n            [reitit.frontend :as rf]\n            [reitit.frontend.easy :as rfe]\n            [reitit.coercion.spec :as rss]\n            [filestorage.db :as db]\n            [filestorage.main :as main]\n            [filestorage.events :as events]\n            [accountant.core :as accountant]\n            [ajax.core :refer [GET POST]]\n            [spec-tools.data-spec :as ds]\n            [fipp.edn :as fedn]))\n\n(defn header []\n  [:div\n   [:h1 {:style {:margin \"0 0 0 0\"}} \"pleroma\u2e38net\"]\n   ;;[password-box \"\"]\n   ])\n\n(defonce match (r/atom nil))\n\n(defn current-page\n  []\n  (let []\n    (r/create-class\n     {:component-did-mount               ;; the name of a lifecycle function\n      (fn [this]\n        (println \"component-did-mount\"))\n\n      :reagent-render\n      (fn []\n        (js/console.log \"rendering component\")\n        ;;(rfc/dispatch [::events/clear-http-results])\n        [:div\n         [header]\n         [:nav\n          (if (not (contains? @db/app-state :user))\n            [:ul {:style {:white-space \"nowrap\" :font-size \"20px\"}}\n             [:li {:style {:display \"inline\" :margin \"10px\"}}\n              [:a {:href (rfe/href ::registration-page)} \"/register\"]]\n             [:li {:style {:display \"inline\" :margin \"10px\"}}\n              [:a {:href (rfe/href ::login-page)} \"/login\"]]]\n            [:ul {:style {:white-space \"nowrap\" :font-size \"20px\"}}\n             [:li {:style {:display \"inline\" :margin \"10px\"}}\n              [:a {:href (rfe/href ::home-page)} \"~\"]]])]\n         [:br]\n         [:hr] @db/app-state\n         [:hr]\n         [:br]\n\n\n         (if @match\n           (let [view (:view (:data @match))]\n             [view @match]))])\n      }\n     ;;[:pre (with-out-str (fedn/pprint @match))]\n     )\n     )\n  )\n\n(def routes\n  [[\"/\"\n    {:name ::home-page\n     :view main/home}]\n\n   [\"/login\"\n    {:name ::login-page\n     :view main/login-form}]\n\n   [\"/register\"\n    {:name ::registration-page\n     :view main/registration-form}]])\n\n(defn init! []\n  (rfe/start!\n   (rf/router routes {:data {:coercion rss/coercion}})\n   (fn [m] (reset! match m))\n    ;; set to false to enable HistoryAPI\n   {:use-fragment true})\n  (rfc/dispatch-sync [::events/load-app])\n  (r/render [current-page] (.getElementById js/document \"app\")))\n\n(init!)\n"]}