{"version":3,"sources":["filestorage/views/filestorage.cljs"],"mappings":";AAUA;;;4CAAA,5CAAMA,gGAEHC,SAASC,kBAAkBC,sBAAsBC,iBAAiBC,OAAOC;AAF5E,AAGE,IAAMC,WAAG,AAAiBC,wBAAYP;IAChCQ,aAAK,AAAQF;IACbG,aAAK,gBAAA,fAAM,AAASH;IACpBI,aAAK,wBAAA,xBAAiBH;IACtBI,kBAAU,KAAAC;IACVC,UAAE,uBAAA,vBAASF,8BAAiBF;AALlC,AAWE,YAAA,AAAAK,ZAACC,4BAAgBd;;AACjB,YAAA,AAAAa,ZAACC,4BAAgBb;;AACjB,YAAA,AAAAY,ZAACC,4BAAgBZ;;AAEjB,GAAI,GAAK,6CAAA,7CAACa,gDAAK,AAAIV;AACjB,GAAI,GAAK,6CAAA,GAAA,AAAAQ,hDAACE,gEAAMf;AACd,GAAI,GAAK,6CAAA,GAAA,AAAAa,hDAACE,gEAAMd;AACd,AACE,GAAI,6CAAA,GAAA,AAAAY,hDAACE,gEAAMb;AACT,uCAAA,vCAACc,sBAAOd;;AADV;;AAEA,sZAAA,2CAAA,2DAAA,2CAAA,2VAAA,sEAAA,x8BAACe,oDAAK,CAAA,sFAAA,AAAAJ,mCAAA,gDAAA,AAAAA,oCAAA,gDAAA,AAAAA,vJAAgDX,mFAAsBF,oFAAuBC,qPAEtE,CAAA,sDAAe,+CAAA,AAAAY,0CAAA,mFAAA,qDAAA,QAAA,zOAACK,+DAAQC,2QAC5CT,2EACG,WAAKU;AAAL,AAAQ,OAACN,YAAeM,EACA,uGAAA,mFAAA,1LAACC,0DAAMF,yBAAaG,sKAAmBC,iEAAKH,QAC5C,6BAAA,7BAACJ,sBAAOb,WACR,AAAQM;GAP5C,uEAQkB,WAAKW;AAAL,AAAQ,OAACN,YAAeM,EACA,EAAI,4BAAA,5BAACI,0BAAUJ,kEACb,AAACJ,sBAAOb,OAAO,yJAAA,zJAACsB,4CAAI,8CAAA,9CAACA,4CAAIL,4EACzB,qPAAA,nPAAI,4BAAA,5BAACI,0BAAUJ,wEACb,AAACJ,sBAAOb,OAAO,8CAAA,9CAACsB,4CAAIL;;;AAEpE,6BAAA,7BAACJ,sBAAOb;;;AAEV,6BAAA,7BAACa,sBAAOb;;;AAEV,6BAAA,7BAACa,sBAAOb;;;AACZ,OAAiBC;;AAEnB;;;;;8CAAA,9CAAMsB;AAAN,AAKE,IAAMC,gBAAc,gDAAA,hDAACC;IACfzB,SAAO,gDAAA,hDAACyB;IACR5B,oBAAkB,gDAAA,hDAAC4B;IACnB3B,wBAAsB,gDAAA,hDAAC2B;IACvB1B,mBAAiB,gDAAA,hDAAC0B;IAClBC,iBAAe;AAAA,AACE,IAAAC,qBAAA,AAAAjB,gBAAYc;AAAZ,AAAA,oBAAAG;AAAA,QAAAA,JAASC;AAAT,AAAA,kDAAA,8EAEG,CAAA,sDAAA,HAAYA;;AAFf,kDAAA,4EAAA;;;eANvB,XAUMhC;AAVN,AAWE;AAAA,AAAA,0FAAA,gEAAA,mFAAA,mDAAA,2CAAA,kDAAA,SAAA,uDAAA,2CAAA,uDAAA,sBAAA,AAAAc,gCAAA,oFAAA,sDAAA,2CAAA,kDAAA,cAAA,rQAGKV,oUACmC,WAAKC;AAAL,AAAQ,OAACN,0CAAYC,SAASC,kBAAkBC,sBAAsBC,iBAAiBC,OAAOC;WAJtI,mFAAA,wDAAA,mFAAA,sDAAA,2CAAA,qDAAA,OAAA,qDAAA,OAAA,2DAAA,8DAAA,sCAAA,mFAAA,wDAAA,mFAAA,wDAAA,mFAAA,uDAAA,2CAAA,uDAAA,2CAAA,0EAAA,yBAAA,mFAAA,sDAAA,mFAAA,kDAAA,mFAAA,iDAAA,2CAAA,uDAAA,gBAAA,mFAAA,uDAAA,8BAAA,mFAAA,iDAAA,mFAAA,yDAAA,2CAAA,kDAAA,YAAA,+DAAA,WAAA4B,52DAQiBjC;AARjB,AAgBkD,OAACiB,sBAAOhB,kBAAkB,AAAA,AAAAgC;WAhB5E,mFAAA,uDAAA,2CAAA,sDAAA,WAAA,qBAkBa,iBAAAE,qBAAA,oEAAAC;AAAA,AAAA,YAAAC,kBAAA,KAAA;AAAA,AAAA,IAAAD,eAAAA;;AAAA,AAAA,IAAAE,qBAAA,AAAAC,cAAAH;AAAA,AAAA,GAAAE;AAAA,AAAA,IAAAF,eAAAE;AAAA,AAAA,GAAA,AAAAE,6BAAAJ;AAAA,IAAAK,kBAm3EkC,AAAAoE,sBAAAzE;IAn3ElCM,qBAAA,AAAAC,gBAAAF;IAAAG,WAAA,AAAAC,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAI,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAJ;AAAA,eAAA,AAAAK,eAAAN,gBAAAK,1CAAMU;AAAN,AAAA,AAAA,AAAAR,uBAAAJ,SAAA,mFAAA,uDAAA,2CAAA,sDACmBY,iBAAUA;;AAD7B,eAAA,CAAAV,WAAA;;;;AAAA;;;;;AAAA,OAAAG,qBAAA,AAAAC,gBAAAN,UAAA,AAAAO,0DAAA,AAAAC,qBAAAhB;;AAAA,OAAAa,qBAAA,AAAAC,gBAAAN,UAAA;;;AAAA,eAAA,AAAAS,gBAAAjB,3BAAMoB;AAAN,AAAA,OAAAF,eAAA,mFAAA,uDAAA,2CAAA,wFAAA,AAAAH,0DAAA,AAAAI,eAAAnB,3GACmBoB,iBAAUA;;;AAD7B;;;;GAAA,KAAA;;AAAA,AAAA,OAAArB,mBAAe,+CAAA,AAAArB,0CAAA,mFAAA,5KAACK,+DAAQC;6BAlBrC,mFAAA,kDAAA,mFAAA,iDAAA,mFAAA,uDAAA,iCAAA,mFAAA,iDAAA,mFAAA,yDAAA,2CAAA,kDAAA,eAAA,+DAAA,WAAAc;AAAA,AAqBqD,OAACjB,sBAAOf,sBAAsB,AAAA,AAAAgC;WArBnF,mFAAA,uDAAA,2CAAA,sDAAA,WAAA,qBAuBa,iBAAAC,qBAAA,oEAAAsB;AAAA,AAAA,YAAApB,kBAAA,KAAA;AAAA,AAAA,IAAAoB,eAAAA;;AAAA,AAAA,IAAAnB,qBAAA,AAAAC,cAAAkB;AAAA,AAAA,GAAAnB;AAAA,AAAA,IAAAmB,eAAAnB;AAAA,AAAA,GAAA,AAAAE,6BAAAiB;AAAA,IAAAhB,kBA82EkC,AAAAoE,sBAAApD;IA92ElCf,qBAAA,AAAAC,gBAAAF;IAAAiB,WAAA,AAAAb,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAiB,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAjB;AAAA,mBAAA,AAAAK,eAAAN,gBAAAkB,9CAAME;AAAN,AAAA,AAAA,AAAAb,uBAAAU,SAAA,mFAAA,uDAAA,2CAAA,sDACmBG,qBAAcA;;AADjC,eAAA,CAAAF,WAAA;;;;AAAA;;;;;AAAA,OAAAV,qBAAA,AAAAC,gBAAAQ,UAAA,AAAAE,0DAAA,AAAAR,qBAAAK;;AAAA,OAAAR,qBAAA,AAAAC,gBAAAQ,UAAA;;;AAAA,mBAAA,AAAAL,gBAAAI,/BAAMI;AAAN,AAAA,OAAAP,eAAA,mFAAA,uDAAA,2CAAA,gGAAA,AAAAM,0DAAA,AAAAL,eAAAE,nHACmBI,qBAAcA;;;AADjC;;;;GAAA,KAAA;;AAAA,AAAA,OAAA1B,mBAAmB,+CAAA,AAAArB,0CAAA,mFAAA,5KAACK,+DAAQC;6BAvBzC,mFAAA,kDAAA,mFAAA,iDAAA,mFAAA,uDAAA,+BAAA,mFAAA,iDAAA,0HAAA,mBAAA,mBAAA,uHAAA,mFAAA,8EAAA,2CAAA,yDAAA,QAAA,uDAAA,QAAA,wFAAA,mFAAA,wDAAA,mFAAA,yDAAA,/3BA0Ba0C,oFAA2D3D,iBAAiB,gDAAA,hDAAC0B,keAC3B,AAACC;;;AAMpE;;;;;4CAAA,5CAAMiC;AAAN,AAKE,IAAMC,QAAM,gDAAA,hDAACnC;IACPzB,SAAO,gDAAA,hDAACyB;eADd,XAEM7B;IAEAiE,gBAAc;AAAA,AAAO,0DAAA,8FAAA,jJAACC,4MACU,WAAKC;AAAL,AAAe,AACE,AAACpD,YAAeoD;;AAChB,mGAAA,5FAAC7C,mDAAMF,yBAAagD,gFAAiBD;;;IACtFE,oBAAkB;AAAA,AAAO,0DAAA,kGAAA,rJAACH,gNACU,WAAKC;AAAL,AAAe,AACE,AAACpD,YAAeoD;;AAChB,mGAAA,5FAAC7C,mDAAMF,yBAAagD,sFAAqBD;;;IAC9FG,YAAU;AAAA,AAAO,0DAAA,qFAAA,2DAAA,2CAAA,2VAAA,zkBAACJ,8PAC2B,CAAA,sDAAe,+CAAA,AAAApD,0CAAA,mFAAA,qDAAA,QAAA,zOAACK,+DAAQC,gRACzC,WAAK+C;AAAL,AAAe,AACE,AAACpD,YAAeoD;;AAChB,mGAAA,5FAAC7C,mDAAMF,yBAAagD,uEAAaD;;;AAhBpF,AAiBE,AAACF;;AACD,AAACI;;AACD,AAACC;;AACD;AAAA,AAAA,0FAAA,gEAAA,mFAAA,mDAAA,2CAAA,uDAAA,2CAAA,0DAAA,sHAAA,mFAAA,uDAAA,2CAAA,kDAAA,YAAA,wDAAA,eAAA,mFAAA,uDAAA,mFAAA,kDAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mBAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,sBAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mBAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,uBAAA,mFAAA,yDAAA,mFAAA,yEAAA,mFAAA,lmEAOI,AAAKC,kCAAE,gDAAA,hDAAC1C,snEAYP,iBAAAM,qBAAA,kEAAAqC;AAAA,AAAA,YAAAnC,kBAAA,KAAA;AAAA,AAAA,IAAAmC,eAAAA;;AAAA,AAAA,IAAAlC,qBAAA,AAAAC,cAAAiC;AAAA,AAAA,GAAAlC;AAAA,AAAA,IAAAkC,eAAAlC;AAAA,AAAA,GAAA,AAAAE,6BAAAgC;AAAA,IAAA/B,kBAwzE0C,AAAAoE,sBAAArC;IAxzE1C9B,qBAAA,AAAAC,gBAAAF;IAAAgC,WAAA,AAAA5B,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAgC,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAhC;AAAA,eAAA,AAAAK,eAAAN,gBAAAiC,1CAAME;AAAN,AAAA,AAAA,AAAA5B,uBAAAyB,SACE,iBAAMM,qBAAmB,AAAClD,gDAAO,qDAAA,rDAACH,4CAAIkD;IAChCI,kBAAgB,AAACnD,gDAAO,qDAAA,rDAACH,4CAAIkD;IAC7BK,oBAAkB,AAACpD,gDAAO,qDAAA,rDAACH,4CAAIkD;IAC/BM,UAAQ,qDAAA,rDAACxD,4CAAIkD;IACbO,UAAQ,EAAI,6CAAA,AAAArE,oCAAA,jFAACE,6DAAG+D,gCACF,CAAA,0JAAA,lEACK,qDAAA,rDAACrD,4CAAIkD,sEACL,+CAAA,AAAA9D,0CAAA,mFAAA,qDAAA,QAAA,zOAACK,+DAAQC,6MACd,CAAA,wFACK,qDAAA,rDAACM,4CAAIkD;YAT9B,AAAA9D,RAUMsE,wBAAOb;IACP1D,IAAE,oGAAA,pGAACS,mDAAMiD,gCAAEc;AAXjB,AAYE,YAAA,AAAAvE,ZAACC,4BAAgBwD;;AAZnB,0FAAA,kDAAA,2CAAA,kEAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mFAAA,gDAAA,2CAAA,sJAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,sRAAA,gGAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mFAAA,yDAAA,2CAAA,kDAAA,YAAA,sEAAA,AAAAzD,iCAAA,+DAAA,t1DAaYoE,8eAEGC,gBACV,qDAAA,rDAACzD,4CAAIkD,mXAELd,uCAAc,CAAA,0DAAmBoB,mBAAS,CAAA,0DAAmBA,0BAAgBD,kBAAkB,gDAAA,hDAACpD,6oBAGvEmD;kBArB9BH;AAAA,AAsB0B,OAAC5D,sBAAO+D,gBAAgB,AAAA,AAAAH;;SAC7C,iBAAA1C,qBAAA;uFAAAmD;AAAA,AAAA,YAAAjD,kBAAA,KAAA;;AAAA,AAAA,IAAAiD,eAAAA;;AAAA,AAAA,IAAAhD,yBAAA,AAAAC,cAAA+C;AAAA,AAAA,GAAAhD;AAAA,AAAA,IAAAgD,eAAAhD;AAAA,AAAA,GAAA,AAAAE,6BAAA8C;AAAA,IAAA7C,sBAgyEmC,AAAAoE,sBAAAvB;IAhyEnC5C,yBAAA,AAAAC,gBAAAF;IAAA8C,WAAA,AAAA1C,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAA8C,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAA9C;AAAA,eAAA,AAAAK,eAAAN,oBAAA+C,9CAAMhC;AAAN,AAAA,AAAA,AAAAR,uBAAAuC,SAAA,mFAAA,uDAAA,2CAAA,sDACmB/B,iBAAUA;;AAD7B,eAAA,CAAAgC,WAAA;;;;AAAA;;;;;AAAA,OAAAvC,qBAAA,AAAAC,gBAAAqC,UAAA,AAAAE,sEAAA,AAAArC,qBAAAkC;;AAAA,OAAArC,qBAAA,AAAAC,gBAAAqC,UAAA;;;AAAA,eAAA,AAAAlC,gBAAAiC,3BAAM9B;AAAN,AAAA,OAAAF,eAAA,mFAAA,uDAAA,2CAAA,wFAAA,AAAAmC,sEAAA,AAAAlC,eAAA+B,vHACmB9B,iBAAUA;;;AAD7B;;;;;CAAA,KAAA;;;AAAA,AAAA,OAAArB,mBAAe,+CAAA,AAAArB,0CAAA,mFAAA,5KAACK,+DAAQC;qBAvB7B,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mFAAA,yDAAA,2CAAA,kDAAA,eAAA,sEAAA,AAAAN,oCAAA,+DAAA,nFA2B8BiE;kBA3B9BD;AAAA,AA4B0B,OAAC7D,sBAAO8D,mBAAmB,AAAA,AAAAD;;SAChD,iBAAA3C,qBAAA;uFAAA2D;AAAA,AAAA,YAAAzD,kBAAA,KAAA;;AAAA,AAAA,IAAAyD,eAAAA;;AAAA,AAAA,IAAAxD,yBAAA,AAAAC,cAAAuD;AAAA,AAAA,GAAAxD;AAAA,AAAA,IAAAwD,eAAAxD;AAAA,AAAA,GAAA,AAAAE,6BAAAsD;AAAA,IAAArD,sBA0xEmC,AAAAoE,sBAAAf;IA1xEnCpD,yBAAA,AAAAC,gBAAAF;IAAAsD,WAAA,AAAAlD,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAsD,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAtD;AAAA,mBAAA,AAAAK,eAAAN,oBAAAuD,lDAAMM;AAAN,AAAA,AAAA,AAAAtD,uBAAA+C,SAAA,mFAAA,uDAAA,2CAAA,sDACmBO,qBAAcA;;AADjC,eAAA,CAAAN,WAAA;;;;AAAA;;;;;AAAA,OAAA/C,qBAAA,AAAAC,gBAAA6C,UAAA,AAAAE,sEAAA,AAAA7C,qBAAA0C;;AAAA,OAAA7C,qBAAA,AAAAC,gBAAA6C,UAAA;;;AAAA,mBAAA,AAAA1C,gBAAAyC,/BAAMQ;AAAN,AAAA,OAAAhD,eAAA,mFAAA,uDAAA,2CAAA,gGAAA,AAAA2C,sEAAA,AAAA1C,eAAAuC,/HACmBQ,qBAAcA;;;AADjC;;;;;CAAA,KAAA;;;AAAA,AAAA,OAAAnE,mBAAmB,+CAAA,AAAArB,0CAAA,mFAAA,5KAACK,+DAAQC;qBA7BjC,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mFAAA,yDAAA,2CAAA,6DAgCwB;kBAAKmF;AAAL,AAAY,OAACC,2CAAkBrB;;SAhCvD,4BAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mFAAA,yDAAA,2CAAA,6DAoCM;kBAAKoB;AAAL,AACE,AACE,YAAA,AAAAzF,ZAACC,4BAAgBgE;;AACjB,0DAAA,qFAAA,2CAAA,0DAAA,qDAAA,2DAAA,2CAAA,2VAAA,wDAAA,2CAAA,+HAAA,0DAAA,oEAAA,AAAAjE,mCAAA,4EAAA,AAAAA,oCAAA,qEAAA,AAAAA,yCAAA,p0CAAC2F,wZAE4B,CAAA,sDAAe,+CAAA,AAAA3F,0CAAA,mFAAA,qDAAA,QAAA,zOAACK,+DAAQC,sXAC/B,qDAAA,rDAACM,4CAAIkD,uEACXM,4FACUD,+GACIF,yGACHC,oFACf;kBAAK3D;AAAL,AAAQ,AAAI,AAACN,YAAeM;;AAChB,8GAAA,mFAAA,1LAACC,0DAAMF,yBAAaG,sKAAmB6C,kEAAMgB,MAAM/D;;CAT3E,uEAUkB;kBAAKA;AAAL,AAAQ,OAACN,YAAeM;;;;SAjDpD,uBAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mFAAA,yDAAA,2CAAA,6DAuDM;kBAAKkF;AAAL,AACE,AACE,kNAAA,2CAAA,0DAAA,qDAAA,2DAAA,2CAAA,2VAAA,wDAAA,mCAAA,j4BAACG,sDAAO,CAAA,+EAAwCxB,qVAEnB,CAAA,sDAAe,+CAAA,AAAApE,0CAAA,mFAAA,qDAAA,QAAA,zOAACK,+DAAQC,2WAEzC;kBAAKC;AAAL,AAAQ,AAAI,AAACN,YAAeM;;AAChB,mGAAA,5FAACC,mDAAMF,yBAAagD,uEAAa,AAACuC,oCAAWvB,MAAM,+CAAA,AAAAtE,0CAAA,mFAAA,5KAACK,+DAAQC;;CALpF,uEAMkB;kBAAKC;AAAL,AAAQ,OAACN,YAAeM;;;;SA/DpD;;;AADF,eAAA,CAAAqD,WAAA;;;;AAAA;;;;;AAAA,OAAAzB,qBAAA,AAAAC,gBAAAuB,UAAA,AAAAE,wDAAA,AAAAvB,qBAAAoB;;AAAA,OAAAvB,qBAAA,AAAAC,gBAAAuB,UAAA;;;AAAA,eAAA,AAAApB,gBAAAmB,3BAAMI;AAAN,AAAA,OAAAtB,eACE,iBAAMyB,qBAAmB,AAAClD,gDAAO,qDAAA,rDAACH,4CAAIkD;IAChCI,kBAAgB,AAACnD,gDAAO,qDAAA,rDAACH,4CAAIkD;IAC7BK,oBAAkB,AAACpD,gDAAO,qDAAA,rDAACH,4CAAIkD;IAC/BM,UAAQ,qDAAA,rDAACxD,4CAAIkD;IACbO,UAAQ,EAAI,6CAAA,AAAArE,oCAAA,jFAACE,6DAAG+D,gCACF,CAAA,0JAAA,lEACK,qDAAA,rDAACrD,4CAAIkD,sEACL,+CAAA,AAAA9D,0CAAA,mFAAA,qDAAA,QAAA,zOAACK,+DAAQC,6MACd,CAAA,wFACK,qDAAA,rDAACM,4CAAIkD;YAT9B,AAAA9D,RAUMsE,wBAAOb;IACP1D,IAAE,oGAAA,pGAACS,mDAAMiD,gCAAEc;AAXjB,AAYE,YAAA,AAAAvE,ZAACC,4BAAgBwD;;AAZnB,0FAAA,kDAAA,2CAAA,kEAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mFAAA,gDAAA,2CAAA,sJAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,sRAAA,gGAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mFAAA,yDAAA,2CAAA,kDAAA,YAAA,sEAAA,AAAAzD,iCAAA,+DAAA,t1DAaYoE,8eAEGC,gBACV,qDAAA,rDAACzD,4CAAIkD,mXAELd,uCAAc,CAAA,0DAAmBoB,mBAAS,CAAA,0DAAmBA,0BAAgBD,kBAAkB,gDAAA,hDAACpD,6oBAGvEmD;kBArB9BH;AAAA,AAsB0B,OAAC5D,sBAAO+D,gBAAgB,AAAA,AAAAH;;SAC7C,iBAAA1C,qBAAA;uFAAAuD;AAAA,AAAA,YAAArD,kBAAA,KAAA;AAAA,AAAA,IAAAqD,eAAAA;;AAAA,AAAA,IAAApD,yBAAA,AAAAC,cAAAmD;AAAA,AAAA,GAAApD;AAAA,AAAA,IAAAoD,eAAApD;AAAA,AAAA,GAAA,AAAAE,6BAAAkD;AAAA,IAAAjD,kBAgyEmC,AAAAoE,sBAAAnB;IAhyEnChD,qBAAA,AAAAC,gBAAAF;IAAAkD,WAAA,AAAA9C,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAkD,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAlD;AAAA,eAAA,AAAAK,eAAAN,gBAAAmD,1CAAMpC;AAAN,AAAA,AAAA,AAAAR,uBAAA2C,SAAA,mFAAA,uDAAA,2CAAA,sDACmBnC,iBAAUA;;AAD7B,eAAA,CAAAoC,WAAA;;;;AAAA;;;;;AAAA,OAAA3C,qBAAA,AAAAC,gBAAAyC,UAAA,AAAAE,sEAAA,AAAAzC,qBAAAsC;;AAAA,OAAAzC,qBAAA,AAAAC,gBAAAyC,UAAA;;;AAAA,eAAA,AAAAtC,gBAAAqC,3BAAMlC;AAAN,AAAA,OAAAF,eAAA,mFAAA,uDAAA,2CAAA,wFAAA,AAAAuC,sEAAA,AAAAtC,eAAAmC,vHACmBlC,iBAAUA;;;AAD7B;;;;GAAA,KAAA;;;AAAA,AAAA,OAAArB,mBAAe,+CAAA,AAAArB,0CAAA,mFAAA,5KAACK,+DAAQC;qBAvB7B,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mFAAA,yDAAA,2CAAA,kDAAA,eAAA,sEAAA,AAAAN,oCAAA,+DAAA,nFA2B8BiE;kBA3B9BD;AAAA,AA4B0B,OAAC7D,sBAAO8D,mBAAmB,AAAA,AAAAD;;SAChD,iBAAA3C,qBAAA;uFAAA+D;AAAA,AAAA,YAAA7D,kBAAA,KAAA;AAAA,AAAA,IAAA6D,eAAAA;;AAAA,AAAA,IAAA5D,yBAAA,AAAAC,cAAA2D;AAAA,AAAA,GAAA5D;AAAA,AAAA,IAAA4D,eAAA5D;AAAA,AAAA,GAAA,AAAAE,6BAAA0D;AAAA,IAAAzD,kBA0xEmC,AAAAoE,sBAAAX;IA1xEnCxD,qBAAA,AAAAC,gBAAAF;IAAA0D,WAAA,AAAAtD,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAA0D,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAA1D;AAAA,mBAAA,AAAAK,eAAAN,gBAAA2D,9CAAME;AAAN,AAAA,AAAA,AAAAtD,uBAAAmD,SAAA,mFAAA,uDAAA,2CAAA,sDACmBG,qBAAcA;;AADjC,eAAA,CAAAF,WAAA;;;;AAAA;;;;;AAAA,OAAAnD,qBAAA,AAAAC,gBAAAiD,UAAA,AAAAE,sEAAA,AAAAjD,qBAAA8C;;AAAA,OAAAjD,qBAAA,AAAAC,gBAAAiD,UAAA;;;AAAA,mBAAA,AAAA9C,gBAAA6C,/BAAMI;AAAN,AAAA,OAAAhD,eAAA,mFAAA,uDAAA,2CAAA,gGAAA,AAAA+C,sEAAA,AAAA9C,eAAA2C,/HACmBI,qBAAcA;;;AADjC;;;;GAAA,KAAA;;;AAAA,AAAA,OAAAnE,mBAAmB,+CAAA,AAAArB,0CAAA,mFAAA,5KAACK,+DAAQC;qBA7BjC,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mFAAA,yDAAA,2CAAA,6DAgCwB;kBAAKmF;AAAL,AAAY,OAACC,2CAAkBrB;;SAhCvD,4BAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mFAAA,yDAAA,2CAAA,6DAoCM;kBAAKoB;AAAL,AACE,AACE,YAAA,AAAAzF,ZAACC,4BAAgBgE;;AACjB,0DAAA,qFAAA,2CAAA,0DAAA,qDAAA,2DAAA,2CAAA,2VAAA,wDAAA,2CAAA,+HAAA,0DAAA,oEAAA,AAAAjE,mCAAA,4EAAA,AAAAA,oCAAA,qEAAA,AAAAA,yCAAA,p0CAAC2F,wZAE4B,CAAA,sDAAe,+CAAA,AAAA3F,0CAAA,mFAAA,qDAAA,QAAA,zOAACK,+DAAQC,sXAC/B,qDAAA,rDAACM,4CAAIkD,uEACXM,4FACUD,+GACIF,yGACHC,oFACf,WAAK3D;AAAL,AAAQ,AAAI,AAACN,YAAeM;;AAChB,8GAAA,mFAAA,1LAACC,0DAAMF,yBAAaG,sKAAmB6C,kEAAMgB,MAAM/D;GAT3E,uEAUkB,WAAKA;AAAL,AAAQ,OAACN,YAAeM;;;SAjDpD,uBAAA,mFAAA,iDAAA,2CAAA,wDAAA,oBAAA,mFAAA,yDAAA,2CAAA,6DAuDM;kBAAKkF;AAAL,AACE,AACE,kNAAA,2CAAA,0DAAA,qDAAA,2DAAA,2CAAA,2VAAA,wDAAA,mCAAA,j4BAACG,sDAAO,CAAA,+EAAwCxB,qVAEnB,CAAA,sDAAe,+CAAA,AAAApE,0CAAA,mFAAA,qDAAA,QAAA,zOAACK,+DAAQC,2WAEzC,WAAKC;AAAL,AAAQ,AAAI,AAACN,YAAeM;;AAChB,mGAAA,5FAACC,mDAAMF,yBAAagD,uEAAa,AAACuC,oCAAWvB,MAAM,+CAAA,AAAAtE,0CAAA,mFAAA,5KAACK,+DAAQC;GALpF,uEAMkB,WAAKC;AAAL,AAAQ,OAACN,YAAeM;;;SA/DpD;KADF,AAAAsD,wDAAA,AAAApB,eAAAiB;;;AAAA;;;;GAAA,KAAA;;AAAA,AAAA,OAAArC,mBAAe,+CAAA,AAAArB,0CAAA,mFAAA,5KAACK,+DAAQC;;;;AAqEjC,iDAAA,jDAAMwF;AAAN,AAAA,0FAAA,mDAAA,mFAAA,iDAAA,sBAAA,+HAAA,wBAAA,mFAAA,wDAAA,mFAAA,yDAAA,mFAAA,wDAAA,mFAAA,iDAAA,gBAAA,6HAAA,vvBAKIjF,6sBAMAoC","names":["filestorage.views.filestorage/submit-file","input-id","selected-filetype","selected-access-level","file-description","errors","e","el","js/document","name","file","form","form-data","js/FormData","_","cljs.core/deref","js/console.log","cljs.core._EQ_","cljs.core/reset!","ajax.core.POST","cljs.core.get_in","filestorage.db/app-state","r","cljs.core.swap_BANG_","cljs.core/update-in","cljs.core/conj","cljs.core/contains?","cljs.core.get","filestorage.views.filestorage/file-selector","UPLOADED-FILE","reagent.core.atom","bg-image-style","temp__5802__auto__","i","p1__27357#","p1__27358#","iter__5523__auto__","s__27360","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__27362","cljs.core/chunk-buffer","i__27361","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__27359","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","filetype","s__27364","b__27366","i__27365","iter__27363","access-level","filestorage.views.common/input-element","filestorage.views.filestorage/file-viewer","files","get-filetypes","ajax.core.GET","response","cljs.core/assoc","get-access-levels","get-files","filestorage.views.filestorage/i","s__27370","b__27372","i__27371","iter__27369","file-row","p1__27367#","p1__27368#","access-level-value","file-type-value","description-value","file-id","dl-link","index","cljs.core/+","s__27374","b__27376","i__27375","iter__27373","s__27382","b__27384","i__27383","iter__27381","s__27378","b__27380","i__27379","iter__27377","s__27386","b__27388","i__27387","iter__27385","access_level","event","filestorage.views.common/copy-to-clipboard","ajax.core.PUT","ajax.core.DELETE","filestorage.views.common/vec-remove","filestorage.views.filestorage/filestorage-view","cljs.core/chunk-first"],"sourcesContent":["(ns filestorage.views.filestorage\n  (:require [reagent.core :as r]\n            ;;[re-frame.core :as rfc]\n            [reitit.frontend.easy :as rfe]\n            [ajax.core :refer [GET POST PUT DELETE]]\n            [filestorage.db :as db]\n            [filestorage.views.common :refer [input-element vec-remove copy-to-clipboard]]\n            [cljs-http.client :as http]\n            [cljs.core.async :refer [<!]]))\n\n(defn submit-file\n  \"submit the file that is on input `#input-id`\"\n  [input-id selected-filetype selected-access-level file-description errors e]\n  (let [el (.getElementById js/document input-id)\n        name (.-name el)\n        file (aget (.-files el) 0)\n        form (.getElementById js/document \"upload-form\")\n        form-data (js/FormData.)\n        _ (.append form-data \"file\" file)\n        ;;submit-params {:uri \"http://localhost:5050/api/upload\"\n        ;;               :body form-data\n        ;;               :method :post\n        ;;               :on-success-kvec [::events/success-http-result]}\n        ]\n    (js/console.log @selected-filetype)\n    (js/console.log @selected-access-level)\n    (js/console.log @file-description)\n\n    (if (not (= \"\" (-> el .-value)))\n      (if (not (= \"\" @selected-filetype))\n        (if (not (= \"\" @selected-access-level))\n          (do\n            (if (= \"\" @file-description)\n              (reset! file-description \"None\"))\n            (POST (str \"http://localhost:5050/api/files/upload/\" @file-description \"/\" @selected-filetype \"/\" @selected-access-level)\n              {;;:format :json\n               :headers {\"Authorization\" (str \"Bearer \" (get-in @db/app-state [:user \"token\" \"access_token\"]))}\n               :body form-data\n               :handler (fn [r] (js/console.log r\n                                                (swap! db/app-state update-in [:files] conj r)\n                                                (reset! errors \"\")\n                                                (.reset form)))\n               :error-handler (fn [r] (js/console.log r\n                                                      (if (contains? r :response)\n                                                        (reset! errors (get (get r :response) \"detail\"))\n                                                        (if (contains? r :status-text)\n                                                          (reset! errors (get r :status-text))))))}))\n\n          (reset! errors \"Please select an access level\"))\n\n        (reset! errors \"Please select a file type\"))\n\n      (reset! errors \"No file selected\")))\n  (.preventDefault e))\n\n(defn file-selector\n  \"an image-selection element that shows the image you've chosen.\n  This is a form-2 reagent component so we can avoid global state.\n  https://github.com/reagent-project/reagent/blob/master/doc/CreatingReagentComponents.md#form-2--a-function-returning-a-function\"\n  []\n  (let [UPLOADED-FILE (r/atom nil)\n        errors (r/atom nil)\n        selected-filetype (r/atom \"\")\n        selected-access-level (r/atom \"\")\n        file-description (r/atom \"\")\n        bg-image-style (fn []\n                         (if-let [i @UPLOADED-FILE]\n                           {:background-image\n                            (str \"url(\" i \")\")}\n                           {:background-color \"red\"}))\n        input-id \"image-in\"]\n    (fn []\n      [:div.cntnr\n       [:div {:id \"errors\" :style {:color \"red\"}}\n        @errors]\n       [:form {:id \"upload-form\" :on-submit (fn [e] (submit-file input-id selected-filetype selected-access-level file-description errors e))}\n        [:br]\n        [:input {:type \"file\"\n                 :name \"file\"\n                 :id input-id\n                           ;; :on-change #(change-read % UPLOADED-FILE)\n                 :enc-type \"multipart/form-data\"}]\n        [:br] [:br]\n        [:table {:style {:border-spacing \"0 20px\"}}\n         [:tbody\n\n          [:tr [:td {:width \"150px\"} [:label  \"file type: \"]]\n           [:td [:select {:id \"file-type\" :on-change #(reset! selected-filetype (.. % -target -value))}\n                 [:option {:value \"\"} \"--SELECT--\"]\n                 (for [filetype (get-in @db/app-state [:filetypes])]\n                   [:option {:value filetype} filetype])]]]\n          [:tr [:td [:label \"access level: \"]]\n           [:td [:select {:id \"access-level\" :on-change #(reset! selected-access-level (.. % -target -value))}\n                 [:option {:value \"\"} \"--SELECT--\"]\n                 (for [access-level (get-in @db/app-state [:access_levels])]\n                   [:option {:value access-level} access-level])]]]\n          [:tr [:td [:label \"description:\"]]\n           [:td [input-element \"file-description\" \"file-description\" \"text\" file-description (r/atom false)]]]]]\n        [:div.display-image {:height \"300px\" :width \"300px\" :style (bg-image-style)}]\n        [:br]\n        [:button\n        ;;{:on-click #(submit-file input-id errors)}\n         \"Submit\"]]])))\n\n(defn file-viewer\n  \"an image-selection element that shows the image you've chosen.\n  This is a form-2 reagent component so we can avoid global state.\n  https://github.com/reagent-project/reagent/blob/master/doc/CreatingReagentComponents.md#form-2--a-function-returning-a-function\"\n  []\n  (let [files (r/atom nil)\n        errors (r/atom nil)\n        input-id \"file-viewer\"\n        ;;i (r/atom 0)\n        get-filetypes (fn [] (GET \"http://localhost:5050/api/files/filetypes\"\n                               :handler (fn [response] (do\n                                                         (js/console.log response)\n                                                         (swap! db/app-state assoc :filetypes response)))))\n        get-access-levels (fn [] (GET \"http://localhost:5050/api/files/access_levels\"\n                                   :handler (fn [response] (do\n                                                             (js/console.log response)\n                                                             (swap! db/app-state assoc :access_levels response)))))\n        get-files (fn [] (GET \"http://localhost:5050/api/files/\"\n                           :headers {\"Authorization\" (str \"Bearer \" (get-in @db/app-state [:user \"token\" \"access_token\"]))}\n                           :handler (fn [response] (do\n                                                     (js/console.log response)\n                                                     (swap! db/app-state assoc :files response)))))]\n    (get-filetypes)\n    (get-access-levels)\n    (get-files)\n    (fn []\n      [:div.cntnr\n       ;;@errors\n       ;;@files\n       ;;(js/console.log (get-in @db/app-state [:user]))\n       ;;(str(get-in @db/app-state [:user \"files\"]))\n       [:div {:style {:display \"None\"}}\n        (def i (r/atom 0))]\n       [:table {:id \"file-grid\" :class \"grid\"}\n        [:thead\n         [:tr\n          [:td {:class \"grid-cell\"} \"filename\"]\n          [:td {:class \"grid-cell\"} \"description\"]\n          [:td {:class \"grid-cell\"} \"filetype\"]\n          [:td {:class \"grid-cell\"} \"access level\"]\n          [:td]\n          [:td]]]\n\n        [:tbody\n         (for [file-row (get-in @db/app-state [:files])]\n           (let [access-level-value (r/atom (get file-row \"access_level_id\"))\n                 file-type-value (r/atom (get file-row \"file_type_id\"))\n                 description-value (r/atom (get file-row \"description\"))\n                 file-id (get file-row \"id\")\n                 dl-link (if (= @access-level-value \"PRIVATE\")\n                               (str \"http://localhost:5050/api/files/download/\"\n                                    (get file-row \"filepath\") \"/\"\n                                    (get-in @db/app-state [:user \"token\" \"access_token\"]))\n                               (str \"http://localhost:5050/api/files/download/\"\n                                    (get file-row \"filepath\")))\n                 index @i\n                 _ (swap! i + 1)]\n             (js/console.log @i)\n             [:tr {:id file-id}\n              [:td {:class \"grid-cell\"}\n               [:a {:href dl-link}\n                (get file-row \"filename\")]]\n              [:td {:class \"grid-cell\"}\n               [input-element (str \"description\" file-id) (str \"description\" file-id) \"text\" description-value (r/atom false)]]\n              [:td {:class \"grid-cell\"}\n               [:select {:id \"file-type\"\n                         :default-value @file-type-value\n                         :on-change #(reset! file-type-value (.. % -target -value))}\n                (for [filetype (get-in @db/app-state [:filetypes])]\n                  [:option {:value filetype} filetype])]]\n              [:td {:class \"grid-cell\"}\n               [:select {:id \"access-level\"\n                         :default-value @access-level-value\n                         :on-change #(reset! access-level-value (.. % -target -value))}\n                (for [access_level (get-in @db/app-state [:access_levels])]\n                  [:option {:value access_level} access_level])]]\n              [:td {:class \"grid-cell\"}\n               [:button {:on-click (fn [event] (copy-to-clipboard dl-link))} \"Copy Link\"]]\n              [:td {:class \"grid-cell\"}\n               [:button\n                {:on-click\n                 (fn [event]\n                   (do\n                     (js/console.log @access-level-value)\n                     (PUT \"http://localhost:5050/api/files/\"\n                       {:format :json\n                        :headers {\"Authorization\" (str \"Bearer \" (get-in @db/app-state [:user \"token\" \"access_token\"]))}\n                        :params {:filename (get file-row \"filename\")\n                                 :id file-id\n                                 :description @description-value\n                                 :access_level_id @access-level-value\n                                 :file_type_id @file-type-value}\n                        :handler (fn [r] (do (js/console.log r)\n                                             (swap! db/app-state update-in [:files] assoc index r)))\n                        :error-handler (fn [r] (js/console.log r))})))}\n                \"Save\"]]\n\n              [:td {:class \"grid-cell\"}\n               [:button\n                {:on-click\n                 (fn [event]\n                   (do\n                     (DELETE (str \"http://localhost:5050/api/files/\" file-id)\n                       {:format :json\n                        :headers {\"Authorization\" (str \"Bearer \" (get-in @db/app-state [:user \"token\" \"access_token\"]))}\n                        :params {}\n                        :handler (fn [r] (do (js/console.log r)\n                                             (swap! db/app-state assoc :files (vec-remove index (get-in @db/app-state [:files])))))\n                        :error-handler (fn [r] (js/console.log r))})))}\n                \"Delete\"]]]\n             ;;(js/console.log @i)\n             ;;(swap! inc i)\n             ))]]])))\n(defn filestorage-view []\n  ;;(if (not (contains? @db/app-state :file-types))\n  ;;  )\n  [:div\n   [:h2 \"upload file\"]\n   [file-selector \"file-selector\"]\n\n   [:br] [:hr] [:br]\n\n   [:h2 \"files\"]\n\n   [file-viewer \"file-viewer\"]\n\n   ;;[:form {:action \"http://localhost:5050/api/upload\"\n   ;;        :enc-type \"multipart/form-data\"\n   ;;        :method \"post\"}\n   ;; [:input {:type \"file\"\n   ;;          :name \"file\"\n   ;;          :enc-type \"multipart/form-data\"}]\n   ;; [:br] [:br] [:br] [:br]\n   ;; [:button {:type \"submit\"}\n   ;;  \"Submit\"]]\n   ])\n\n"]}