shadow$provide.module$node_modules$$tinymce$tinymce_react$lib$cjs$main$ts$ScriptLoader2=function(global,require,module,exports){var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t};return __assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});exports.ScriptLoader=void 0;var Utils_1=require("module$node_modules$$tinymce$tinymce_react$lib$cjs$main$ts$Utils"),
injectScriptTag=function(doc,item,handler){var _a,_b,scriptTag=doc.createElement("script");scriptTag.referrerPolicy="origin";scriptTag.type="application/javascript";scriptTag.id=item.id;scriptTag.src=item.src;scriptTag.async=null!==(_a=item.async)&&void 0!==_a?_a:!1;scriptTag.defer=null!==(_b=item.defer)&&void 0!==_b?_b:!1;var loadHandler=function(){scriptTag.removeEventListener("load",loadHandler);scriptTag.removeEventListener("error",errorHandler);handler(item.src)},errorHandler=function(err){scriptTag.removeEventListener("load",
loadHandler);scriptTag.removeEventListener("error",errorHandler);handler(item.src,err)};scriptTag.addEventListener("load",loadHandler);scriptTag.addEventListener("error",errorHandler);doc.head&&doc.head.appendChild(scriptTag)},createDocumentScriptLoader=function(doc){var lookup={},scriptLoadOrErrorHandler=function(src,err){var item=lookup[src];item.done=!0;item.error=err;for(var _i=0,_a=item.handlers;_i<_a.length;_i++)(0,_a[_i])(src,err);item.handlers=[]};return{loadScripts:function(items,success,
failure){var failureOrLog=function(err){return void 0!==failure?failure(err):console.error(err)};if(0===items.length)failureOrLog(Error("At least one script must be provided"));else for(var successCount=0,failed=!1,loaded=function(_src,err){failed||(err?(failed=!0,failureOrLog(err)):++successCount===items.length&&success())},_i=0;_i<items.length;_i++){var item=items[_i],existing=lookup[item.src];existing?existing.done?loaded(item.src,existing.error):existing.handlers.push(loaded):(existing=(0,Utils_1.uuid)("tiny-"),
lookup[item.src]={id:existing,src:item.src,done:!1,error:null,handlers:[loaded]},injectScriptTag(doc,__assign({id:existing},item),scriptLoadOrErrorHandler))}},deleteScripts:function(){for(var _a,_i=0,_b=Object.values(lookup);_i<_b.length;_i++){var scriptTag=doc.getElementById(_b[_i].id);null!=scriptTag&&"SCRIPT"===scriptTag.tagName&&(null===(_a=scriptTag.parentNode)||void 0===_a?void 0:_a.removeChild(scriptTag))}lookup={}},getDocument:function(){return doc}}};exports.ScriptLoader=function(){var cache=
[],getDocumentScriptLoader=function(doc){var loader=cache.find(function(l){return l.getDocument()===doc});void 0===loader&&(loader=createDocumentScriptLoader(doc),cache.push(loader));return loader};return{loadList:function(doc,items,delay,success,failure){var doLoad=function(){return getDocumentScriptLoader(doc).loadScripts(items,success,failure)};0<delay?setTimeout(doLoad,delay):doLoad()},reinitialize:function(){for(var loader=cache.pop();null!=loader;loader=cache.pop())loader.deleteScripts()}}}()}
//# sourceMappingURL=module$node_modules$$tinymce$tinymce_react$lib$cjs$main$ts$ScriptLoader2.js.map
