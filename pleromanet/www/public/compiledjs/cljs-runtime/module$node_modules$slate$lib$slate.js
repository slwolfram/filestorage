shadow$provide.module$node_modules$slate$lib$slate=function(global,require,module,exports){function _interopDefault(ex){return ex&&"object"===typeof ex&&"default"in ex?ex["default"]:ex}function resetGenerator(){n$jscomp$0=0;generate=function(){return""+n$jscomp$0++}}function compare(path,target){for(var m=min$jscomp$0(path,target),i=0;i<m;i++){var pv=path.get(i),tv=target.get(i);if(pv<tv)return-1;if(pv>tv)return 1}return path.size===target.size?0:null}function create$1(attrs){if(null==attrs)return null;
if(immutable.List.isList(attrs))return attrs;if(Array.isArray(attrs))return immutable.List(attrs);throw Error("Paths can only be created from arrays or lists, but you passed: "+attrs);}function crop(a,b){var size=2<arguments.length&&void 0!==arguments[2]?arguments[2]:min$jscomp$0(a,b),ca=a.slice(0,size);size=b.slice(0,size);return[ca,size]}function decrement(path){return increment(path,0-(1<arguments.length&&void 0!==arguments[1]?arguments[1]:1),2<arguments.length&&void 0!==arguments[2]?arguments[2]:
path.size-1)}function increment(path){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,index=2<arguments.length&&void 0!==arguments[2]?arguments[2]:path.size-1,value=path.get(index);return path.set(index,value+n)}function isAbove(path,target){var _crop=crop(path,target),_crop2=slicedToArray(_crop,2);_crop=_crop2[0];_crop2=_crop2[1];return path.size<target.size&&0===compare(_crop,_crop2)}function isYounger(path,target){var index=path.size-1,_crop9=crop(path,target,index),_crop10=slicedToArray(_crop9,
2);_crop9=_crop10[0];_crop10=_crop10[1];path=path.get(index);target=target.get(index);return _crop9.equals(_crop10)&&path<target}function min$jscomp$0(a,b){return Math.min(a.size,b.size)}function isObject(type,value){return!(!value||!value[TYPES[type]])}function applyOperation(value,op){op=Operation.create(op);var type=op.type;debug(type,op);switch(type){case "add_annotation":return value.addAnnotation(op.annotation);case "add_mark":return value.addMark(op.path,op.mark);case "insert_node":return value.insertNode(op.path,
op.node);case "insert_text":return value.insertText(op.path,op.offset,op.text,op.marks);case "merge_node":return value.mergeNode(op.path);case "move_node":return value.moveNode(op.path,op.newPath);case "remove_annotation":return value.removeAnnotation(op.annotation);case "remove_mark":return value.removeMark(op.path,op.mark);case "remove_node":return value.removeNode(op.path);case "remove_text":return value.removeText(op.path,op.offset,op.text);case "set_annotation":return value.setAnnotation(op.properties,
op.newProperties);case "set_mark":return value.setMark(op.path,op.properties,op.newProperties);case "set_node":return value.setNode(op.path,op.newProperties);case "set_selection":return value.setSelection(op.newProperties);case "set_value":return value.setProperties(op.newProperties);case "split_node":return value.splitNode(op.path,op.position,op.properties);default:throw Error('Unknown operation type: "'+type+'".');}}function invertOperation(op){op=Operation.create(op);var type=op.type;debug$1(type,
op);switch(type){case "move_node":var _op2=op;type=_op2.path;if(PathUtils.isEqual(_op2.newPath,type))return op;_op2=PathUtils.transform(type,op).first();type=PathUtils.transform(PathUtils.increment(type),op).first();return op.set("path",_op2).set("newPath",type);case "merge_node":return type=PathUtils.decrement(op.path),op.set("type","split_node").set("path",type);case "split_node":return type=PathUtils.increment(op.path),op.set("type","merge_node").set("path",type);case "set_annotation":case "set_node":case "set_value":case "set_selection":case "set_mark":return type=
op,_op2=type.properties,op.set("properties",type.newProperties).set("newProperties",_op2);case "insert_node":case "insert_text":return op.set("type",type.replace("insert_","remove_"));case "remove_node":case "remove_text":return op.set("type",type.replace("remove_","insert_"));case "add_annotation":case "add_mark":return op.set("type",type.replace("add_","remove_"));case "remove_annotation":case "remove_mark":return op.set("type",type.replace("remove_","add_"));default:throw Error('Unknown operation type: "'+
type+'".');}}function CommandsPlugin(){var commands=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{onCommand:function(command,editor,next){var args=command.args;command=commands[command.type];if(!command)return next();editor.command.apply(editor,[command].concat(toConsumableArray(args)))},onConstruct:function(editor,next){for(var command in commands)editor.registerCommand(command);return next()}}}function isSurrogate(code){return 55296<=code&&57343>=code}function isModifier(code,
text,offset){return 55356===code?(code=text.charCodeAt(offset+1),57343>=code&&57339<=code):!1}function isWord(char,remaining){if(SPACE.test(char))return!1;if(CHAMELEON.test(char)){var next=remaining.charAt(0),length=getCharLength(next);next=remaining.slice(0,length);remaining=remaining.slice(length);if(isWord(next,remaining))return!0}return PUNCTUATION.test(char)?!1:!0}function getCharLength(char){return isSurrogate(char.charCodeAt(0))?2:1}function getCharOffset(text,chars,forward){var offset=0;if(""===
text)return 1;for(var i=0;i<chars;i++)for(var prev=null,charCode=text.charCodeAt(offset);charCode;)if(isSurrogate(charCode)){charCode=isModifier(charCode,text,offset);if(forward){if(!charCode&&prev&&"ZWJ"!==prev||charCode&&prev&&"SURR"!==prev)break}else if("SURR"===prev||"BMP"===prev)break;offset+=2;prev=charCode?"MOD":"SURR";charCode=text.charCodeAt(offset)}else if(8205===charCode)offset+=1,prev="ZWJ",charCode=text.charCodeAt(offset);else if(10084===charCode||9794===charCode||9792===charCode||9760===
charCode||9877===charCode||9992===charCode||9711===charCode){if(forward&&"VAR"===prev||prev&&"ZWJ"!==prev&&"VAR"!==prev)break;offset+=1;prev="BMP";charCode=text.charCodeAt(offset)}else if(65039>=charCode&&65024<=charCode){if(!forward&&prev&&"ZWJ"!==prev)break;offset+=1;prev="VAR";charCode=text.charCodeAt(offset)}else{if(forward){if(charCode=text.charCodeAt(offset+1),isModifier(charCode,text,offset+1)){offset+=3;prev="MOD";charCode=text.charCodeAt(offset);continue}}else if("MOD"===prev){offset+=1;
break}null===prev&&(offset+=1);break}return offset}function getWordOffset(text){for(var length=0,i=0,started=!1,char;char=text.charAt(i);){var l=getCharLength(char);char=text.slice(i,i+l);var rest=text.slice(i+l);if(isWord(char,rest))started=!0,length+=l;else if(started)break;else length+=l;i+=l}return length}function deleteExpandedAtRange(editor,range){range.isExpanded&&editor.deleteAtRange(range);editor=editor.value.document;var _range=range,end=_range.end;return range=editor.hasDescendant(_range.start.path)?
range.moveToStart():range.moveTo(end.path,0).normalize(editor)}function shouldMerge(o,p){return p?"set_selection"===o.type&&"set_selection"===p.type||"insert_text"===o.type&&"insert_text"===p.type&&o.offset===p.offset+p.text.length&&o.path.equals(p.path)||"remove_text"===o.type&&"remove_text"===p.type&&o.offset+o.text.length===p.offset&&o.path.equals(p.path):!1}function isValidOperation(o){if("set_selection"===o.type){o=o.newProperties;var anchor=o.anchor,focus=o.focus;if(void 0!==o.isFocused&&!anchor&&
!focus)return!1}return!0}function proxy(editor,method){for(var _editor$value$selecti,_len39=arguments.length,args=Array(2<_len39?_len39-2:0),_key39=2;_key39<_len39;_key39++)args[_key39-2]=arguments[_key39];_len39=(_editor$value$selecti=editor.value.selection)[method].apply(_editor$value$selecti,args);editor.select(_len39)}function pointEdgeObject(editor,point,edge,object){var Point=point.slice(0,1).toUpperCase()+point.slice(1),Edge=edge.slice(0,1).toUpperCase()+edge.slice(1);edge=object.slice(0,1).toUpperCase()+
object.slice(1);Point="move"+Point+"To"+Edge+"OfNode";Edge=editor.value;if(point=Edge.document["text"===object?"getNode":"getClosest"+edge](Edge.selection[point].key))editor[Point](point)}function pointEdgeSideObject(editor,point,edge,side,object){var Point=point.slice(0,1).toUpperCase()+point.slice(1);edge=edge.slice(0,1).toUpperCase()+edge.slice(1);var Side=side.slice(0,1).toUpperCase()+side.slice(1);side=object.slice(0,1).toUpperCase()+object.slice(1);Point="move"+Point+"To"+edge+"OfNode";edge=
"get"+Side+side;var value=editor.value;Side=value.document;if(point=Side["text"===object?"getNode":"getClosest"+side](value.selection[point].key))if(point=Side[edge](point.key))editor[Point](point)}function pointBackward(editor,point){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){if(0>n)return pointForward(editor,point,-n);var Point=point.slice(0,1).toUpperCase()+point.slice(1),value=editor.value,document=value.document,selection=value.selection,p=selection[point];value=
document.hasVoidParent(p.path,editor);if(!value&&0<=p.offset-n)n=selection["move"+Point+"Backward"](n),editor.select(n);else if(selection=document.getPreviousText(p.path))p=document.getClosestBlock(p.path).hasNode(selection.key),document=selection&&document.hasVoidParent(selection.key,editor),editor["move"+Point+"ToEndOfNode"](selection),value||document||!p||(n=editor.value.selection["move"+Point+"Backward"](n),editor.select(n))}}function pointForward(editor,point){var n=2<arguments.length&&void 0!==
arguments[2]?arguments[2]:1;if(0!==n){if(0>n)return pointBackward(editor,point,-n);var Point=point.slice(0,1).toUpperCase()+point.slice(1),value=editor.value,document=value.document,selection=value.selection,p=selection[point],text=document.getNode(p.path);value=document.hasVoidParent(p.path,editor);if(!value&&p.offset+n<=text.text.length)n=selection["move"+Point+"Forward"](n),editor.select(n);else if(selection=document.getNextText(p.path))p=document.getClosestBlock(p.path).hasNode(selection.key),
document=document.hasVoidParent(selection.key,editor),editor["move"+Point+"ToStartOfNode"](selection),value||document||!p||(n=editor.value.selection["move"+Point+"Forward"](n),editor.select(n))}}function pointWordBackward(editor,pointName){var value=editor.value,point=value.selection[pointName];value=value.document.getClosestBlock(point.key);point=value.getOffset(point.key)+point.offset;point=TextUtils.getWordOffsetBackward(value.text,point);editor.command(pointBackward,pointName,0<point?point:1)}
function pointWordForward(editor,pointName){var value=editor.value,point=value.selection[pointName];value=value.document.getClosestBlock(point.key);point=value.getOffset(point.key)+point.offset;point=TextUtils.getWordOffsetForward(value.text,point);editor.command(pointForward,pointName,0<point?point:1)}function QueriesPlugin(){var queries=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{onConstruct:function(editor,next){for(var query in queries)editor.registerQuery(query);return next()},
onQuery:function(query,editor,next){var args=query.args;query=queries[query.type];if(!query)return next();editor=query.apply(void 0,[editor].concat(toConsumableArray(args)));return void 0===editor?next():editor}}}function SchemaPlugin(schema){function validateNode(node,editor,next){editor=schemaRules.filter(function(r){return!validateRules(node,r.match)});return(editor=validateRules(node,editor,schemaRules,{every:!0}))?new SlateError(editor.code,editor):next()}var rules=schema.rules,document=schema.document,
blocks=schema.blocks,inlines=schema.inlines,marks=schema.marks,annotations=schema.annotations;schema=schema.decorations;var schemaRules=[];rules&&(schemaRules=schemaRules.concat(rules));document&&schemaRules.push(_extends({match:[{object:"document"}]},document));if(blocks)for(var key in blocks)schemaRules.push(_extends({match:[{object:"block",type:key}]},blocks[key]));if(inlines)for(var _key in inlines)schemaRules.push(_extends({match:[{object:"inline",type:_key}]},inlines[_key]));if(marks)for(var _key2 in marks)schemaRules.push(_extends({match:[{object:"mark",
type:_key2}]},marks[_key2]));if(annotations)for(var _key3 in annotations)schemaRules.push(_extends({match:[{object:"annotation",type:_key3}]},annotations[_key3]));if(schema)for(var _key4 in schema)schemaRules.push(_extends({match:[{object:"decoration",type:_key4}]},schema[_key4]));rules=QueriesPlugin({isAtomic:function(editor,format){return(editor=schemaRules.find(function(r){return"isAtomic"in r&&!validateRules(format,r.match)}))&&editor.isAtomic},isVoid:function(editor,node){return(editor=schemaRules.find(function(r){return"isVoid"in
r&&!validateRules(node,r.match)}))&&editor.isVoid}});return[{normalizeNode:function(node,editor,next){var error=validateNode(node,editor,function(){});return error?function(){var rule=error.rule,size=editor.operations.size;rule.normalize&&rule.normalize(editor,error);editor.operations.size===size&&defaultNormalize(editor,error)}:next()},validateNode},rules]}function defaultNormalize(editor,error){var node=error.node,child=error.child,next=error.next,previous=error.previous,key=error.key,mark=error.mark;
switch(error.code){case "child_max_invalid":case "child_object_invalid":case "child_type_invalid":case "child_unknown":case "first_child_object_invalid":case "first_child_type_invalid":case "last_child_object_invalid":case "last_child_type_invalid":return"text"===child.object&&"block"===node.object&&1===node.nodes.size?editor.removeNodeByKey(node.key):editor.removeNodeByKey(child.key);case "previous_sibling_object_invalid":case "previous_sibling_type_invalid":return"text"===previous.object&&"block"===
node.object&&1===node.nodes.size?editor.removeNodeByKey(node.key):editor.removeNodeByKey(previous.key);case "next_sibling_object_invalid":case "next_sibling_type_invalid":return"text"===next.object&&"block"===node.object&&1===node.nodes.size?editor.removeNodeByKey(node.key):editor.removeNodeByKey(next.key);case "child_min_invalid":case "node_text_invalid":case "parent_object_invalid":case "parent_type_invalid":return"document"===node.object?node.nodes.forEach(function(n){return editor.removeNodeByKey(n.key)}):
editor.removeNodeByKey(node.key);case "node_data_invalid":return void 0===node.data.get(key)&&"document"!==node.object?editor.removeNodeByKey(node.key):editor.setNodeByKey(node.key,{data:node.data.delete(key)});case "node_mark_invalid":return node.getTexts().forEach(function(t){return editor.removeMarkByKey(t.key,0,t.text.length,mark)});default:return editor.removeNodeByKey(node.key)}}function validateRules(object,rule,rules){var options=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},_options$every=
options.every;_options$every=void 0===_options$every?!1:_options$every;options=options.match;options=void 0===options?null:options;if("function"===typeof rule)return rule(object,options)?null:fail("node_invalid",{rule,node:object});if(Array.isArray(rule)){var array=rule.length?rule:[{}];options=void 0;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=array[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=
!0){var _error=validateRules(object,_step.value,rules);options=options||_error;if(_options$every&&_error)return _error;if(!_options$every&&!_error)return}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError;}}return options}_iterator=null==rule.object||rule.object===object.object||"function"===typeof rule.object&&rule.object(object.object)?void 0:fail("node_object_invalid",
{rule,node:object});_iterator||(_iterator=null==rule.type||rule.type===object.type||"function"===typeof rule.type&&rule.type(object.type)?void 0:fail("node_type_invalid",{rule,node:object}));if(!_iterator)a:{if(null!=rule.data&&null!=object.data){if("function"===typeof rule.data){_iterator=rule.data(object.data)?void 0:fail("node_data_invalid",{rule,node:object});break a}for(array in rule.data)if(_iterator=rule.data[array],_step=object.data&&object.data.get(array),"function"===typeof _iterator?!_iterator(_step):
_iterator!==_step){_iterator=fail("node_data_invalid",{rule,node:object,key:array,value:_step});break a}}_iterator=void 0}(_iterator=_iterator||validateMarks(object,rule))||(null==rule.text?_iterator=void 0:(_iterator=object.text,_iterator=("function"===typeof rule.text?rule.text(_iterator):rule.text.test(_iterator))?void 0:fail("node_text_invalid",{rule,node:object,text:_iterator})));if(!_iterator)a:{if(null!=rule.first&&(_iterator=object.nodes.first())&&(_step=validateRules(_iterator,rule.first))){_step.rule=
rule;_step.node=object;_step.child=_iterator;_step.code=_step.code.replace("node_","first_child_");_iterator=_step;break a}_iterator=void 0}if(!_iterator)a:{if(null!=rule.last&&(_iterator=object.nodes.last())&&(_step=validateRules(_iterator,rule.last))){_step.rule=rule;_step.node=object;_step.child=_iterator;_step.code=_step.code.replace("node_","last_child_");_iterator=_step;break a}_iterator=void 0}return _iterator||validateNodes(object,rule,rules)}function validateMarks(node,rule){if(null!=rule.marks){var marks=
"text"===node.object?node.marks.toArray():node.getMarks().toArray(),_loop=function(mark){return rule.marks.some(function(def){return"function"===typeof def.type?def.type(mark.type):def.type===mark.type})?"continue":{v:fail("node_mark_invalid",{rule,node,mark})}},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=marks[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _ret=_loop(_step2.value);
switch(_ret){case "continue":continue;default:if("object"===("undefined"===typeof _ret?"undefined":_typeof(_ret)))return _ret.v}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2;}}}}function validateNodes(node,rule){function nextDef(){if(0===defs.length)return!1;def=defs.shift();lastCount=count;count=0;min=def.min||null;max=def.max||null;return!0}function nextChild(){previous=
(index+=1)?children.get(index-1):null;child=children.get(index);next=children.get(index+1);if(!child)return!1;lastCount=count;count+=1;return!0}var rules=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(null!=node.nodes){var children=node.nodes,defs=null!=rule.nodes?rule.nodes.slice():[],count=0,lastCount=0,min=null,index=-1,def=null,max=null,child=null,previous=null,next=null;for(null!=rule.nodes&&nextDef();nextChild();){var err=validateParent(node,child,rules)||validatePrevious(node,
child,previous,index,rules)||validateNext(node,child,next,index,rules);if(err)return err;if(null!=rule.nodes){if(!def)return fail("child_unknown",{rule,node,child,index});if(def.match&&(err=validateRules(child,def.match))){if(null!=max&&count-1>max)return 0<index&&(--index,count=lastCount),fail("child_max_invalid",{rule,node,index,child:children.get(index),count,limit:max});var lastMin=min;if(nextDef()){if(lastCount-1>=lastMin){--index;continue}if(null==validateRules(child,def.match))return 0<index&&
(--index,count=lastCount),fail("child_min_invalid",{rule,node,index,count:lastCount-1,limit:lastMin});err.rule=rule;err.node=node;err.child=child;err.index=index;err.code=err.code.replace("node_","child_");return err}if(null!=max&&count>max)return fail("child_unknown",{rule,node,child,index});err.rule=rule;err.node=node;err.child=child;err.index=index;err.code=err.code.replace("node_","child_");return err}}}if(null!=max&&count>max)return fail("child_max_invalid",{rule,node,index:index-1,count,child:children.get(index-
1),limit:max});if(null!=rule.nodes){do if(count<min)return fail("child_min_invalid",{rule,node,index,count,limit:min});while(nextDef())}}}function validateParent(node,child,rules){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _iterator3=rules[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var rule=_step3.value;if(null!=rule.parent&&!validateRules(child,rule.match)){var error=validateRules(node,
rule.parent);if(error)return error.rule=rule,error.parent=node,error.node=child,error.code=error.code.replace("node_","parent_"),error}}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3;}}}function validatePrevious(node,child,previous,index,rules){if(previous){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _iterator4=rules[Symbol.iterator](),
_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var rule=_step4.value;if(null!=rule.previous&&!validateRules(child,rule.match)){var error=validateRules(previous,rule.previous);if(error)return error.rule=rule,error.node=node,error.child=child,error.index=index,error.previous=previous,error.code=error.code.replace("node_","previous_sibling_"),error}}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&
_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4;}}}}function validateNext(node,child,next,index,rules){if(next){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _iterator5=rules[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var rule=_step5.value;if(null!=rule.next&&!validateRules(child,rule.match)){var error=validateRules(next,rule.next,[],{match:child});if(error)return error.rule=
rule,error.node=node,error.child=child,error.index=index,error.next=next,error.code=error.code.replace("node_","next_sibling_"),error}}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5;}}}}function fail(code,attrs){return _extends({code},attrs)}function deleteExpanded(editor){editor.value.selection.isExpanded&&editor.delete()}function CorePlugin(){var _options$plugins=
(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).plugins;_options$plugins=void 0===_options$plugins?[]:_options$plugins;var commands=CommandsPlugin(_extends({},Commands$1,Commands$2,Commands$3,Commands$4,Commands$5,Commands$6)),queries=QueriesPlugin({isAtomic:function(){return!1},isVoid:function(){return!1}});return[SchemaPlugin({rules:[{match:{object:"document"},nodes:[{match:{object:"block"}}]},{match:{object:"block",first:{object:"block"}},nodes:[{match:{object:"block"}}]},{match:{object:"block",
first:[{object:"inline"},{object:"text"}]},nodes:[{match:[{object:"inline"},{object:"text"}]}]},{match:{object:"inline"},nodes:[{match:[{object:"inline"},{object:"text"}]}]},{match:[{object:"block"},{object:"inline"}],nodes:[{min:1}],normalize:function(editor,error){var node=error.node;"child_min_invalid"===error.code&&node.nodes.isEmpty()&&editor.insertNodeByKey(node.key,0,Text$jscomp$0.create())}},{match:{object:"block"},first:[{object:"block"},{object:"text"}],last:[{object:"block"},{object:"text"}],
normalize:function(editor,error){var code=error.code;error=error.node;var text=Text$jscomp$0.create();if("first_child_object_invalid"===code)code=0;else if("last_child_object_invalid"===code)code=error.nodes.size;else return;editor.insertNodeByKey(error.key,code,text)}},{match:{object:"inline"},first:[{object:"block"},{object:"text"}],last:[{object:"block"},{object:"text"}],previous:[{object:"block"},{object:"text"}],next:[{object:"block"},{object:"text"}],normalize:function(editor,error){var code=
error.code,node=error.node,index=error.index;error=Text$jscomp$0.create();if("first_child_object_invalid"===code)code=0;else if("last_child_object_invalid"===code)code=node.nodes.size;else if("previous_sibling_object_invalid"===code)code=index;else if("next_sibling_object_invalid"===code)code=index+1;else return;editor.insertNodeByKey(node.key,code,error)}},{match:{object:"text"},next:function(_next,match){return"text"!==_next.object||!match.marks.equals(_next.marks)},normalize:function(editor,error){var next=
error.next;"next_sibling_invalid"===error.code&&editor.mergeNodeByKey(next.key)}},{match:{object:"text"},previous:function(prev){return"text"!==prev.object||""!==prev.text},next:function(_next2){return"text"!==_next2.object||""!==_next2.text},normalize:function(editor,error){var code=error.code,next=error.next;error=error.previous;"next_sibling_invalid"===code?editor.removeNodeByKey(next.key):"previous_sibling_invalid"===code&&editor.removeNodeByKey(error.key)}}]})].concat(toConsumableArray(_options$plugins),
[commands,queries])}function getDirtyPaths(operation){var node=operation.node,path=operation.path,newPath=operation.newPath;switch(operation.type){case "add_mark":case "insert_text":case "remove_mark":case "remove_text":case "set_mark":case "set_node":return newPath=PathUtils.getAncestors(path).toArray(),[].concat(toConsumableArray(newPath),[path]);case "insert_node":return newPath=node.getKeysToPathsTable(),newPath=Object.values(newPath).map(function(p){return path.concat(p)}),node=PathUtils.getAncestors(path).toArray(),
[].concat(toConsumableArray(node),[path],toConsumableArray(newPath));case "split_node":return newPath=PathUtils.getAncestors(path).toArray(),node=PathUtils.increment(path),[].concat(toConsumableArray(newPath),[path,node]);case "merge_node":return newPath=PathUtils.getAncestors(path).toArray(),node=PathUtils.decrement(path),[].concat(toConsumableArray(newPath),[node]);case "move_node":if(PathUtils.isEqual(path,newPath))return[];node=PathUtils.getAncestors(path).reduce(function(arr,p){arr.push.apply(arr,
toConsumableArray(PathUtils.transform(p,operation).toArray()));return arr},[]);newPath=PathUtils.getAncestors(newPath).reduce(function(arr,p){arr.push.apply(arr,toConsumableArray(PathUtils.transform(p,operation).toArray()));return arr},[]);return[].concat(toConsumableArray(node),toConsumableArray(newPath));case "remove_node":return newPath=PathUtils.getAncestors(path).toArray(),[].concat(toConsumableArray(newPath));default:return[]}}function normalizeDirtyPaths(editor$jscomp$0){editor$jscomp$0.tmp.normalize&&
editor$jscomp$0.tmp.dirty.length&&editor$jscomp$0.withoutNormalizing(function(){for(;editor$jscomp$0.tmp.dirty.length;){var path=editor$jscomp$0.tmp.dirty.pop(),editor=editor$jscomp$0,controller=editor.controller,value=editor.value;value=value.document;for(var node=value.assertNode(path),iterations=0,max=100+("text"===node.object?1:node.nodes.size);node;){value=node.normalize(controller);if(!value)break;value(controller);value=editor.value;value=value.document;var key=node.key;node=value.getDescendant(path);
if(!node||node.key!==key)if(node=value.getDescendant(key))path=value.getPath(key);else break;iterations++;if(iterations>max)throw Error("A schema rule could not be normalized after sufficient iterations. This is usually due to a `rule.normalize` or `plugin.normalizeNode` function of a schema being incorrectly written, causing an infinite loop.");}}})}function registerPlugin(editor,plugin){if(Array.isArray(plugin))plugin.forEach(function(p){return registerPlugin(editor,p)});else if(null!=plugin){var commands=
plugin.commands,queries=plugin.queries,schema=plugin.schema;plugin=objectWithoutProperties(plugin,["commands","queries","schema"]);commands&&(commands=CommandsPlugin(commands),registerPlugin(editor,commands));queries&&(queries=QueriesPlugin(queries),registerPlugin(editor,queries));schema&&(schema=SchemaPlugin(schema),registerPlugin(editor,schema));for(var key in plugin)schema=plugin[key],(editor.middleware[key]=editor.middleware[key]||[]).push(schema)}}function mixin(Interface,Classes){var _iteratorNormalCompletion=
!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=Classes[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var Class=_step.value;Classes=!0;var _didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=Object.getOwnPropertyNames(Interface)[Symbol.iterator](),_step2;!(Classes=(_step2=_iterator2.next()).done);Classes=!0){var name=_step2.value;if(!Class.hasOwnProperty(name)){var desc=Object.getOwnPropertyDescriptor(Interface,
name);Object.defineProperty(Class,name,desc)}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!Classes&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2;}}Classes=!0;_didIteratorError2=!1;_iteratorError2=void 0;try{for(var _iterator3=Object.getOwnPropertyNames(Interface.prototype)[Symbol.iterator](),_step3;!(Classes=(_step3=_iterator3.next()).done);Classes=!0){var _name=_step3.value;Class.prototype.hasOwnProperty(_name)||(desc=Object.getOwnPropertyDescriptor(Interface.prototype,
_name),Object.defineProperty(Class.prototype,_name,desc))}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!Classes&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError2)throw _iteratorError2;}}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError;}}}function create$2(type){var TYPE=TYPES[type],is="is"+(""+type.charAt(0).toUpperCase()+type.slice(1)),
ObjectInterface=function(){function ObjectInterface(){classCallCheck(this,ObjectInterface)}createClass(ObjectInterface,[{key:"object",get:function(){return type}}]);return ObjectInterface}();ObjectInterface[is]=isObject.bind(null,type);ObjectInterface.prototype[TYPE]=!0;return ObjectInterface}function memoize(object,properties){var _loop=function(property){var original=object[property];if(!original)throw Error('Object does not have a property named "'+property+'".');object[property]=function(){for(var _len=
arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(!ENABLED)return original.apply(this,args);memoizeStore.has(this)||memoizeStore.set(this,{noArgs:{},hasArgs:{}});_len=memoizeStore.get(this);_key=_len.noArgs;var hasArgs=_len.hasArgs,takesArguments=0!==args.length,cachedValue=void 0;_len=void 0;if(takesArguments){_len=[property].concat(args);a:{var map=hasArgs,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=_len[Symbol.iterator](),
_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value;void 0===key?key=UNDEFINED:null==key&&(key=NULL);map="object"===("undefined"===typeof key?"undefined":_typeof(key))?map[STORE_KEY]&&map[STORE_KEY].get(key):map[key];if(void 0===map){cachedValue=void 0;break a}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2;
}}cachedValue=map[LEAF]}}else cachedValue=_key[property];if(void 0!==cachedValue)return cachedValue===UNDEFINED?void 0:cachedValue;args=original.apply(this,args);_iterator2=void 0===args?UNDEFINED:args;if(takesArguments){_key=hasArgs;_step2=!0;key=!1;hasArgs=void 0;try{for(var _iterator3=_len[Symbol.iterator](),_step3;!(_step2=(_step3=_iterator3.next()).done);_step2=!0){var key$jscomp$0=_step3.value;void 0===key$jscomp$0?key$jscomp$0=UNDEFINED:null==key$jscomp$0&&(key$jscomp$0=NULL);"object"!==("undefined"===
typeof key$jscomp$0?"undefined":_typeof(key$jscomp$0))?(_key[key$jscomp$0]||(_key[key$jscomp$0]={}),_key=_key[key$jscomp$0]):(_key[STORE_KEY]||(_key[STORE_KEY]=new WeakMap),_key[STORE_KEY].has(key$jscomp$0)?_key=_key[STORE_KEY].get(key$jscomp$0):(_len={},_key[STORE_KEY].set(key$jscomp$0,_len),_key=_len))}}catch(err){key=!0,hasArgs=err}finally{try{!_step2&&_iterator3.return&&_iterator3.return()}finally{if(key)throw hasArgs;}}_key[LEAF]=_iterator2}else _key[property]=_iterator2;return args}},_iteratorNormalCompletion=
!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=properties[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop(_step.value)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError;}}}function resetMemoization(){memoizeStore=new WeakMap}function useMemoization(enabled){ENABLED=enabled}function identity(){return!0}
Object.defineProperty(exports,"__esModule",{value:!0});var immutable=require("module$node_modules$immutable$dist$immutable"),isPlainObject=_interopDefault(require("module$node_modules$is_plain_object$index")),warning=_interopDefault(require("module$node_modules$slate$node_modules$tiny_warning$dist$tiny_warning_cjs")),invariant=_interopDefault(require("module$node_modules$tiny_invariant$dist$tiny_invariant_cjs")),Debug=_interopDefault(require("module$node_modules$debug$src$browser")),esrever=require("module$node_modules$esrever$esrever"),
pick=_interopDefault(require("module$node_modules$lodash$pick")),omit=_interopDefault(require("module$node_modules$lodash$omit")),getDirection=_interopDefault(require("module$node_modules$direction$index")),n$jscomp$0=void 0,generate=void 0;resetGenerator();var KeyUtils={create:function(key){if(null==key)return generate();if("string"===typeof key)return key;throw Error("Keys must be strings, but you passed: "+key);},setGenerator:function(func){generate=func},resetGenerator},_typeof="function"===typeof Symbol&&
"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;
descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}(),defineProperty=function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj},_extends=Object.assign||
function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i],key;for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},inherits=function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,
configurable:!0}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)},objectWithoutProperties=function(obj,keys){var target={},i;for(i in obj)0<=keys.indexOf(i)||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?
self:call},slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e;}}return _arr}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),toConsumableArray=function(arr){if(Array.isArray(arr)){for(var i=
0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)},PathUtils={compare,create:create$1,crop,decrement,getAncestors:function(path){return immutable.List().withMutations(function(list){for(var i=0;i<path.size;i++)list.push(path.slice(0,i))})},increment,isAbove,isAfter:function(path,target){path=crop(path,target);path=slicedToArray(path,2);return 1===compare(path[0],path[1])},isBefore:function(path,target){path=crop(path,target);path=slicedToArray(path,2);return-1===
compare(path[0],path[1])},isEqual:function(path,target){return path.equals(target)},isOlder:function(path,target){var index=path.size-1,_crop7=crop(path,target,index),_crop8=slicedToArray(_crop7,2);_crop7=_crop8[0];_crop8=_crop8[1];path=path.get(index);target=target.get(index);return _crop7.equals(_crop8)&&path>target},isPath:function(any){return(immutable.List.isList(any)||Array.isArray(any))&&any.every(function(n){return"number"===typeof n})},isSibling:function(path,target){if(path.size!==target.size)return!1;
path=path.butLast();target=target.butLast();return path.equals(target)},isYounger,lift:function(path){return path.slice(0,-1*(1<arguments.length&&void 0!==arguments[1]?arguments[1]:1))},drop:function(path){return path.slice(1<arguments.length&&void 0!==arguments[1]?arguments[1]:1)},max:function(a,b){return Math.max(a.size,b.size)},min:min$jscomp$0,relate:function(a,b){for(var array=[],i=0;i<a.size&&i<b.size;i++){var av=a.get(i),bv=b.get(i);if(av!==bv)break;array.push(av)}return create$1(array)},transform:function(path,
operation){var type=operation.type,position=operation.position,p=operation.path;if("add_mark"===type||"insert_text"===type||"remove_mark"===type||"remove_text"===type||"set_mark"===type||"set_node"===type||"set_selection"===type||"set_value"===type||"add_annotation"===type||"remove_annotation"===type||"set_annotation"===type||0===path.size)return immutable.List([path]);var pIndex=p.size-1,pEqual=p.equals(path),pYounger=isYounger(p,path),pAbove=isAbove(p,path);"insert_node"===type&&(pEqual||pYounger||
pAbove)&&(path=increment(path,1,pIndex));if("remove_node"===type)if(pYounger)path=decrement(path,1,pIndex);else if(pEqual||pAbove)path=[];"merge_node"===type&&(pEqual||pYounger?path=decrement(path,1,pIndex):pAbove&&(path=decrement(path,1,pIndex),path=increment(path,position,pIndex+1)));"split_node"===type&&(pEqual?path=[path,increment(path)]:pYounger?path=increment(path,1,pIndex):pAbove&&path.get(pIndex+1)>=position&&(path=increment(path,1,pIndex),path=decrement(path,position,pIndex+1)));if("move_node"===
type){operation=operation.newPath;if(p.equals(operation))return immutable.List([path]);if(pAbove||pEqual)path=isYounger(p,operation)&&p.size<operation.size?decrement(operation,1,min$jscomp$0(operation,p)-1).concat(path.slice(p.size)):operation.concat(path.slice(p.size));else if(pYounger&&(path=decrement(path,1,pIndex)),isYounger(operation,path)||operation.equals(path)||isAbove(operation,path))path=increment(path,1,operation.size-1)}path=Array.isArray(path)?path:[path];return immutable.List(path)}},
Point=function(_Record){function Point(){classCallCheck(this,Point);return possibleConstructorReturn(this,(Point.__proto__||Object.getPrototypeOf(Point)).apply(this,arguments))}inherits(Point,_Record);createClass(Point,[{key:"isAfterPoint",value:function(point){return this.isUnset?!1:this.key===point.key&&this.offset>point.offset||1===PathUtils.compare(this.path,point.path)}},{key:"isAfterRange",value:function(range){return this.isUnset?!1:this.isAfterPoint(range.end)}},{key:"isAtEndOfRange",value:function(range){return this.isUnset?
!1:this.equals(range.end)}},{key:"isAtStartOfRange",value:function(range){return this.isUnset?!1:this.equals(range.start)}},{key:"isBeforePoint",value:function(point){return this.isUnset?!1:this.key===point.key&&this.offset<point.offset||-1===PathUtils.compare(this.path,point.path)}},{key:"isBeforeRange",value:function(range){return this.isUnset?!1:this.isBeforePoint(range.start)}},{key:"isInRange",value:function(range){return this.isUnset?!1:this.equals(range.start)||this.equals(range.end)||this.isAfterPoint(range.start)&&
this.isBeforePoint(range.end)}},{key:"isAtEndOfNode",value:function(node){if(this.isUnset)return!1;node=node.getLastText();return this.key===node.key&&this.offset===node.text.length}},{key:"isAtStartOfNode",value:function(node){if(this.isUnset||0!==this.offset)return!1;node=node.getFirstText();return this.key===node.key}},{key:"isInNode",value:function(node){return this.isUnset?!1:"text"===node.object&&node.key===this.key||node.hasNode(this.key)?!0:!1}},{key:"moveBackward",value:function(){var n=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 0===n?this:0>n?this.moveForward(-n):this.setOffset(this.offset-n)}},{key:"moveForward",value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 0===n?this:0>n?this.moveBackward(-n):this.setOffset(this.offset+n)}},{key:"moveTo",value:function(path){var offset=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,key=this.key;"number"===typeof path?(offset=path,path=this.path):"string"===typeof path?(key=
path,path=key===this.key?this.path:null):key=path.equals(this.path)?this.key:null;return this.merge({key,path,offset})}},{key:"moveToStartOfNode",value:function(node){node=node.getFirstText();return this.moveTo(node.key,0)}},{key:"moveToEndOfNode",value:function(node){node=node.getLastText();return this.moveTo(node.key,node.text.length)}},{key:"normalize",value:function(node){if(null==this.key&&null==this.path)return this.setOffset(null);var key=this.key,offset=this.offset,path=this.path,target=path&&
node.getNode(path);if(!target&&(target=node.getNode(key)))return this.merge({path:node.getPath(key)});if(!target)return warning(!1,"A point's `path` or `key` invalid and was reset!"),(offset=node.getFirstText())?this.merge({key:offset.key,offset:0,path:node.getPath(offset.key)}):Point.create();if("text"!==target.object)return warning(!1,"A point should not reference a non-text node!"),key=target.getTextAtOffset(offset),target=target.getOffset(key.key),this.merge({offset:offset-target,key:key.key,
path:node.getPath(key.key)});target&&path&&key&&key!==target.key&&warning(!1,"A point's `key` did not match its `path`!");offset=this.merge({key:target.key,path:null==path?node.getPath(target.key):path,offset:null==offset?0:Math.min(offset,target.text.length)});offset.offset===target.text.length&&(target=node.getClosestBlock(offset.path).getNextText())&&(offset=offset.merge({key:target.key,path:node.getPath(target.key),offset:0}));return offset}},{key:"setKey",value:function(key){null!=key&&(key=
KeyUtils.create(key));return this.set("key",key)}},{key:"setOffset",value:function(offset){return this.set("offset",offset)}},{key:"setPath",value:function(path){null!=path&&(path=PathUtils.create(path));return this.set("path",path)}},{key:"toJSON",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},object={object:this.object,key:this.key,offset:this.offset,path:this.path&&this.path.toArray()};options.preserveKeys||delete object.key;return object}},{key:"unset",
value:function(){return this.merge({key:null,offset:null,path:null})}},{key:"isSet",get:function(){return null!=this.key&&null!=this.offset&&null!=this.path}},{key:"isUnset",get:function(){return!this.isSet}}],[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Point.isPoint(attrs))return attrs;if(isPlainObject(attrs))return Point.fromJSON(attrs);throw Error("`Point.create` only accepts objects or points, but you passed it: "+attrs);}},{key:"createProperties",
value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Point.isPoint(a))return{key:a.key,offset:a.offset,path:a.path};if(isPlainObject(a)){var p={};"key"in a&&(p.key=a.key);"offset"in a&&(p.offset=a.offset);"path"in a&&(p.path=PathUtils.create(a.path));"path"in a&&!("key"in a)&&(p.key=null);"key"in a&&!("path"in a)&&(p.path=null);return p}throw Error("`Point.createProperties` only accepts objects or points, but you passed it: "+a);}},{key:"fromJSON",value:function(object){var _object$key=
object.key,_object$offset=object.offset;object=object.path;return new Point({key:void 0===_object$key?null:_object$key,offset:void 0===_object$offset?null:_object$offset,path:PathUtils.create(void 0===object?null:object)})}}]);return Point}(immutable.Record({key:void 0,offset:void 0,path:void 0})),Data=function(){function Data(){classCallCheck(this,Data)}createClass(Data,null,[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(immutable.Map.isMap(attrs))return attrs;
if(isPlainObject(attrs))return Data.fromJSON(attrs);throw Error("`Data.create` only accepts objects or maps, but you passed it: "+attrs);}},{key:"fromJSON",value:function(object){return new immutable.Map(object)}}]);return Data}();Data.fromJS=Data.fromJSON;var Mark=function(_Record){function Mark(){classCallCheck(this,Mark);return possibleConstructorReturn(this,(Mark.__proto__||Object.getPrototypeOf(Mark)).apply(this,arguments))}inherits(Mark,_Record);createClass(Mark,[{key:"toJSON",value:function(){return{object:this.object,
type:this.type,data:this.data.toJSON()}}}],[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Mark.isMark(attrs))return attrs;"string"===typeof attrs&&(attrs={type:attrs});if(isPlainObject(attrs))return Mark.fromJSON(attrs);throw Error("`Mark.create` only accepts objects, strings or marks, but you passed it: "+attrs);}},{key:"createSet",value:function(elements){if(immutable.Set.isSet(elements)||Array.isArray(elements))return new immutable.Set(elements.map(Mark.create));
if(null==elements)return immutable.Set();throw Error("`Mark.createSet` only accepts sets, arrays or null, but you passed it: "+elements);}},{key:"createProperties",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Mark.isMark(attrs))return{data:attrs.data,type:attrs.type};if("string"===typeof attrs)return{type:attrs};if(isPlainObject(attrs)){var props={};"type"in attrs&&(props.type=attrs.type);"data"in attrs&&(props.data=Data.create(attrs.data));return props}throw Error("`Mark.createProperties` only accepts objects, strings or marks, but you passed it: "+
attrs);}},{key:"fromJSON",value:function(object){var _object$data=object.data;_object$data=void 0===_object$data?{}:_object$data;object=object.type;if("string"!==typeof object)throw Error("`Mark.fromJS` requires a `type` string.");return new Mark({type:object,data:new immutable.Map(_object$data)})}},{key:"isMarkSet",value:function(any){return immutable.Set.isSet(any)&&any.every(function(item){return Mark.isMark(item)})}}]);return Mark}(immutable.Record({data:void 0,type:void 0})),Decoration=function(_Record){function Decoration(){classCallCheck(this,
Decoration);return possibleConstructorReturn(this,(Decoration.__proto__||Object.getPrototypeOf(Decoration)).apply(this,arguments))}inherits(Decoration,_Record);createClass(Decoration,[{key:"setProperties",value:function(properties){properties=Decoration.createProperties(properties);return this.merge(properties)}},{key:"toJSON",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,type:this.type,data:this.data.toJSON(),anchor:this.anchor.toJSON(options),
focus:this.focus.toJSON(options)}}}],[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Decoration.isDecoration(attrs))return attrs;if(Range$jscomp$0.isRange(attrs))return Decoration.fromJSON(Range$jscomp$0.createProperties(attrs));if(isPlainObject(attrs))return Decoration.fromJSON(attrs);throw Error("`Decoration.create` only accepts objects or decorations, but you passed it: "+attrs);}},{key:"createList",value:function(){var elements=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:[];if(immutable.List.isList(elements)||Array.isArray(elements))return new immutable.List(elements.map(Decoration.create));throw Error("`Decoration.createList` only accepts arrays or lists, but you passed it: "+elements);}},{key:"createProperties",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Decoration.isDecoration(a))return{type:a.type,data:a.data,anchor:Point.createProperties(a.anchor),focus:Point.createProperties(a.focus),
mark:Mark.create(a.mark)};if(isPlainObject(a)){var p={};"type"in a&&(p.type=a.type);"data"in a&&(p.data=Data.create(a.data));"anchor"in a&&(p.anchor=Point.create(a.anchor));"focus"in a&&(p.focus=Point.create(a.focus));return p}throw Error("`Decoration.createProperties` only accepts objects or decorations, but you passed it: "+a);}},{key:"fromJSON",value:function(object){var anchor=object.anchor,focus=object.focus,type=object.type,data=object.data;object.mark&&!type&&(warning(!1,"As of slate@0.47 the `decoration.mark` property has been changed to `decoration.type` and `decoration.data` directly."),
type=object.mark.type,data=object.mark.data);if(!type)throw Error("Decorations must be created with a `type`, but you passed: "+JSON.stringify(object));return new Decoration({type,data:Data.create(data||{}),anchor:Point.fromJSON(anchor||{}),focus:Point.fromJSON(focus||{})})}}]);return Decoration}(immutable.Record({type:void 0,data:void 0,anchor:void 0,focus:void 0})),Selection$jscomp$0=function(_Record){function Selection(){classCallCheck(this,Selection);return possibleConstructorReturn(this,(Selection.__proto__||
Object.getPrototypeOf(Selection)).apply(this,arguments))}inherits(Selection,_Record);createClass(Selection,[{key:"setIsFocused",value:function(value){return this.set("isFocused",value)}},{key:"setMarks",value:function(marks){return this.set("marks",marks)}},{key:"setProperties",value:function(properties){var _properties=properties=Selection.createProperties(properties);properties=_properties.anchor;var focus=_properties.focus;_properties=objectWithoutProperties(_properties,["anchor","focus"]);properties&&
(_properties.anchor=Point.create(properties));focus&&(_properties.focus=Point.create(focus));return this.merge(_properties)}},{key:"toJSON",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,anchor:this.anchor.toJSON(options),focus:this.focus.toJSON(options),isFocused:this.isFocused,marks:null==this.marks?null:this.marks.toArray().map(function(m){return m.toJSON()})}}},{key:"isBlurred",get:function(){return!this.isFocused}}],[{key:"create",
value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Selection.isSelection(attrs))return attrs;if(Range$jscomp$0.isRange(attrs))return Selection.fromJSON(Range$jscomp$0.createProperties(attrs));if(isPlainObject(attrs))return Selection.fromJSON(attrs);throw Error("`Selection.create` only accepts objects, ranges or selections, but you passed it: "+attrs);}},{key:"createProperties",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Selection.isSelection(a))return{anchor:Point.createProperties(a.anchor),
focus:Point.createProperties(a.focus),isFocused:a.isFocused,marks:a.marks};if(Range$jscomp$0.isRange(a))return{anchor:Point.createProperties(a.anchor),focus:Point.createProperties(a.focus)};if(isPlainObject(a)){var p={};"anchor"in a&&(p.anchor=Point.create(a.anchor));"focus"in a&&(p.focus=Point.create(a.focus));"isFocused"in a&&(p.isFocused=a.isFocused);"marks"in a&&(p.marks=null==a.marks?null:Mark.createSet(a.marks));return p}throw Error("`Selection.createProperties` only accepts objects, ranges or selections, but you passed it: "+
a);}},{key:"fromJSON",value:function(object){var focus=object.focus,_object$isFocused=object.isFocused;_object$isFocused=void 0===_object$isFocused?!1:_object$isFocused;var _object$marks=object.marks;_object$marks=void 0===_object$marks?null:_object$marks;return new Selection({anchor:Point.fromJSON(object.anchor||{}),focus:Point.fromJSON(focus||{}),isFocused:_object$isFocused,marks:null==_object$marks?null:new immutable.Set(_object$marks.map(Mark.fromJSON))})}}]);return Selection}(immutable.Record({anchor:void 0,
focus:void 0,isFocused:void 0,marks:void 0})),TYPES={annotation:"@@__SLATE_ANNOTATION__@@",block:"@@__SLATE_BLOCK__@@",change:"@@__SLATE_CHANGE__@@",decoration:"@@__SLATE_DECORATION__@@",document:"@@__SLATE_DOCUMENT__@@",editor:"@@__SLATE_EDITOR__@@",inline:"@@__SLATE_INLINE__@@",leaf:"@@__SLATE_LEAF__@@",mark:"@@__SLATE_MARK__@@",operation:"@@__SLATE_OPERATION__@@",point:"@@__SLATE_POINT__@@",range:"@@__SLATE_RANGE__@@",selection:"@@__SLATE_SELECTION__@@",text:"@@__SLATE_TEXT__@@",value:"@@__SLATE_VALUE__@@"},
Range$jscomp$0=function(_Record){function Range(){classCallCheck(this,Range);return possibleConstructorReturn(this,(Range.__proto__||Object.getPrototypeOf(Range)).apply(this,arguments))}inherits(Range,_Record);createClass(Range,[{key:"toJSON",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,anchor:this.anchor.toJSON(options),focus:this.focus.toJSON(options)}}}],[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{};if(Range.isRange(attrs))return"range"===attrs.object?attrs:Range.fromJSON(Range.createProperties(attrs));if(isPlainObject(attrs))return Range.fromJSON(attrs);throw Error("`Range.create` only accepts objects or ranges, but you passed it: "+attrs);}},{key:"createList",value:function(){var elements=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(immutable.List.isList(elements)||Array.isArray(elements))return new immutable.List(elements.map(Range.create));throw Error("`Range.createList` only accepts arrays or lists, but you passed it: "+
elements);}},{key:"createProperties",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Range.isRange(a))return{anchor:Point.createProperties(a.anchor),focus:Point.createProperties(a.focus)};if(isPlainObject(a)){var p={};"anchor"in a&&(p.anchor=Point.create(a.anchor));"focus"in a&&(p.focus=Point.create(a.focus));return p}throw Error("`Range.createProperties` only accepts objects, annotations, decorations, ranges or selections, but you passed it: "+a);}},{key:"fromJSON",
value:function(object){var focus=object.focus;return new Range({anchor:Point.fromJSON(object.anchor||{}),focus:Point.fromJSON(focus||{})})}},{key:"isRange",value:function(value){return isObject("range",value)||Decoration.isDecoration(value)||Selection$jscomp$0.isSelection(value)}}]);return Range}(immutable.Record({anchor:void 0,focus:void 0})),Annotation=function(_Record){function Annotation(){classCallCheck(this,Annotation);return possibleConstructorReturn(this,(Annotation.__proto__||Object.getPrototypeOf(Annotation)).apply(this,
arguments))}inherits(Annotation,_Record);createClass(Annotation,[{key:"setProperties",value:function(properties){properties=Annotation.createProperties(properties);return this.merge(properties)}},{key:"toJSON",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,key:this.key,type:this.type,data:this.data.toJSON(),anchor:this.anchor.toJSON(options),focus:this.focus.toJSON(options)}}}],[{key:"create",value:function(){var attrs=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{};if(Annotation.isAnnotation(attrs))return attrs;if(Range$jscomp$0.isRange(attrs))return Annotation.fromJSON(Range$jscomp$0.createProperties(attrs));if(isPlainObject(attrs))return Annotation.fromJSON(attrs);throw Error("`Annotation.create` only accepts objects or annotations, but you passed it: "+attrs);}},{key:"createMap",value:function(){var elements=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(immutable.Map.isMap(elements))return elements;if(isPlainObject(elements)){var obj=
{},key;for(key in elements){var annotation=Annotation.create(elements[key]);obj[key]=annotation}return immutable.Map(obj)}throw Error("`Annotation.createMap` only accepts arrays or lists, but you passed it: "+elements);}},{key:"createProperties",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Annotation.isAnnotation(a))return{key:a.key,type:a.type,data:a.data,anchor:Point.createProperties(a.anchor),focus:Point.createProperties(a.focus)};if(isPlainObject(a)){var p=
{};"key"in a&&(p.key=a.key);"type"in a&&(p.type=a.type);"data"in a&&(p.data=Data.create(a.data));"anchor"in a&&(p.anchor=Point.create(a.anchor));"focus"in a&&(p.focus=Point.create(a.focus));return p}throw Error("`Annotation.createProperties` only accepts objects or annotations, but you passed it: "+a);}},{key:"fromJSON",value:function(object){var key=object.key,type=object.type,data=object.data,anchor=object.anchor,focus=object.focus;if(!key)throw Error("Annotations must be created with a `key`, but you passed: "+
JSON.stringify(object));if(!type)throw Error("Annotations must be created with a `type`, but you passed: "+JSON.stringify(object));return new Annotation({key,type,data:Data.create(data||{}),anchor:Point.fromJSON(anchor||{}),focus:Point.fromJSON(focus||{})})}}]);return Annotation}(immutable.Record({key:void 0,type:void 0,data:void 0,anchor:void 0,focus:void 0})),Document$jscomp$0=function(_Record){function Document(){classCallCheck(this,Document);return possibleConstructorReturn(this,(Document.__proto__||
Object.getPrototypeOf(Document)).apply(this,arguments))}inherits(Document,_Record);createClass(Document,[{key:"toJSON",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},object={object:this.object,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(n){return n.toJSON(options)})};options.preserveKeys&&(object.key=this.key);return object}}],[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Document.isDocument(attrs))return attrs;
if(immutable.List.isList(attrs)||Array.isArray(attrs))attrs={nodes:attrs};if(isPlainObject(attrs))return Document.fromJSON(attrs);throw Error("`Document.create` only accepts objects, arrays, lists or documents, but you passed it: "+attrs);}},{key:"fromJSON",value:function(object){if(Document.isDocument(object))return object;var _object$data=object.data;_object$data=void 0===_object$data?{}:_object$data;var _object$key=object.key;_object$key=void 0===_object$key?KeyUtils.create():_object$key;object=
object.nodes;object=void 0===object?[]:object;return new Document({key:_object$key,data:new immutable.Map(_object$data),nodes:Node$jscomp$0.createList(object)})}}]);return Document}(immutable.Record({data:void 0,key:void 0,nodes:void 0})),Inline=function(_Record){function Inline(){classCallCheck(this,Inline);return possibleConstructorReturn(this,(Inline.__proto__||Object.getPrototypeOf(Inline)).apply(this,arguments))}inherits(Inline,_Record);createClass(Inline,[{key:"toJSON",value:function(){var options=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},object={object:this.object,type:this.type,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(n){return n.toJSON(options)})};options.preserveKeys&&(object.key=this.key);return object}}],[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Inline.isInline(attrs))return attrs;"string"===typeof attrs&&(attrs={type:attrs});if(isPlainObject(attrs))return Inline.fromJSON(attrs);throw Error("`Inline.create` only accepts objects, strings or inlines, but you passed it: "+
attrs);}},{key:"createList",value:function(){var elements=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(immutable.List.isList(elements)||Array.isArray(elements))return new immutable.List(elements.map(Inline.create));throw Error("`Inline.createList` only accepts arrays or lists, but you passed it: "+elements);}},{key:"fromJSON",value:function(object){if(Inline.isInline(object))return object;var _object$data=object.data;_object$data=void 0===_object$data?{}:_object$data;var _object$key=
object.key;_object$key=void 0===_object$key?KeyUtils.create():_object$key;var _object$nodes=object.nodes;_object$nodes=void 0===_object$nodes?[]:_object$nodes;object=object.type;if("string"!==typeof object)throw Error("`Inline.fromJS` requires a `type` string.");return new Inline({key:_object$key,type:object,data:new immutable.Map(_object$data),nodes:Node$jscomp$0.createList(_object$nodes)})}},{key:"isInlineList",value:function(any){return immutable.List.isList(any)&&any.every(function(item){return Inline.isInline(item)})}}]);
return Inline}(immutable.Record({data:void 0,key:void 0,nodes:void 0,type:void 0})),Leaf=immutable.Record({text:void 0,marks:void 0,annotations:void 0,decorations:void 0}),Text$jscomp$0=function(_Record){function Text(){classCallCheck(this,Text);return possibleConstructorReturn(this,(Text.__proto__||Object.getPrototypeOf(Text)).apply(this,arguments))}inherits(Text,_Record);createClass(Text,[{key:"addMark",value:function(mark){mark=Mark.create(mark);mark=this.marks.add(mark);return this.set("marks",
mark)}},{key:"addMarks",value:function(marks){marks=Mark.createSet(marks);return this.set("marks",this.marks.union(marks))}},{key:"getLeaves",value:function(annotations,decorations){var leaves=[{text:this.text,marks:this.marks,annotations:[],decorations:[]}],split=function(leaf,at){return[{text:leaf.text.slice(0,at),marks:leaf.marks,annotations:[].concat(toConsumableArray(leaf.annotations)),decorations:[].concat(toConsumableArray(leaf.decorations))},{text:leaf.text.slice(at),marks:leaf.marks,annotations:[].concat(toConsumableArray(leaf.annotations)),
decorations:[].concat(toConsumableArray(leaf.decorations))}]},compile=function(kind){var formats="annotations"===kind?annotations.values():decorations,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=formats[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var format=_step.value,start=format.start,end=format.end;formats=[];var o=0,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=
void 0;try{for(var _iterator2=leaves[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var leaf=_step2.value,length=leaf.text.length,offset=o;o+=length;if(start.offset<=offset&&end.offset>=offset+length)leaf[kind].push(format),formats.push(leaf);else if(start.offset>offset+length||end.offset<offset||end.offset===offset&&0!==offset)formats.push(leaf);else{var middle=leaf,before=void 0,after=void 0;if(end.offset<offset+length){var _split=
split(middle,end.offset-offset),_split2=slicedToArray(_split,2);middle=_split2[0];after=_split2[1]}if(start.offset>offset){var _split3=split(middle,start.offset-offset),_split4=slicedToArray(_split3,2);before=_split4[0];middle=_split4[1]}middle[kind].push(format);before&&formats.push(before);formats.push(middle);after&&formats.push(after)}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2;
}}leaves=formats}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError;}}};compile("annotations");compile("decorations");leaves=leaves.map(function(leaf){return new Leaf(_extends({},leaf,{annotations:immutable.List(leaf.annotations),decorations:immutable.List(leaf.decorations)}))});return immutable.List(leaves)}},{key:"insertText",value:function(index,string){var text=this.text;
index=text.slice(0,index)+string+text.slice(index);return this.set("text",index)}},{key:"removeMark",value:function(mark){mark=Mark.create(mark);mark=this.marks.remove(mark);return this.set("marks",mark)}},{key:"removeText",value:function(index,length){var text=this.text;index=text.slice(0,index)+text.slice(index+length);return this.set("text",index)}},{key:"toJSON",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},object={object:this.object,text:this.text,marks:this.marks.toArray().map(function(m){return m.toJSON()})};
options.preserveKeys&&(object.key=this.key);return object}},{key:"setMark",value:function(properties,newProperties){var marks=this.marks;properties=Mark.create(properties);newProperties=properties.merge(newProperties);marks=marks.remove(properties).add(newProperties);return this.set("marks",marks)}},{key:"splitText",value:function(index){var text=this.text,one=this.set("text",text.slice(0,index));index=this.set("text",text.slice(index)).regenerateKey();return[one,index]}},{key:"mergeText",value:function(other){return this.set("text",
this.text+other.text)}}],[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(Text.isText(attrs))return attrs;"string"===typeof attrs&&(attrs={text:attrs});if(isPlainObject(attrs))return Text.fromJSON(attrs);throw Error("`Text.create` only accepts objects, arrays, strings or texts, but you passed it: "+attrs);}},{key:"createList",value:function(){var elements=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(immutable.List.isList(elements)||
Array.isArray(elements))return new immutable.List(elements.map(Text.create));throw Error("`Text.createList` only accepts arrays or lists, but you passed it: "+elements);}},{key:"fromJSON",value:function(object){if(Text.isText(object))return object;invariant(null==object.leaves,"As of slate@0.46, the `leaves` property of text nodes has been removed! Each individual leaf should be created as a text node instead.");var _object$text=object.text;_object$text=void 0===_object$text?"":_object$text;var _object$marks=
object.marks;_object$marks=void 0===_object$marks?[]:_object$marks;object=object.key;object=void 0===object?KeyUtils.create():object;return new Text({key:object,text:_object$text,marks:Mark.createSet(_object$marks)})}},{key:"isTextList",value:function(any){return immutable.List.isList(any)&&any.every(function(item){return Text.isText(item)})}}]);return Text}(immutable.Record({key:void 0,marks:void 0,text:void 0})),Node$jscomp$0=function(){function Node(){classCallCheck(this,Node)}createClass(Node,
null,[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Node.isNode(attrs))return attrs;if(isPlainObject(attrs)){var object=attrs.object;!object&&attrs.kind&&(warning(!1,"As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`."),object=attrs.kind);switch(object){case "block":return Block.create(attrs);case "document":return Document$jscomp$0.create(attrs);case "inline":return Inline.create(attrs);case "text":return Text$jscomp$0.create(attrs);
default:throw Error("`Node.create` requires a `object` string.");}}throw Error("`Node.create` only accepts objects or nodes but you passed it: "+attrs);}},{key:"createList",value:function(){var elements=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(immutable.List.isList(elements)||Array.isArray(elements)){var array=[];elements.forEach(function(el){el&&"text"===el.object&&el.leaves&&Array.isArray(el.leaves)?(warning(!1,"As of slate@0.46, the `leaves` property of Text nodes has been removed. Instead, each text node contains a string of text and a unique set of marks and leaves are unnecessary."),
el=Text$jscomp$0.createList(el.leaves).toArray(),array=array.concat(el)):(el=Node.create(el),array.push(el))});return immutable.List(array)}throw Error("`Node.createList` only accepts lists or arrays, but you passed it: "+elements);}},{key:"createProperties",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Block.isBlock(attrs)||Inline.isInline(attrs))return{data:attrs.data,type:attrs.type};if("string"===typeof attrs)return{type:attrs};if(isPlainObject(attrs)){var props=
{};"type"in attrs&&(props.type=attrs.type);"data"in attrs&&(props.data=Data.create(attrs.data));return props}throw Error("`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: "+attrs);}},{key:"fromJSON",value:function(value){var object=value.object;!object&&value.kind&&(warning(!1,"As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`."),object=value.kind);switch(object){case "block":return Block.fromJSON(value);case "document":return Document$jscomp$0.fromJSON(value);
case "inline":return Inline.fromJSON(value);case "text":return Text$jscomp$0.fromJSON(value);default:throw Error("`Node.fromJSON` requires an `object` of either 'block', 'document', 'inline' or 'text', but you passed: "+value);}}},{key:"isNode",value:function(any){return Block.isBlock(any)||Document$jscomp$0.isDocument(any)||Inline.isInline(any)||Text$jscomp$0.isText(any)}},{key:"isNodeList",value:function(any){return immutable.List.isList(any)&&any.every(function(item){return Node.isNode(item)})}}]);
return Node}(),Block=function(_Record){function Block(){classCallCheck(this,Block);return possibleConstructorReturn(this,(Block.__proto__||Object.getPrototypeOf(Block)).apply(this,arguments))}inherits(Block,_Record);createClass(Block,[{key:"toJSON",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},object={object:this.object,type:this.type,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(n){return n.toJSON(options)})};options.preserveKeys&&(object.key=
this.key);return object}}],[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Block.isBlock(attrs))return attrs;"string"===typeof attrs&&(attrs={type:attrs});if(isPlainObject(attrs))return Block.fromJSON(attrs);throw Error("`Block.create` only accepts objects, strings or blocks, but you passed it: "+attrs);}},{key:"createList",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(immutable.List.isList(attrs)||Array.isArray(attrs))return new immutable.List(attrs.map(Block.create));
throw Error("`Block.createList` only accepts arrays or lists, but you passed it: "+attrs);}},{key:"fromJSON",value:function(object){if(Block.isBlock(object))return object;var _object$data=object.data;_object$data=void 0===_object$data?{}:_object$data;var _object$key=object.key;_object$key=void 0===_object$key?KeyUtils.create():_object$key;var _object$nodes=object.nodes;_object$nodes=void 0===_object$nodes?[]:_object$nodes;object=object.type;if("string"!==typeof object)throw Error("`Block.fromJSON` requires a `type` string.");
return new Block({key:_object$key,type:object,data:immutable.Map(_object$data),nodes:Node$jscomp$0.createList(_object$nodes)})}},{key:"isBlockList",value:function(any){return immutable.List.isList(any)&&any.every(function(item){return Block.isBlock(item)})}}]);return Block}(immutable.Record({data:void 0,key:void 0,nodes:void 0,type:void 0})),Value=function(_Record){function Value(){classCallCheck(this,Value);return possibleConstructorReturn(this,(Value.__proto__||Object.getPrototypeOf(Value)).apply(this,
arguments))}inherits(Value,_Record);createClass(Value,[{key:"addAnnotation",value:function(annotation){annotation=Annotation.create(annotation);var value=this,_value=value,annotations=_value.annotations,document=_value.document;_value=annotation.key;annotation=annotation.updatePoints(function(point){return point.normalize(document)});annotations=annotations.set(_value,annotation);return value=value.set("annotations",annotations)}},{key:"addMark",value:function(path,mark){mark=Mark.create(mark);var value=
this,document=value.document;document=document.addMark(path,mark);return value=value.set("document",document)}},{key:"insertNode",value:function(path,node){var value=this,document=value.document;document=document.insertNode(path,node);value=value.set("document",document);return value=value.mapRanges(function(range){return range.updatePoints(function(point){return point.setPath(null)})})}},{key:"insertText",value:function(path,offset,text){var value=this,document=value.document,node=document.assertNode(path);
document=document.insertText(path,offset,text);node=document.assertNode(path);value=value.set("document",document);return value=value.mapPoints(function(point){return point.key===node.key&&point.offset>=offset?point.setOffset(point.offset+text.length):point})}},{key:"mergeNode",value:function(path){var value=this,document=value.document,newDocument=document.mergeNode(path);path=document.resolvePath(path);var withPath=PathUtils.decrement(path),one=document.getNode(withPath),two=document.getNode(path);
value=value.set("document",newDocument);return value=value.mapRanges(function(range){if("text"===two.object){var max=one.text.length;range.anchor.key===two.key&&(range=range.moveAnchorTo(one.key,max+range.anchor.offset));range.focus.key===two.key&&(range=range.moveFocusTo(one.key,max+range.focus.offset))}return range=range.updatePoints(function(point){return point.setPath(null)})})}},{key:"moveNode",value:function(path,newPath){var newIndex=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,
value=this,document=value.document;if(PathUtils.isEqual(path,newPath))return value;document=document.moveNode(path,newPath,newIndex);value=value.set("document",document);return value=value.mapPoints(function(point){return point.setPath(null)})}},{key:"removeAnnotation",value:function(annotation){annotation=Annotation.create(annotation);var value=this,annotations=value.annotations;annotations=annotations.delete(annotation.key);return value=value.set("annotations",annotations)}},{key:"removeMark",value:function(path,
mark){mark=Mark.create(mark);var value=this,document=value.document;document=document.removeMark(path,mark);return value=value.set("document",document)}},{key:"removeNode",value:function(path){var value=this,document=value.document,node=document.assertNode(path),first="text"===node.object?node:node.getFirstText()||node,last="text"===node.object?node:node.getLastText()||node,prev=document.getPreviousText(first.key),next=document.getNextText(last.key);document=document.removeNode(path);value=value.set("document",
document);return value=value.mapRanges(function(range){var _range=range,focus=_range.focus;node.hasNode(_range.anchor.key)&&(range=prev?range.moveAnchorTo(prev.key,prev.text.length):next?range.moveAnchorTo(next.key,0):range.unset());node.hasNode(focus.key)&&(range=prev?range.moveFocusTo(prev.key,prev.text.length):next?range.moveFocusTo(next.key,0):range.unset());return range=range.updatePoints(function(point){return point.setPath(null)})})}},{key:"removeText",value:function(path,offset,text){var value=
this,document=value.document,node=document.assertNode(path);document=document.removeText(path,offset,text);value=value.set("document",document);var length=text.length,end=offset+length;return value=value.mapPoints(function(point){return point.key!==node.key?point:point.offset>=end?point.setOffset(point.offset-length):point.offset>offset?point.setOffset(offset):point})}},{key:"setAnnotation",value:function(properties,newProperties){newProperties=Annotation.createProperties(newProperties);properties=
Annotation.create(properties);newProperties=properties.merge(newProperties);var value=this,annotations=value.annotations;annotations=annotations.set(properties.key,newProperties);return value=value.set("annotations",annotations)}},{key:"setNode",value:function(path,properties){var value=this,document=value.document;document=document.setNode(path,properties);return value=value.set("document",document)}},{key:"setMark",value:function(path,mark,properties){var value=this,document=value.document;document=
document.setMark(path,mark,properties);return value=value.set("document",document)}},{key:"setProperties",value:function(properties){var value=this,document=value.document,data=properties.data;properties=properties.annotations;var props={};data&&(props.data=data);properties&&(props.annotations=properties.map(function(a){return a.isSet?a:document.resolveAnnotation(a)}));return value=value.merge(props)}},{key:"setSelection",value:function(properties){var value=this,_value15=value,document=_value15.document;
_value15=_value15.selection;properties=_value15.setProperties(properties);_value15=document.resolveSelection(properties);return value=value.set("selection",_value15)}},{key:"splitNode",value:function(path,position,properties){var value=this,document=value.document,newDocument=document.splitNode(path,position,properties),node=document.assertNode(path);value=value.set("document",newDocument);return value=value.mapRanges(function(range){var next=newDocument.getNextText(node.key),_range2=range,anchor=
_range2.anchor;_range2=_range2.focus;node.key===anchor.key&&position<=anchor.offset&&(range=range.moveAnchorTo(next.key,anchor.offset-position));node.key===_range2.key&&position<=_range2.offset&&(range=range.moveFocusTo(next.key,_range2.offset-position));return range=range.updatePoints(function(point){return point.setPath(null)})})}},{key:"mapRanges",value:function(iterator){var value=this,_value17=value,document=_value17.document,selection=_value17.selection;_value17=_value17.annotations;var sel=
selection.isSet?iterator(selection):selection;sel||(sel=selection.unset());sel!==selection&&(sel=document.createSelection(sel));value=value.set("selection",sel);selection=_value17.map(function(annotation){var n=annotation.isSet?iterator(annotation):annotation;n&&n!==annotation&&(n=document.createAnnotation(n));return n});selection=selection.filter(function(annotation){return!!annotation});return value=value.set("annotations",selection)}},{key:"mapPoints",value:function(iterator){return this.mapRanges(function(range){return range.updatePoints(iterator)})}},
{key:"toJSON",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},object={object:this.object,document:this.document.toJSON(options)};options.preserveData&&(object.data=this.data.toJSON(options));options.preserveAnnotations&&(object.annotations=this.annotations.map(function(a){return a.toJSON(options)}).toObject());options.preserveSelection&&(object.selection=this.selection.toJSON(options));return object}},{key:"change",value:function(){invariant(!1,"As of Slate 0.42.0, value object are no longer schema-aware, and the `value.change()` method is no longer available. Use the `editor.change()` method on the new `Editor` controller instead.")}},
{key:"startBlock",get:function(){return this.selection.start.key&&this.document.getClosestBlock(this.selection.start.key)}},{key:"endBlock",get:function(){return this.selection.end.key&&this.document.getClosestBlock(this.selection.end.key)}},{key:"anchorBlock",get:function(){return this.selection.anchor.key&&this.document.getClosestBlock(this.selection.anchor.key)}},{key:"focusBlock",get:function(){return this.selection.focus.key&&this.document.getClosestBlock(this.selection.focus.key)}},{key:"startInline",
get:function(){return this.selection.start.key&&this.document.getClosestInline(this.selection.start.key)}},{key:"endInline",get:function(){return this.selection.end.key&&this.document.getClosestInline(this.selection.end.key)}},{key:"anchorInline",get:function(){return this.selection.anchor.key&&this.document.getClosestInline(this.selection.anchor.key)}},{key:"focusInline",get:function(){return this.selection.focus.key&&this.document.getClosestInline(this.selection.focus.key)}},{key:"startText",get:function(){return this.selection.start.key&&
this.document.getDescendant(this.selection.start.key)}},{key:"endText",get:function(){return this.selection.end.key&&this.document.getDescendant(this.selection.end.key)}},{key:"anchorText",get:function(){return this.selection.anchor.key&&this.document.getDescendant(this.selection.anchor.key)}},{key:"focusText",get:function(){return this.selection.focus.key&&this.document.getDescendant(this.selection.focus.key)}},{key:"nextBlock",get:function(){return this.selection.end.key&&this.document.getNextBlock(this.selection.end.key)}},
{key:"previousBlock",get:function(){return this.selection.start.key&&this.document.getPreviousBlock(this.selection.start.key)}},{key:"nextInline",get:function(){return this.selection.end.key&&this.document.getNextInline(this.selection.end.key)}},{key:"previousInline",get:function(){return this.selection.start.key&&this.document.getPreviousInline(this.selection.start.key)}},{key:"nextText",get:function(){return this.selection.end.key&&this.document.getNextText(this.selection.end.key)}},{key:"previousText",
get:function(){return this.selection.start.key&&this.document.getPreviousText(this.selection.start.key)}},{key:"marks",get:function(){return this.selection.isUnset?new immutable.Set:this.selection.marks||this.document.getMarksAtRange(this.selection)}},{key:"activeMarks",get:function(){return this.selection.isUnset?new immutable.Set:this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}},{key:"blocks",get:function(){return this.selection.isUnset?new immutable.List:this.document.getLeafBlocksAtRange(this.selection)}},
{key:"fragment",get:function(){return this.selection.isUnset?Document$jscomp$0.create():this.document.getFragmentAtRange(this.selection)}},{key:"inlines",get:function(){return this.selection.isUnset?new immutable.List:this.document.getLeafInlinesAtRange(this.selection)}},{key:"texts",get:function(){return this.selection.isUnset?new immutable.List:this.document.getTextsAtRange(this.selection)}},{key:"history",get:function(){invariant(!1,"As of Slate 0.42.0, the `value.history` model no longer exists, and the history is stored in `value.data` instead using plugins.")}}],
[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(Value.isValue(attrs))return attrs;if(isPlainObject(attrs))return Value.fromJSON(attrs,options);throw Error("`Value.create` only accepts objects or values, but you passed it: "+attrs);}},{key:"createProperties",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Value.isValue(a))return{annotations:a.annotations,
data:a.data};if(isPlainObject(a)){var p={};"annotations"in a&&(p.annotations=Annotation.createMap(a.annotations));"data"in a&&(p.data=Data.create(a.data));return p}throw Error("`Value.createProperties` only accepts objects or values, but you passed it: "+a);}},{key:"fromJSON",value:function(object){var _object$data=object.data;_object$data=void 0===_object$data?{}:_object$data;var _object$annotations=object.annotations;_object$annotations=void 0===_object$annotations?{}:_object$annotations;var _object$document=
object.document;_object$document=void 0===_object$document?{}:_object$document;object=object.selection;object=void 0===object?{}:object;_object$data=Data.fromJSON(_object$data);_object$document=Document$jscomp$0.fromJSON(_object$document);object=_object$document.createSelection(object);_object$annotations=Annotation.createMap(_object$annotations);if(object.isUnset){var text=_object$document.getFirstText();text&&(object=object.moveToStartOfNode(text));object=_object$document.createSelection(object)}return new Value({annotations:_object$annotations,
data:_object$data,document:_object$document,selection:object})}}]);return Value}(immutable.Record({annotations:void 0,data:void 0,document:void 0,selection:void 0})),debug=Debug("slate:operation:apply"),debug$1=Debug("slate:operation:invert"),OPERATION_ATTRIBUTES={add_mark:["path","mark","data"],add_annotation:["annotation","data"],insert_node:["path","node","data"],insert_text:["path","offset","text","data"],merge_node:["path","position","properties","target","data"],move_node:["path","newPath",
"data"],remove_annotation:["annotation","data"],remove_mark:["path","mark","data"],remove_node:["path","node","data"],remove_text:["path","offset","text","data"],set_annotation:["properties","newProperties","data"],set_mark:["path","properties","newProperties","data"],set_node:["path","properties","newProperties","data"],set_selection:["properties","newProperties","data"],set_value:["properties","newProperties","data"],split_node:["path","position","properties","target","data"]},Operation=function(_Record){function Operation(){classCallCheck(this,
Operation);return possibleConstructorReturn(this,(Operation.__proto__||Object.getPrototypeOf(Operation)).apply(this,arguments))}inherits(Operation,_Record);createClass(Operation,[{key:"apply",value:function(value){return applyOperation(value,this)}},{key:"invert",value:function(){return invertOperation(this)}},{key:"toJSON",value:function(){var type=this.type,json={object:this.object,type},ATTRIBUTES=OPERATION_ATTRIBUTES[type],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;
try{for(var _iterator=ATTRIBUTES[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value,value=this[key];if("annotation"===key||"mark"===key||"marks"===key||"node"===key||"path"===key||"newPath"===key)value=value.toJSON();"properties"===key&&"merge_node"===type&&(ATTRIBUTES={},"data"in value&&(ATTRIBUTES.data=value.data.toJS()),"type"in value&&(ATTRIBUTES.type=value.type),value=ATTRIBUTES);"properties"!==key&&"newProperties"!==
key||"set_annotation"!==type||(ATTRIBUTES={},"anchor"in value&&(ATTRIBUTES.anchor=value.anchor.toJS()),"focus"in value&&(ATTRIBUTES.focus=value.focus.toJS()),"key"in value&&(ATTRIBUTES.key=value.key),"data"in value&&(ATTRIBUTES.data=value.data.toJS()),"type"in value&&(ATTRIBUTES.type=value.type),value=ATTRIBUTES);"properties"!==key&&"newProperties"!==key||"set_mark"!==type||(ATTRIBUTES={},"data"in value&&(ATTRIBUTES.data=value.data.toJS()),"type"in value&&(ATTRIBUTES.type=value.type),value=ATTRIBUTES);
"properties"!==key&&"newProperties"!==key||"set_node"!==type||(ATTRIBUTES={},"data"in value&&(ATTRIBUTES.data=value.data.toJS()),"type"in value&&(ATTRIBUTES.type=value.type),value=ATTRIBUTES);"properties"!==key&&"newProperties"!==key||"set_selection"!==type||(ATTRIBUTES={},"anchor"in value&&(ATTRIBUTES.anchor=value.anchor.toJSON()),"focus"in value&&(ATTRIBUTES.focus=value.focus.toJSON()),"isFocused"in value&&(ATTRIBUTES.isFocused=value.isFocused),"marks"in value&&(ATTRIBUTES.marks=value.marks&&value.marks.toJSON()),
value=ATTRIBUTES);"properties"!==key&&"newProperties"!==key||"set_value"!==type||(ATTRIBUTES={},"data"in value&&(ATTRIBUTES.data=value.data.toJS()),value=ATTRIBUTES);"properties"===key&&"split_node"===type&&(ATTRIBUTES={},"data"in value&&(ATTRIBUTES.data=value.data.toJS()),"type"in value&&(ATTRIBUTES.type=value.type),value=ATTRIBUTES);"data"===key&&(value=value.toJSON());json[key]=value}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError;
}}return json}}],[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Operation.isOperation(attrs))return attrs;if(isPlainObject(attrs))return Operation.fromJSON(attrs);throw Error("`Operation.create` only accepts objects or operations, but you passed it: "+attrs);}},{key:"createList",value:function(){var elements=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(immutable.List.isList(elements)||Array.isArray(elements))return new immutable.List(elements.map(Operation.create));
throw Error("`Operation.createList` only accepts arrays or lists, but you passed it: "+elements);}},{key:"fromJSON",value:function(object){if(Operation.isOperation(object))return object;var type=object.type,ATTRIBUTES=OPERATION_ATTRIBUTES[type],attrs={type};if(!ATTRIBUTES)throw Error('`Operation.fromJSON` was passed an unrecognized operation type: "'+type+'"');var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=ATTRIBUTES[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=
(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value,v=object[key];"data"===key&&void 0===v&&(v={});if(void 0===v)throw Error('`Operation.fromJSON` was passed a "'+type+'" operation without the required "'+key+'" attribute.');"annotation"===key&&(v=Annotation.create(v));if("path"===key||"newPath"===key)v=PathUtils.create(v);"mark"===key&&(v=Mark.create(v));"node"===key&&(v=Node$jscomp$0.create(v));"properties"!==key&&"newProperties"!==key||"set_annotation"!==type||
(v=Annotation.createProperties(v));"properties"!==key&&"newProperties"!==key||"set_mark"!==type||(v=Mark.createProperties(v));"properties"!==key&&"newProperties"!==key||"set_node"!==type&&"merge_node"!==type&&"split_node"!==type||(v=Node$jscomp$0.createProperties(v));"properties"!==key&&"newProperties"!==key||"set_selection"!==type||(v=Selection$jscomp$0.createProperties(v));"properties"!==key&&"newProperties"!==key||"set_value"!==type||(v=Value.createProperties(v));"data"===key&&(v=immutable.Map(v));
attrs[key]=v}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2;}}return new Operation(attrs)}},{key:"isOperationList",value:function(any){return immutable.List.isList(any)&&any.every(function(item){return Operation.isOperation(item)})}}]);return Operation}(immutable.Record({annotation:void 0,data:void 0,length:void 0,mark:void 0,marks:void 0,newPath:void 0,newProperties:void 0,
node:void 0,offset:void 0,path:void 0,position:void 0,properties:void 0,target:void 0,text:void 0,type:void 0})),Change=function(_Record){function Change(){classCallCheck(this,Change);return possibleConstructorReturn(this,(Change.__proto__||Object.getPrototypeOf(Change)).apply(this,arguments))}inherits(Change,_Record);createClass(Change,[{key:"toJSON",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,value:this.value.toJSON(options),operations:this.operations.toArray().map(function(o){return o.toJSON(options)})}}}],
[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(Change.isChange(attrs))return attrs;if(isPlainObject(attrs))return Change.fromJSON(attrs);throw Error("`Change.create` only accepts objects or changes, but you passed it: "+attrs);}},{key:"fromJSON",value:function(object){var _object$operations=object.operations;_object$operations=void 0===_object$operations?[]:_object$operations;return new Change({value:Value.create(object.value),operations:Operation.createList(_object$operations)})}}]);
return Change}(immutable.Record({operations:void 0,value:void 0})),SPACE=/\s/,CHAMELEON=/['\u2018\u2019]/,PUNCTUATION=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,
TextUtils={getCharLength,getCharOffset,getCharOffsetBackward:function(text,offset){var chars=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;text=text.slice(0,offset);text=esrever.reverse(text);return getCharOffset(text,chars)},getCharOffsetForward:function(text,offset){var chars=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;text=text.slice(offset);return getCharOffset(text,chars,!0)},getWordOffset,getWordOffsetBackward:function(text,offset){text=text.slice(0,offset);text=esrever.reverse(text);
return getWordOffset(text)},getWordOffsetForward:function(text,offset){text=text.slice(offset);return getWordOffset(text)},isSurrogate,isWord},Commands$1={addMarkAtRange:function(editor,range,mark){if(!range.isCollapsed){var start=range.start,end=range.end,texts=editor.value.document.getTextsAtRange(range);editor.withoutNormalizing(function(){texts.forEach(function(node){var key=node.key,index=0;node=node.text.length;key===start.key&&(index=start.offset);key===end.key&&(node=end.offset);key===start.key&&
key===end.key&&(node=end.offset-start.offset);editor.addMarkByKey(key,index,node,mark)})})}},addMarksAtRange:function(editor,range,marks){marks.forEach(function(mark){return editor.addMarkAtRange(range,mark)})},deleteAtRange:function(editor,range){editor.snapshotSelection();var start=range.start;range=range.end;var startKey=start.key,startOffset=start.offset,endKey=range.key,endOffset=range.offset,document=editor.value.document,isStartVoid=document.hasVoidParent(startKey,editor),isEndVoid=document.hasVoidParent(endKey,
editor),startBlock=document.getClosestBlock(startKey),endBlock=document.getClosestBlock(endKey),isHanging=0===startOffset&&0===endOffset&&!1===isStartVoid&&startKey===startBlock.getFirstText().key&&endKey===endBlock.getFirstText().key&&startKey!==endKey;isHanging&&isEndVoid&&(start=document.getPreviousText(endKey),endKey=start.key,endOffset=start.text.length,isEndVoid=document.hasVoidParent(endKey,editor));editor.withoutNormalizing(function(){for(;isStartVoid;){var startVoid=document.getClosestVoid(startKey,
editor),nextText=document.getNextText(startKey);editor.removeNodeByKey(startVoid.key);if(startKey===endKey||!nextText)return;document=editor.value.document;startKey=nextText.key;startOffset=0;isStartVoid=document.hasVoidParent(startKey,editor)}for(;isEndVoid;)startVoid=document.getClosestVoid(endKey,editor),nextText=document.getPreviousText(endKey),editor.removeNodeByKey(startVoid.key),document=editor.value.document,endKey=nextText.key,endOffset=nextText.text.length,isEndVoid=document.hasVoidParent(endKey,
editor);if(startKey===endKey&&isHanging)editor.removeNodeByKey(startBlock.key);else if(startKey===endKey)editor.removeTextByKey(startKey,startOffset,endOffset-startOffset);else{startBlock=document.getClosestBlock(startKey);endBlock=document.getClosestBlock(endKey);var startText=document.getNode(startKey),endText=document.getNode(endKey),startLength=startText.text.length-startOffset,endLength=endOffset,ancestor=document.getCommonAncestor(startKey,endKey),startChild=ancestor.getFurthestChild(startKey),
endChild=ancestor.getFurthestChild(endKey);startVoid=document.getParent(startBlock.key);nextText=startVoid.nodes.indexOf(startBlock);var endParentIndex=startVoid.nodes.indexOf(endBlock),child=void 0;for(child=startText;child.key!==startChild.key;)startText=document.getParent(child.key),child=startText.nodes.indexOf(child),startText.nodes.slice(child+1).reverse().forEach(function(node){editor.removeNodeByKey(node.key)}),child=startText;startChild=ancestor.nodes.indexOf(startChild);child=ancestor.nodes.indexOf(endChild);
ancestor.nodes.slice(startChild+1,child).reverse().forEach(function(node){editor.removeNodeByKey(node.key)});for(child=endText;child.key!==endChild.key;)endText=document.getParent(child.key),ancestor=endText.nodes.indexOf(child),endText.nodes.slice(0,ancestor).reverse().forEach(function(node){editor.removeNodeByKey(node.key)}),child=endText;0!==startLength&&editor.removeTextByKey(startKey,startOffset,startLength);0!==endLength&&editor.removeTextByKey(endKey,0,endOffset);if(startBlock.key!==endBlock.key){document=
editor.value.document;startLength=void 0;endLength=!0;endChild=!1;endText=void 0;try{for(var _iterator=document.ancestors(endBlock.key)[Symbol.iterator](),_step;!(endLength=(_step=_iterator.next()).done);endLength=!0){var node$jscomp$0=slicedToArray(_step.value,1)[0];if(1<node$jscomp$0.nodes.size)break;else startLength=node$jscomp$0}}catch(err){endChild=!0,endText=err}finally{try{!endLength&&_iterator.return&&_iterator.return()}finally{if(endChild)throw endText;}}endParentIndex!==nextText+1&&editor.moveNodeByKey(endBlock.key,
startVoid.key,nextText+1);isHanging?editor.removeNodeByKey(startBlock.key):editor.mergeNodeByKey(endBlock.key);startLength&&editor.removeNodeByKey(startLength.key)}}})},deleteBackwardAtRange:function(editor,range){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){var document=editor.value.document,_range2=range,start=_range2.start;_range2=_range2.focus;if(range.isExpanded)editor.deleteAtRange(range);else{var voidParent=document.getClosestVoid(start.path,editor);if(voidParent)editor.removeNodeByKey(voidParent.key);
else if(!start.isAtStartOfNode(document))if(voidParent=document.getClosestBlock(start.path),1!==document.nodes.size&&voidParent&&""===voidParent.text&&1===voidParent.nodes.size)editor.removeNodeByKey(voidParent.key);else{var text=document.getDescendant(start.path);if(start.isAtStartOfNode(text)){start=document.getPreviousText(text.key);document.getClosestInline(text.key)&&""===start.text&&(start=document.getPreviousText(start.key));var prevBlock=document.getClosestBlock(start.key),prevVoid=document.getClosestVoid(start.key,
editor);if(prevVoid){editor.removeNodeByKey(prevVoid.key);return}if(1===n&&prevBlock!==voidParent){range=range.moveAnchorTo(start.key,start.text.length);editor.deleteAtRange(range);return}}if(n<=_range2.offset)range=range.moveFocusBackward(n);else{voidParent=text;text=0;for(_range2=_range2.offset;n>_range2;)if(voidParent=document.getPreviousText(voidParent.key),_range2+=voidParent.text.length,n<=_range2){text=_range2-n;break}range=range.moveAnchorTo(voidParent.key,text)}editor.deleteAtRange(range)}}}},
deleteCharBackwardAtRange:function(editor,range){if(range.isExpanded)editor.deleteAtRange(range);else{var start=range.start,startBlock=editor.value.document.getClosestBlock(start.path);start=startBlock.getOffset(start.key)+start.offset;startBlock=TextUtils.getCharOffsetBackward(startBlock.text,start);editor.deleteBackwardAtRange(range,startBlock)}},deleteCharForwardAtRange:function(editor,range){if(range.isExpanded)editor.deleteAtRange(range);else{var start=range.start,startBlock=editor.value.document.getClosestBlock(start.path);
start=startBlock.getOffset(start.key)+start.offset;startBlock=TextUtils.getCharOffsetForward(startBlock.text,start);editor.deleteForwardAtRange(range,startBlock)}},deleteForwardAtRange:function(editor,range){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){var document=editor.value.document,_range3=range,start=_range3.start;_range3=_range3.focus;if(range.isExpanded)editor.deleteAtRange(range);else{var voidParent=document.getClosestVoid(start.path,editor);if(voidParent)editor.removeNodeByKey(voidParent.key);
else{var block=document.getClosestBlock(start.path);if(block&&!editor.isVoid(block)&&""===block.text&&1!==document.nodes.size)n=document.getNextBlock(block.key),editor.removeNodeByKey(block.key),n&&n.key&&editor.moveToStartOfNode(n);else if(!start.isAtEndOfNode(document)){voidParent=document.getDescendant(start.path);if(start.isAtEndOfNode(voidParent)){start=document.getNextText(voidParent.key);var _nextBlock=document.getClosestBlock(start.key),nextVoid=document.getClosestVoid(start.key,editor);if(nextVoid){editor.removeNodeByKey(nextVoid.key);
return}if(1===n&&_nextBlock!==block){range=range.moveFocusTo(start.key,0);editor.deleteAtRange(range);return}}if(n<=voidParent.text.length-_range3.offset)range=range.moveFocusForward(n);else{block=voidParent;start=_range3.offset;for(_range3=voidParent.text.length-_range3.offset;n>_range3;)if(block=document.getNextText(block.key),voidParent=_range3+block.text.length,n<=voidParent){start=n-_range3;break}else _range3=voidParent;range=range.moveFocusTo(block.key,start)}editor.deleteAtRange(range)}}}}},
deleteLineBackwardAtRange:function(editor,range){if(range.isExpanded)editor.deleteAtRange(range);else{var start=range.start;start=editor.value.document.getClosestBlock(start.path).getOffset(start.key)+start.offset;editor.deleteBackwardAtRange(range,start)}},deleteLineForwardAtRange:function(editor,range){if(range.isExpanded)editor.deleteAtRange(range);else{var start=range.start,startBlock=editor.value.document.getClosestBlock(start.path);start=startBlock.getOffset(start.key)+start.offset;editor.deleteForwardAtRange(range,
startBlock.text.length-start)}},deleteWordBackwardAtRange:function(editor,range){if(range.isExpanded)editor.deleteAtRange(range);else{var start=range.start,startBlock=editor.value.document.getClosestBlock(start.path);start=startBlock.getOffset(start.key)+start.offset;startBlock=startBlock.text;startBlock=0===start?1:TextUtils.getWordOffsetBackward(startBlock,start);editor.deleteBackwardAtRange(range,startBlock)}},deleteWordForwardAtRange:function(editor,range){if(range.isExpanded)editor.deleteAtRange(range);
else{var start=range.start,startBlock=editor.value.document.getClosestBlock(start.path);start=startBlock.getOffset(start.key)+start.offset;startBlock=TextUtils.getWordOffsetForward(startBlock.text,start);editor.deleteForwardAtRange(range,0===startBlock?1:startBlock)}},insertBlockAtRange:function(editor,range,block){range=deleteExpandedAtRange(editor,range);block=Block.create(block);var document=editor.value.document,start=range.start,startKey=start.key,startOffset=start.offset,startBlock=document.getClosestBlock(startKey),
startInline=document.getClosestInline(startKey),parent=document.getParent(startBlock.key),index=parent.nodes.indexOf(startBlock),insertionMode=getInsertionMode(editor,range);"before"===insertionMode?editor.insertNodeByKey(parent.key,index,block):"behind"===insertionMode?editor.insertNodeByKey(parent.key,index+1,block):(startInline&&editor.isVoid(startInline)&&(document=(start=start.isAtEndOfNode(startInline))?document.getNextText(startKey):document.getPreviousText(startKey),range=start?range.moveToStartOfNode(document):
range.moveToEndOfNode(document),startKey=range.start.key,startOffset=range.start.offset),editor.withoutNormalizing(function(){editor.splitDescendantsByKey(startBlock.key,startKey,startOffset);editor.insertNodeByKey(parent.key,index+1,block)}))}},getInsertionMode=function(editor,range){var document=editor.value.document;range=range.start;var startKey=range.key,startBlock=document.getClosestBlock(startKey);document=document.getClosestInline(startKey);if(editor.isVoid(startBlock))return range.isAtEndOfNode(startBlock)?
"behind":"before";if(document||""!==startBlock.text){if(range.isAtStartOfNode(startBlock))return"before";if(range.isAtEndOfNode(startBlock))return"behind"}else return"behind";return"split"};Commands$1.insertFragmentAtRange=function(editor,range,fragment){editor.withoutNormalizing(function(){range=deleteExpandedAtRange(editor,range);if(fragment.nodes.size){fragment=fragment.mapDescendants(function(child){return child.regenerateKey()});var start=range.start,document=editor.value.document,startText=
document.getDescendant(start.path),startBlock=document.getClosestBlock(startText.key),startChild=startBlock.getFurthestChild(startText.key),isAtStart=start.isAtStartOfNode(startBlock),parent=document.getParent(startBlock.key),index=parent.nodes.indexOf(startBlock),blocks=fragment.getBlocks();startText=fragment.nodes.first();var lastChild=fragment.nodes.last(),firstBlock=blocks.first(),lastBlock=blocks.last();document=findInsertionNode(fragment,document,startBlock.key);if(firstBlock===lastBlock&&editor.isVoid(firstBlock))editor.insertBlockAtRange(range,
firstBlock);else if(document===fragment&&(startText.hasBlockChildren()||lastChild.hasBlockChildren()))("before"===getInsertionMode(editor,range)?fragment.nodes:fragment.nodes.reverse()).forEach(function(node){editor.insertBlockAtRange(range,node)});else{if(firstBlock!==lastBlock){startText=document.getFurthest(firstBlock.key,function(p){return 1===p.nodes.size})||firstBlock;var startIndex=parent.nodes.indexOf(startBlock);document.removeNode(startText.key).nodes.forEach(function(node,i){editor.insertNodeByKey(parent.key,
startIndex+i+1,node)})}0!==start.offset&&editor.splitDescendantsByKey(startChild.key,start.key,start.offset);document=editor.value.document;startText=document.getDescendant(start.key);startBlock=document.getClosestBlock(start.key);startChild=startBlock.getFurthestChild(startText.key);if(firstBlock!==lastBlock){var nextChild=isAtStart?startChild:startBlock.getNextSibling(startChild.key);startChild=nextChild?startBlock.nodes.skipUntil(function(n){return n.key===nextChild.key}):immutable.List();var lastIndex=
lastBlock.nodes.size;startChild.forEach(function(node,i){editor.moveNodeByKey(node.key,lastBlock.key,lastIndex+i)})}if(editor.isVoid(startBlock)||""!==startBlock.text||startBlock.findDescendant(function(n){return editor.isVoid(n)})){index=startBlock.getFurthestChild(startText.key);var inlineIndex=startBlock.nodes.indexOf(index);firstBlock.nodes.forEach(function(inline,i){editor.insertNodeByKey(startBlock.key,inlineIndex+i+(0===start.offset?0:1),inline)})}else editor.removeNodeByKey(startBlock.key),
editor.insertNodeByKey(parent.key,index,firstBlock)}}})};var findInsertionNode=function(fragment,document,documentKey){var ancestorTypesMatch=function(fragmentAncestors,documentAncestors){return documentAncestors.size>=fragmentAncestors.size&&fragmentAncestors.every(function(fragmentNode,i){return documentAncestors.get(i).type===fragmentNode.type})},getAncestorBlocks=function(doc,key){return doc.getAncestors(key).slice(1).push(doc.getNode(key)).reverse()},fragmentStartBlock=function(doc){for(var result=
doc;1===result.nodes.size&&"block"===result.nodes.first().object;)result=result.nodes.first();return result===doc?null:result}(fragment);if(!fragmentStartBlock)return fragment;document=getAncestorBlocks(document,documentKey);getAncestorBlocks=getAncestorBlocks(fragment,fragmentStartBlock.key);return function(documentAncestors,fragmentAncestors){var depthDifference=documentAncestors.size-fragmentAncestors.size;if(0>depthDifference)return fragment;for(var fragIdx=0;fragIdx<fragmentAncestors.size;fragIdx++)for(var docIdx=
0;docIdx<=depthDifference;docIdx++)if(ancestorTypesMatch(fragmentAncestors.slice(fragIdx),documentAncestors.slice(docIdx)))return fragmentAncestors.get(fragIdx);return fragment}(document,getAncestorBlocks)};Commands$1.insertInlineAtRange=function(editor,range,inline){inline=Inline.create(inline);editor.withoutNormalizing(function(){range=deleteExpandedAtRange(editor,range);var document=editor.value.document,start=range.start,parent=document.getParent(start.path);document=document.assertDescendant(start.path);
document=parent.nodes.indexOf(document);editor.isVoid(parent)||(editor.splitNodeByPath(start.path,start.offset),editor.insertNodeByKey(parent.key,document+1,inline))})};Commands$1.insertTextAtRange=function(editor,range,text,marks){editor.withoutNormalizing(function(){range=deleteExpandedAtRange(editor,range);var start=range.start,offset=start.offset,parent=editor.value.document.getParent(start.path);editor.isVoid(parent)||editor.insertTextByPath(start.path,offset,text,marks)})};Commands$1.removeMarkAtRange=
function(editor,range,mark){if(!range.isCollapsed){var texts=editor.value.document.getTextsAtRange(range),start=range.start,end=range.end;editor.withoutNormalizing(function(){texts.forEach(function(node){var key=node.key,index=0;node=node.text.length;key===start.key&&(index=start.offset);key===end.key&&(node=end.offset);key===start.key&&key===end.key&&(node=end.offset-start.offset);editor.removeMarkByKey(key,index,node,mark)})})}};Commands$1.setBlocksAtRange=function(editor,range,properties){var document=
editor.value.document,blocks=document.getLeafBlocksAtRange(range),start=range.start,end=range.end;range=range.isCollapsed;var isStartVoid=document.hasVoidParent(start.path,editor),startBlock=document.getClosestBlock(start.path);document=document.getClosestBlock(end.key);var sets=!1===range&&0===start.offset&&0===end.offset&&!1===isStartVoid&&start.key===startBlock.getFirstText().key&&end.key===document.getFirstText().key?blocks.slice(0,-1):blocks;editor.withoutNormalizing(function(){sets.forEach(function(block){editor.setNodeByKey(block.key,
properties)})})};Commands$1.setInlinesAtRange=function(editor,range,properties){var inlines=editor.value.document.getLeafInlinesAtRange(range);editor.withoutNormalizing(function(){inlines.forEach(function(inline){editor.setNodeByKey(inline.key,properties)})})};Commands$1.splitBlockAtRange=function(editor,range){var height=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,_range8=range=deleteExpandedAtRange(editor,range),start=_range8.start,end=_range8.end,value=editor.value,document=value.document,
node=document.assertDescendant(start.path);_range8=document.getClosestBlock(node.key);for(var h=0;_range8&&"block"===_range8.object&&h<height;)node=_range8,_range8=document.getClosestBlock(_range8.key),h++;editor.withoutNormalizing(function(){editor.splitDescendantsByKey(node.key,start.path,start.offset);value=editor.value;document=value.document;if(range.isExpanded){range.isBackward&&(range=range.flip());var nextBlock=document.getNextBlock(node.key);range=range.moveAnchorToStartOfNode(nextBlock);
range=range.setFocus(range.focus.setPath(null));start.path.equals(end.path)&&(range=range.moveFocusTo(range.anchor.key,end.offset-start.offset));range=document.resolveRange(range);editor.deleteAtRange(range)}})};Commands$1.splitInlineAtRange=function(editor,range){var height=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Infinity;range=deleteExpandedAtRange(editor,range);for(var start=range.start,document=editor.value.document,node=document.assertDescendant(start.path),parent=document.getClosestInline(node.key),
h=0;parent&&"inline"===parent.object&&h<height;)node=parent,parent=document.getClosestInline(parent.key),h++;editor.splitDescendantsByKey(node.key,start.path,start.offset)};Commands$1.toggleMarkAtRange=function(editor,range,mark){range.isCollapsed||(mark=Mark.create(mark),editor.value.document.getActiveMarksAtRange(range).some(function(m){return m.equals(mark)})?editor.removeMarkAtRange(range,mark):editor.addMarkAtRange(range,mark))};Commands$1.unwrapBlockAtRange=function(editor,range,properties){properties=
Node$jscomp$0.createProperties(properties);var document=editor.value.document,blocks=document.getLeafBlocksAtRange(range),wrappers=blocks.map(function(block){return document.getClosest(block.key,function(parent){return"block"!==parent.object||null!=properties.type&&parent.type!==properties.type||null!=properties.data&&!parent.data.isSuperset(properties.data)?!1:!0})}).filter(function(exists){return exists}).toOrderedSet().toList();editor.withoutNormalizing(function(){wrappers.forEach(function(block){var first=
block.nodes.first(),last=block.nodes.last(),parent=editor.value.document.getParent(block.key),index=parent.nodes.indexOf(block),children=block.nodes.filter(function(child){return blocks.some(function(b){return child===b||child.hasDescendant(b.key)})}),firstMatch=children.first(),lastMatch=children.last();first===firstMatch&&last===lastMatch?(block.nodes.forEach(function(child,i){editor.moveNodeByKey(child.key,parent.key,index+i)}),editor.removeNodeByKey(block.key)):last===lastMatch?block.nodes.skipUntil(function(n){return n===
firstMatch}).forEach(function(child,i){editor.moveNodeByKey(child.key,parent.key,index+1+i)}):first===firstMatch?block.nodes.takeUntil(function(n){return n===lastMatch}).push(lastMatch).forEach(function(child,i){editor.moveNodeByKey(child.key,parent.key,index+i)}):(first=firstMatch.getFirstText(),editor.splitDescendantsByKey(block.key,first.key,0),document=editor.value.document,children.forEach(function(child,i){if(0===i){var extra=child;child=document.getNextBlock(child.key);editor.removeNodeByKey(extra.key)}editor.moveNodeByKey(child.key,
parent.key,index+1+i)}))})})};Commands$1.unwrapInlineAtRange=function(editor,range,properties){properties=Node$jscomp$0.createProperties(properties);var document=editor.value.document,inlines=document.getTextsAtRange(range).map(function(text){return document.getClosest(text.key,function(parent){return"inline"!==parent.object||null!=properties.type&&parent.type!==properties.type||null!=properties.data&&!parent.data.isSuperset(properties.data)?!1:!0})}).filter(function(exists){return exists}).toOrderedSet().toList();
editor.withoutNormalizing(function(){inlines.forEach(function(inline){var parent=editor.value.document.getParent(inline.key),index=parent.nodes.indexOf(inline);inline.nodes.forEach(function(child,i){editor.moveNodeByKey(child.key,parent.key,index+i)});editor.removeNodeByKey(inline.key)})})};Commands$1.wrapBlockAtRange=function(editor,range,block){block=Block.create(block);block=block.set("nodes",block.nodes.clear());var document=editor.value.document;range=document.getLeafBlocksAtRange(range);var firstblock=
range.first(),lastblock=range.last(),parent=void 0,siblings=void 0,index=void 0;1===range.length?(parent=document.getParent(firstblock.key),siblings=range):parent=document.getClosest(firstblock.key,function(p1){return!!document.getClosest(lastblock.key,function(p2){return p1===p2})});null==parent&&(parent=document);null==siblings&&(range=parent.nodes.reduce(function(ind,node,i){if(node===firstblock||node.hasDescendant(firstblock.key))ind[0]=i;if(node===lastblock||node.hasDescendant(lastblock.key))ind[1]=
i;return ind},[]),index=range[0],siblings=parent.nodes.slice(range[0],range[1]+1));null==index&&(index=parent.nodes.indexOf(siblings.first()));editor.withoutNormalizing(function(){editor.insertNodeByKey(parent.key,index,block);siblings.forEach(function(node,i){editor.moveNodeByKey(node.key,block.key,i)})})};Commands$1.wrapInlineAtRange=function(editor,range,inline){var document=editor.value.document,start=range.start,end=range.end;if(range.isCollapsed){var inlineParent=document.getClosestInline(start.path);
return inlineParent&&editor.isVoid(inlineParent)?editor.wrapInlineByKey(inlineParent.key,inline):void 0}inline=Inline.create(inline);inline=inline.set("nodes",inline.nodes.clear());var blocks=document.getLeafBlocksAtRange(range),startBlock=document.getClosestBlock(start.path),endBlock=document.getClosestBlock(end.path),startInline=document.getClosestInline(start.path),endInline=document.getClosestInline(end.path),startChild=startBlock.getFurthestChild(start.key),endChild=endBlock.getFurthestChild(end.key);
editor.withoutNormalizing(function(){startInline&&startInline===endInline||(editor.splitDescendantsByKey(endChild.key,end.key,end.offset),editor.splitDescendantsByKey(startChild.key,start.key,start.offset));document=editor.value.document;startBlock=document.getDescendant(startBlock.key);endBlock=document.getDescendant(endBlock.key);startChild=startBlock.getFurthestChild(start.key);endChild=endBlock.getFurthestChild(end.key);var startIndex=startBlock.nodes.indexOf(startChild),endIndex=endBlock.nodes.indexOf(endChild);
if(startInline&&startInline===endInline)startIndex=startBlock.getTextsAtRange(range).map(function(text){return start.key===text.key&&end.key===text.key?text.splitText(start.offset)[1].splitText(end.offset-start.offset)[0].regenerateKey():start.key===text.key?text.splitText(start.offset)[1].regenerateKey():end.key===text.key?text.splitText(end.offset)[0].regenerateKey():text.regenerateKey()}),inline=inline.set("nodes",startIndex),editor.insertInlineAtRange(range,inline);else if(startBlock===endBlock){document=
editor.value.document;startBlock=document.getClosestBlock(start.key);startChild=startBlock.getFurthestChild(start.key);var startInner=document.getNextSibling(startChild.key);startIndex=startBlock.nodes.indexOf(startInner);var endInner=start.key===end.key?startInner:startBlock.getFurthestChild(end.key);endIndex=startBlock.nodes.skipUntil(function(n){return n===startInner}).takeUntil(function(n){return n===endInner}).push(endInner);var node$jscomp$0=inline.regenerateKey();editor.insertNodeByKey(startBlock.key,
startIndex,node$jscomp$0);endIndex.forEach(function(child,i){editor.moveNodeByKey(child.key,node$jscomp$0.key,i)})}else{var startInlines=startBlock.nodes.slice(startIndex+1),endInlines=endBlock.nodes.slice(0,endIndex+1),startNode=inline.regenerateKey(),endNode=inline.regenerateKey();editor.insertNodeByKey(startBlock.key,startIndex+1,startNode);editor.insertNodeByKey(endBlock.key,endIndex,endNode);startInlines.forEach(function(child,i){editor.moveNodeByKey(child.key,startNode.key,i)});endInlines.forEach(function(child,
i){editor.moveNodeByKey(child.key,endNode.key,i)});blocks.slice(1,-1).forEach(function(block){var node=inline.regenerateKey();editor.insertNodeByKey(block.key,0,node);block.nodes.forEach(function(child,i){editor.moveNodeByKey(child.key,node.key,i)})})}})};Commands$1.wrapTextAtRange=function(editor,range,prefix){var suffix=3<arguments.length&&void 0!==arguments[3]?arguments[3]:prefix,start=range.start,end=range.end,startRange=range.moveToStart(),endRange=range.moveToEnd();start.path.equals(end.path)&&
(endRange=endRange.moveForward(prefix.length));editor.withoutNormalizing(function(){editor.insertTextAtRange(startRange,prefix);editor.insertTextAtRange(endRange,suffix)})};var Commands$2={addMarkByPath:function(editor,path,offset,length,mark){mark=Mark.create(mark);editor.addMarksByPath(path,offset,length,[mark])},addMarksByPath:function(editor,path,offset,length,marks){marks=Mark.createSet(marks);if(marks.size){var node=editor.value.document.assertNode(path);editor.withoutNormalizing(function(){offset+
length<node.text.length&&editor.splitNodeByPath(path,offset+length);0<offset&&(editor.splitNodeByPath(path,offset),path=PathUtils.increment(path),offset=0);marks.forEach(function(mark){editor.applyOperation({type:"add_mark",path,mark:Mark.create(mark)})})})}},replaceMarksByPath:function(editor,path,offset,length,marks){var marksSet=Mark.createSet(marks),node=editor.value.document.assertNode(path);node.marks.equals(marksSet)||editor.withoutNormalizing(function(){offset+length<node.text.length&&editor.splitNodeByPath(path,
offset+length);0<offset&&(editor.splitNodeByPath(path,offset),path=PathUtils.increment(path),offset=0);var marksToApply=marksSet.subtract(node.marks);node.marks.subtract(marksSet).forEach(function(mark){editor.applyOperation({type:"remove_mark",path,mark:Mark.create(mark)})});marksToApply.forEach(function(mark){editor.applyOperation({type:"add_mark",path,mark:Mark.create(mark)})})})},insertFragmentByPath:function(editor,path,index,fragment){fragment.nodes.forEach(function(node,i){editor.insertNodeByPath(path,
index+i,node)})},insertNodeByPath:function(editor,path,index,node){editor.applyOperation({type:"insert_node",path:path.concat(index),node})},insertTextByPath:function(editor,path,offset,text,marks){var value=editor.value,annotations=value.annotations;value.document.assertNode(path);editor.withoutNormalizing(function(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=annotations.values()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=
!0){var annotation=_step.value,start=annotation.start,end=annotation.end;editor.isAtomic(annotation)&&start.path.equals(path)&&start.offset<offset&&(!end.path.equals(path)||end.offset>offset)&&editor.removeAnnotation(annotation)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError;}}editor.applyOperation({type:"insert_text",path,offset,text});marks&&editor.replaceMarksByPath(path,
offset,text.length,marks)})},mergeNodeByPath:function(editor,path){var document=editor.value.document,original=document.getDescendant(path);document=document.getPreviousSibling(path);if(!document)throw Error('Unable to merge node with path "'+path+'", because it has no previous sibling.');editor.applyOperation({type:"merge_node",path,position:"text"===document.object?document.text.length:document.nodes.size,properties:{type:original.type,data:original.data},target:null})},moveNodeByPath:function(editor,
path,newParentPath,newIndex){if(PathUtils.isEqual(path,newParentPath))return editor;newParentPath=newParentPath.concat(newIndex);if(PathUtils.isEqual(path,newParentPath))return editor;editor.applyOperation({type:"move_node",path,newPath:newParentPath})},removeMarkByPath:function(editor,path,offset,length,mark){mark=Mark.create(mark);editor.removeMarksByPath(path,offset,length,[mark])},removeMarksByPath:function(editor,path,offset,length,marks){marks=Mark.createSet(marks);if(marks.size){var node=editor.value.document.assertNode(path);
marks.intersect(node.marks).isEmpty()||editor.withoutNormalizing(function(){offset+length<node.text.length&&editor.splitNodeByPath(path,offset+length);0<offset&&(editor.splitNodeByPath(path,offset),path=PathUtils.increment(path),offset=0);marks.forEach(function(mark){editor.applyOperation({type:"remove_mark",path,offset,length,mark})})})}},removeAllMarksByPath:function(editor,path){var node=editor.state.document.assertNode(path);editor.withoutNormalizing(function(){if("text"===node.object)editor.removeMarksByPath(path,
0,node.text.length,node.marks);else{var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=node.texts()[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _ref2=slicedToArray(_step2.value,2),n=_ref2[0],pth=path.concat(_ref2[1]);editor.removeMarksByPath(pth,0,n.text.length,n.marks)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&
_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2;}}}})},removeNodeByPath:function(editor,path){var node=editor.value.document.assertNode(path);editor.applyOperation({type:"remove_node",path,node})},removeTextByPath:function(editor,path,offset,length){var value=editor.value,annotations=value.annotations,text=value.document.assertNode(path).text.slice(offset,offset+length);editor.withoutNormalizing(function(){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=
void 0;try{for(var _iterator3=annotations.values()[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var annotation=_step3.value,start=annotation.start,end=annotation.end;editor.isAtomic(annotation)&&start.path.equals(path)&&start.offset<offset&&(!end.path.equals(path)||end.offset>offset)&&editor.removeAnnotation(annotation)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&
_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3;}}editor.applyOperation({type:"remove_text",path,offset,text})})},replaceNodeByPath:function(editor,path,newNode){newNode=Node$jscomp$0.create(newNode);var index=path.last(),parentPath=PathUtils.lift(path);editor.withoutNormalizing(function(){editor.removeNodeByPath(path);editor.insertNodeByPath(parentPath,index,newNode)})},replaceTextByPath:function(editor,path,offset,length,text,marks){editor.withoutNormalizing(function(){editor.removeTextByPath(path,
offset,length);editor.insertTextByPath(path,offset,text,marks)})},setMarkByPath:function(editor,path,offset,length,properties,newProperties){properties=Mark.create(properties);newProperties=Mark.createProperties(newProperties);var node=editor.value.document.assertNode(path);editor.withoutNormalizing(function(){offset+length<node.text.length&&editor.splitNodeByPath(path,offset+length);0<offset&&(editor.splitNodeByPath(path,offset),path=PathUtils.increment(path),offset=0);editor.applyOperation({type:"set_mark",
path,properties,newProperties})})},setNodeByPath:function(editor,path,newProperties){var node=editor.value.document.assertNode(path);newProperties=Node$jscomp$0.createProperties(newProperties);node=pick(node,Object.keys(newProperties));editor.applyOperation({type:"set_node",path,properties:node,newProperties})},setTextByPath:function(editor,path,text,marks){var end=editor.value.document.assertNode(path).text.length;editor.replaceTextByPath(path,0,end,text,marks)},splitNodeByPath:function(editor,path,
position){var _options$target=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).target;_options$target=void 0===_options$target?null:_options$target;var node=editor.value.document.getDescendant(path);editor.applyOperation({type:"split_node",path,position,target:_options$target,properties:{type:node.type,data:node.data}})},splitDescendantsByPath:function(editor,path,textPath,textOffset){if(path.equals(textPath))editor.splitNodeByPath(textPath,textOffset);else{var document=editor.value.document,
index=textOffset,lastPath=textPath;editor.withoutNormalizing(function(){editor.splitNodeByKey(textPath,textOffset);var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _iterator4=document.ancestors(textPath)[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var ancestorPath=slicedToArray(_step4.value,2)[1],target=index;index=lastPath.last()+1;lastPath=ancestorPath;editor.splitNodeByPath(ancestorPath,
index,{target});if(ancestorPath.equals(path))break}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4;}}})}},unwrapInlineByPath:function(editor,path,properties){var value=editor.value,selection=value.selection;value=value.document.assertNode(path);path=value.getFirstText();value=value.getLastText();selection=selection.moveToRangeOfNode(path,value);editor.unwrapInlineAtRange(selection,
properties)},unwrapBlockByPath:function(editor,path,properties){var value=editor.value,selection=value.selection;value=value.document.assertNode(path);path=value.getFirstText();value=value.getLastText();selection=selection.moveToRangeOfNode(path,value);editor.unwrapBlockAtRange(selection,properties)},unwrapNodeByPath:function(editor,path){var document=editor.value.document;document.assertNode(path);var parentPath=PathUtils.lift(path),parent=document.assertNode(parentPath),index=path.last(),parentIndex=
parentPath.last(),grandPath=PathUtils.lift(parentPath),isFirst=0===index,isLast=index===parent.nodes.size-1;editor.withoutNormalizing(function(){if(1===parent.nodes.size)editor.moveNodeByPath(path,grandPath,parentIndex+1),editor.removeNodeByPath(parentPath);else if(isFirst)editor.moveNodeByPath(path,grandPath,parentIndex);else if(isLast)editor.moveNodeByPath(path,grandPath,parentIndex+1);else{var updatedPath=PathUtils.increment(path,1,parentPath.size-1);updatedPath=updatedPath.set(updatedPath.size-
1,0);editor.splitNodeByPath(parentPath,index);editor.moveNodeByPath(updatedPath,grandPath,parentIndex+1)}})},unwrapChildrenByPath:function(editor,path){path=PathUtils.create(path);var node=editor.value.document.assertNode(path),parentPath=PathUtils.lift(path),index=path.last(),nodes=node.nodes;editor.withoutNormalizing(function(){nodes.reverse().forEach(function(child,i){child=path.push(nodes.size-i-1);editor.moveNodeByPath(child,parentPath,index+1)});editor.removeNodeByPath(path)})},wrapBlockByPath:function(editor,
path,block){block=Block.create(block);block=block.set("nodes",block.nodes.clear());var parentPath=PathUtils.lift(path),index=path.last(),newPath=PathUtils.increment(path);editor.withoutNormalizing(function(){editor.insertNodeByPath(parentPath,index,block);editor.moveNodeByPath(newPath,path,0)})},wrapInlineByPath:function(editor,path,inline){inline=Inline.create(inline);inline=inline.set("nodes",inline.nodes.clear());var parentPath=PathUtils.lift(path),index=path.last(),newPath=PathUtils.increment(path);
editor.withoutNormalizing(function(){editor.insertNodeByPath(parentPath,index,inline);editor.moveNodeByPath(newPath,path,0)})},wrapNodeByPath:function(editor,path,node){node=Node$jscomp$0.create(node);"block"===node.object?editor.wrapBlockByPath(path,node):"inline"===node.object&&editor.wrapInlineByPath(path,node)}},COMMANDS="addMark insertFragment insertNode insertText mergeNode removeAllMarks removeMark removeNode removeText replaceMarks replaceNode replaceText setMark setNode setText splitNode unwrapBlock unwrapChildren unwrapInline unwrapNode wrapBlock wrapInline wrapNode".split(" "),
_loop=function(method){Commands$2[method+"ByKey"]=function(editor,key){for(var _len3=arguments.length,args=Array(2<_len3?_len3-2:0),_key3=2;_key3<_len3;_key3++)args[_key3-2]=arguments[_key3];_len3=editor.value.document.assertPath(key);editor[method+"ByPath"].apply(editor,[_len3].concat(args))}},_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _iterator5=COMMANDS[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=
!0)_loop(_step5.value)}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5;}}Commands$2.moveNodeByKey=function(editor,key,newKey){for(var _len=arguments.length,args=Array(3<_len?_len-3:0),_key=3;_key<_len;_key++)args[_key-3]=arguments[_key];_key=editor.value.document;_len=_key.assertPath(key);_key=_key.assertPath(newKey);editor.moveNodeByPath.apply(editor,[_len,_key].concat(args))};
Commands$2.splitDescendantsByKey=function(editor,key,textKey){for(var _len2=arguments.length,args=Array(3<_len2?_len2-3:0),_key2=3;_key2<_len2;_key2++)args[_key2-3]=arguments[_key2];_key2=editor.value.document;_len2=_key2.assertPath(key);_key2=_key2.assertPath(textKey);editor.splitDescendantsByPath.apply(editor,[_len2,_key2].concat(args))};var Commands$3={save:function(editor,operation){var operations=editor.operations,data=editor.value.data,_editor$tmp=editor.tmp,merge=_editor$tmp.merge;if(!1!==
_editor$tmp.save&&isValidOperation(operation)){var undos=data.get("undos")||immutable.List(),lastOperation=(_editor$tmp=undos.last())&&_editor$tmp.last();null==merge&&(merge=0!==operations.size?!0:shouldMerge(operation,lastOperation));merge&&_editor$tmp?(operation=_editor$tmp.push(operation),undos=undos.pop(),undos=undos.push(operation)):(operation=immutable.List([operation]),undos=undos.push(operation));100<undos.size&&(undos=undos.takeLast(100));editor.withoutSaving(function(){var redos=immutable.List();
redos=data.set("undos",undos).set("redos",redos);editor.setData(redos)})}},redo:function(editor){var data=editor.value.data,redos=data.get("redos")||immutable.List(),undos=data.get("undos")||immutable.List(),batch=redos.last();batch&&editor.withoutSaving(function(){editor.withoutNormalizing(function(){batch.forEach(function(op){var _op=op,newProperties=_op.newProperties;"set_selection"===_op.type&&(op=op.set("newProperties",omit(newProperties,"isFocused")));editor.applyOperation(op)});redos=redos.pop();
undos=undos.push(batch);var newData=data.set("undos",undos).set("redos",redos);editor.setData(newData)})})},undo:function(editor){var data=editor.value.data,redos=data.get("redos")||immutable.List(),undos=data.get("undos")||immutable.List(),batch=undos.last();batch&&editor.withoutSaving(function(){editor.withoutNormalizing(function(){batch.slice().reverse().map(function(op){return op.invert()}).forEach(function(inverse){var _inverse=inverse,newProperties=_inverse.newProperties;"set_selection"===_inverse.type&&
(inverse=inverse.set("newProperties",omit(newProperties,"isFocused")));editor.applyOperation(inverse)});redos=redos.push(batch);undos=undos.pop();var newData=data.set("undos",undos).set("redos",redos);editor.setData(newData)})})},withoutMerging:function(editor,fn){var value=editor.tmp.merge;editor.tmp.merge=!1;fn(editor);editor.tmp.merge=value},withoutSaving:function(editor,fn){var value=editor.tmp.save;editor.tmp.save=!1;fn(editor);editor.tmp.save=value}},Commands$4={blur:function(editor){editor.select({isFocused:!1})},
deselect:function(editor){var range=Selection$jscomp$0.create();editor.select(range)},focus:function(editor){editor.select({isFocused:!0})},flip:function(editor){editor.command(proxy,"flip")},moveAnchorBackward:function(editor){for(var _len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];editor.command.apply(editor,[pointBackward,"anchor"].concat(args))},moveAnchorWordBackward:function(editor){for(var _len2=arguments.length,args=Array(1<_len2?_len2-
1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];editor.command.apply(editor,[pointWordBackward,"anchor"].concat(args))},moveAnchorForward:function(editor){for(var _len3=arguments.length,args=Array(1<_len3?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];editor.command.apply(editor,[pointForward,"anchor"].concat(args))},moveAnchorWordForward:function(editor){for(var _len4=arguments.length,args=Array(1<_len4?_len4-1:0),_key4=1;_key4<_len4;_key4++)args[_key4-1]=arguments[_key4];
editor.command.apply(editor,[pointWordForward,"anchor"].concat(args))},moveAnchorTo:function(editor){for(var _len5=arguments.length,args=Array(1<_len5?_len5-1:0),_key5=1;_key5<_len5;_key5++)args[_key5-1]=arguments[_key5];editor.command.apply(editor,[proxy,"moveAnchorTo"].concat(args))},moveAnchorToEndOfBlock:function(editor){editor.command(pointEdgeObject,"anchor","end","block")},moveAnchorToEndOfInline:function(editor){editor.command(pointEdgeObject,"anchor","end","inline")},moveAnchorToEndOfDocument:function(editor){editor.moveAnchorToEndOfNode(editor.value.document).moveToAnchor()},
moveAnchorToEndOfNextBlock:function(editor){editor.command(pointEdgeSideObject,"anchor","end","next","block")},moveAnchorToEndOfNextInline:function(editor){editor.command(pointEdgeSideObject,"anchor","end","next","inline")},moveAnchorToEndOfNextText:function(editor){editor.command(pointEdgeSideObject,"anchor","end","next","text")},moveAnchorToEndOfNode:function(editor){for(var _len6=arguments.length,args=Array(1<_len6?_len6-1:0),_key6=1;_key6<_len6;_key6++)args[_key6-1]=arguments[_key6];editor.command.apply(editor,
[proxy,"moveAnchorToEndOfNode"].concat(args))},moveAnchorToEndOfPreviousBlock:function(editor){editor.command(pointEdgeSideObject,"anchor","end","previous","block")},moveAnchorToEndOfPreviousInline:function(editor){editor.command(pointEdgeSideObject,"anchor","end","previous","inline")},moveAnchorToEndOfPreviousText:function(editor){editor.command(pointEdgeSideObject,"anchor","end","previous","text")},moveAnchorToEndOfText:function(editor){editor.command(pointEdgeObject,"anchor","end","text")},moveAnchorToStartOfBlock:function(editor){editor.command(pointEdgeObject,
"anchor","start","block")},moveAnchorToStartOfDocument:function(editor){editor.moveAnchorToStartOfNode(editor.value.document).moveToAnchor()},moveAnchorToStartOfInline:function(editor){editor.command(pointEdgeObject,"anchor","start","inline")},moveAnchorToStartOfNextBlock:function(editor){editor.command(pointEdgeSideObject,"anchor","start","next","block")},moveAnchorToStartOfNextInline:function(editor){editor.command(pointEdgeSideObject,"anchor","start","next","inline")},moveAnchorToStartOfNextText:function(editor){editor.command(pointEdgeSideObject,
"anchor","start","next","text")},moveAnchorToStartOfNode:function(editor){for(var _len7=arguments.length,args=Array(1<_len7?_len7-1:0),_key7=1;_key7<_len7;_key7++)args[_key7-1]=arguments[_key7];editor.command.apply(editor,[proxy,"moveAnchorToStartOfNode"].concat(args))},moveAnchorToStartOfPreviousBlock:function(editor){editor.command(pointEdgeSideObject,"anchor","start","previous","block")},moveAnchorToStartOfPreviousInline:function(editor){editor.command(pointEdgeSideObject,"anchor","start","previous",
"inline")},moveAnchorToStartOfPreviousText:function(editor){editor.command(pointEdgeSideObject,"anchor","start","previous","text")},moveAnchorToStartOfText:function(editor){editor.command(pointEdgeObject,"anchor","start","text")},moveBackward:function(editor){var chars=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(0!==chars){var value=editor.value,start=value.selection.start;value=value.document.getClosestBlock(start.key);start=value.getOffset(start.key)+start.offset;chars=TextUtils.getCharOffsetBackward(value.text,
start,chars);editor.moveAnchorBackward(chars).moveFocusBackward(chars)}},moveWordBackward:function(editor){for(var _len8=arguments.length,args=Array(1<_len8?_len8-1:0),_key8=1;_key8<_len8;_key8++)args[_key8-1]=arguments[_key8];editor.moveFocusWordBackward.apply(editor,args).moveToFocus()},moveEndBackward:function(editor){for(var _len9=arguments.length,args=Array(1<_len9?_len9-1:0),_key9=1;_key9<_len9;_key9++)args[_key9-1]=arguments[_key9];editor.command.apply(editor,[pointBackward,"end"].concat(args))},
moveEndWordBackward:function(editor){for(var _len10=arguments.length,args=Array(1<_len10?_len10-1:0),_key10=1;_key10<_len10;_key10++)args[_key10-1]=arguments[_key10];editor.command.apply(editor,[pointWordBackward,"end"].concat(args))},moveEndForward:function(editor){for(var _len11=arguments.length,args=Array(1<_len11?_len11-1:0),_key11=1;_key11<_len11;_key11++)args[_key11-1]=arguments[_key11];editor.command.apply(editor,[pointForward,"end"].concat(args))},moveEndWordForward:function(editor){for(var _len12=
arguments.length,args=Array(1<_len12?_len12-1:0),_key12=1;_key12<_len12;_key12++)args[_key12-1]=arguments[_key12];editor.command.apply(editor,[pointWordForward,"end"].concat(args))},moveEndTo:function(editor){for(var _len13=arguments.length,args=Array(1<_len13?_len13-1:0),_key13=1;_key13<_len13;_key13++)args[_key13-1]=arguments[_key13];editor.command.apply(editor,[proxy,"moveEndTo"].concat(args))},moveEndToEndOfBlock:function(editor){editor.command(pointEdgeObject,"end","end","block")},moveEndToEndOfDocument:function(editor){editor.moveEndToEndOfNode(editor.value.document).moveToEnd()},
moveEndToEndOfInline:function(editor){editor.command(pointEdgeObject,"end","end","inline")},moveEndToEndOfNextBlock:function(editor){editor.command(pointEdgeSideObject,"end","end","next","block")},moveEndToEndOfNextInline:function(editor){editor.command(pointEdgeSideObject,"end","end","next","inline")},moveEndToEndOfNextText:function(editor){editor.command(pointEdgeSideObject,"end","end","next","text")},moveEndToEndOfNode:function(editor){for(var _len14=arguments.length,args=Array(1<_len14?_len14-
1:0),_key14=1;_key14<_len14;_key14++)args[_key14-1]=arguments[_key14];editor.command.apply(editor,[proxy,"moveEndToEndOfNode"].concat(args))},moveEndToEndOfPreviousBlock:function(editor){editor.command(pointEdgeSideObject,"end","end","previous","block")},moveEndToEndOfPreviousInline:function(editor){editor.command(pointEdgeSideObject,"end","end","previous","inline")},moveEndToEndOfPreviousText:function(editor){editor.command(pointEdgeSideObject,"end","end","previous","text")},moveEndToEndOfText:function(editor){editor.command(pointEdgeObject,
"end","end","text")},moveEndToStartOfBlock:function(editor){editor.command(pointEdgeObject,"end","start","block")},moveEndToStartOfDocument:function(editor){editor.moveEndToStartOfNode(editor.value.document).moveToEnd()},moveEndToStartOfInline:function(editor){editor.command(pointEdgeObject,"end","start","inline")},moveEndToStartOfNextBlock:function(editor){editor.command(pointEdgeSideObject,"end","start","next","block")},moveEndToStartOfNextInline:function(editor){editor.command(pointEdgeSideObject,
"end","start","next","inline")},moveEndToStartOfNextText:function(editor){editor.command(pointEdgeSideObject,"end","start","next","text")},moveEndToStartOfNode:function(editor){for(var _len15=arguments.length,args=Array(1<_len15?_len15-1:0),_key15=1;_key15<_len15;_key15++)args[_key15-1]=arguments[_key15];editor.command.apply(editor,[proxy,"moveEndToStartOfNode"].concat(args))},moveEndToStartOfPreviousBlock:function(editor){editor.command(pointEdgeSideObject,"end","start","previous","block")},moveEndToStartOfPreviousInline:function(editor){editor.command(pointEdgeSideObject,
"end","start","previous","inline")},moveEndToStartOfPreviousText:function(editor){editor.command(pointEdgeSideObject,"end","start","previous","text")},moveEndToStartOfText:function(editor){editor.command(pointEdgeObject,"end","start","text")},moveFocusBackward:function(editor){for(var _len16=arguments.length,args=Array(1<_len16?_len16-1:0),_key16=1;_key16<_len16;_key16++)args[_key16-1]=arguments[_key16];editor.command.apply(editor,[pointBackward,"focus"].concat(args))},moveFocusWordBackward:function(editor){for(var _len17=
arguments.length,args=Array(1<_len17?_len17-1:0),_key17=1;_key17<_len17;_key17++)args[_key17-1]=arguments[_key17];editor.command.apply(editor,[pointWordBackward,"focus"].concat(args))},moveFocusForward:function(editor){for(var _len18=arguments.length,args=Array(1<_len18?_len18-1:0),_key18=1;_key18<_len18;_key18++)args[_key18-1]=arguments[_key18];editor.command.apply(editor,[pointForward,"focus"].concat(args))},moveFocusWordForward:function(editor){for(var _len19=arguments.length,args=Array(1<_len19?
_len19-1:0),_key19=1;_key19<_len19;_key19++)args[_key19-1]=arguments[_key19];editor.command.apply(editor,[pointWordForward,"focus"].concat(args))},moveFocusTo:function(editor){for(var _len20=arguments.length,args=Array(1<_len20?_len20-1:0),_key20=1;_key20<_len20;_key20++)args[_key20-1]=arguments[_key20];editor.command.apply(editor,[proxy,"moveFocusTo"].concat(args))},moveFocusToEndOfBlock:function(editor){editor.command(pointEdgeObject,"focus","end","block")},moveFocusToEndOfDocument:function(editor){editor.moveFocusToEndOfNode(editor.value.document).moveToFocus()},
moveFocusToEndOfInline:function(editor){editor.command(pointEdgeObject,"focus","end","inline")},moveFocusToEndOfNextBlock:function(editor){editor.command(pointEdgeSideObject,"focus","end","next","block")},moveFocusToEndOfNextInline:function(editor){editor.command(pointEdgeSideObject,"focus","end","next","inline")},moveFocusToEndOfNextText:function(editor){editor.command(pointEdgeSideObject,"focus","end","next","text")},moveFocusToEndOfNode:function(editor){for(var _len21=arguments.length,args=Array(1<
_len21?_len21-1:0),_key21=1;_key21<_len21;_key21++)args[_key21-1]=arguments[_key21];editor.command.apply(editor,[proxy,"moveFocusToEndOfNode"].concat(args))},moveFocusToEndOfPreviousBlock:function(editor){editor.command(pointEdgeSideObject,"focus","end","previous","block")},moveFocusToEndOfPreviousInline:function(editor){editor.command(pointEdgeSideObject,"focus","end","previous","inline")},moveFocusToEndOfPreviousText:function(editor){editor.command(pointEdgeSideObject,"focus","end","previous","text")},
moveFocusToEndOfText:function(editor){editor.command(pointEdgeObject,"focus","end","text")},moveFocusToStartOfBlock:function(editor){editor.command(pointEdgeObject,"focus","start","block")},moveFocusToStartOfDocument:function(editor){editor.moveFocusToStartOfNode(editor.value.document).moveToFocus()},moveFocusToStartOfInline:function(editor){editor.command(pointEdgeObject,"focus","start","inline")},moveFocusToStartOfNextBlock:function(editor){editor.command(pointEdgeSideObject,"focus","start","next",
"block")},moveFocusToStartOfNextInline:function(editor){editor.command(pointEdgeSideObject,"focus","start","next","inline")},moveFocusToStartOfNextText:function(editor){editor.command(pointEdgeSideObject,"focus","start","next","text")},moveFocusToStartOfNode:function(editor){for(var _len22=arguments.length,args=Array(1<_len22?_len22-1:0),_key22=1;_key22<_len22;_key22++)args[_key22-1]=arguments[_key22];editor.command.apply(editor,[proxy,"moveFocusToStartOfNode"].concat(args))},moveFocusToStartOfPreviousBlock:function(editor){editor.command(pointEdgeSideObject,
"focus","start","previous","block")},moveFocusToStartOfPreviousInline:function(editor){editor.command(pointEdgeSideObject,"focus","start","previous","inline")},moveFocusToStartOfPreviousText:function(editor){editor.command(pointEdgeSideObject,"focus","start","previous","text")},moveFocusToStartOfText:function(editor){editor.command(pointEdgeObject,"focus","start","text")},moveForward:function(editor){var chars=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(0!==chars){var value=editor.value,
start=value.selection.start;value=value.document.getClosestBlock(start.path);start=value.getOffset(start.key)+start.offset;chars=TextUtils.getCharOffsetForward(value.text,start,chars);editor.moveAnchorForward(chars).moveFocusForward(chars)}},moveWordForward:function(editor){for(var _editor$moveFocusWord,_len23=arguments.length,args=Array(1<_len23?_len23-1:0),_key23=1;_key23<_len23;_key23++)args[_key23-1]=arguments[_key23];(_editor$moveFocusWord=editor.moveFocusWordForward.apply(editor,args)).moveToFocus.apply(_editor$moveFocusWord,
args)},moveStartBackward:function(editor){for(var _len24=arguments.length,args=Array(1<_len24?_len24-1:0),_key24=1;_key24<_len24;_key24++)args[_key24-1]=arguments[_key24];editor.command.apply(editor,[pointBackward,"start"].concat(args))},moveStartWordBackward:function(editor){for(var _len25=arguments.length,args=Array(1<_len25?_len25-1:0),_key25=1;_key25<_len25;_key25++)args[_key25-1]=arguments[_key25];editor.command.apply(editor,[pointWordBackward,"start"].concat(args))},moveStartForward:function(editor){for(var _len26=
arguments.length,args=Array(1<_len26?_len26-1:0),_key26=1;_key26<_len26;_key26++)args[_key26-1]=arguments[_key26];editor.command.apply(editor,[pointForward,"start"].concat(args))},moveStartWordForward:function(editor){for(var _len27=arguments.length,args=Array(1<_len27?_len27-1:0),_key27=1;_key27<_len27;_key27++)args[_key27-1]=arguments[_key27];editor.command.apply(editor,[pointWordForward,"start"].concat(args))},moveStartTo:function(editor){for(var _len28=arguments.length,args=Array(1<_len28?_len28-
1:0),_key28=1;_key28<_len28;_key28++)args[_key28-1]=arguments[_key28];editor.command.apply(editor,[proxy,"moveStartTo"].concat(args))},moveStartToEndOfBlock:function(editor){editor.command(pointEdgeObject,"start","end","block")},moveStartToEndOfDocument:function(editor){editor.moveStartToEndOfNode(editor.value.document).moveToStart()},moveStartToEndOfInline:function(editor){editor.command(pointEdgeObject,"start","end","inline")},moveStartToEndOfNextBlock:function(editor){editor.command(pointEdgeSideObject,
"start","end","next","block")},moveStartToEndOfNextInline:function(editor){editor.command(pointEdgeSideObject,"start","end","next","inline")},moveStartToEndOfNextText:function(editor){editor.command(pointEdgeSideObject,"start","end","next","text")},moveStartToEndOfNode:function(editor){for(var _len29=arguments.length,args=Array(1<_len29?_len29-1:0),_key29=1;_key29<_len29;_key29++)args[_key29-1]=arguments[_key29];editor.command.apply(editor,[proxy,"moveStartToEndOfNode"].concat(args))},moveStartToEndOfPreviousBlock:function(editor){editor.command(pointEdgeSideObject,
"start","end","previous","block")},moveStartToEndOfPreviousInline:function(editor){editor.command(pointEdgeSideObject,"start","end","previous","inline")},moveStartToEndOfPreviousText:function(editor){editor.command(pointEdgeSideObject,"start","end","previous","text")},moveStartToEndOfText:function(editor){editor.command(pointEdgeObject,"start","end","text")},moveStartToStartOfBlock:function(editor){editor.command(pointEdgeObject,"start","start","block")},moveStartToStartOfDocument:function(editor){editor.moveStartToStartOfNode(editor.value.document).moveToStart()},
moveStartToStartOfInline:function(editor){editor.command(pointEdgeObject,"start","start","inline")},moveStartToStartOfNextBlock:function(editor){editor.command(pointEdgeSideObject,"start","start","next","block")},moveStartToStartOfNextInline:function(editor){editor.command(pointEdgeSideObject,"start","start","next","inline")},moveStartToStartOfNextText:function(editor){editor.command(pointEdgeSideObject,"start","start","next","text")},moveStartToStartOfNode:function(editor){for(var _len30=arguments.length,
args=Array(1<_len30?_len30-1:0),_key30=1;_key30<_len30;_key30++)args[_key30-1]=arguments[_key30];editor.command.apply(editor,[proxy,"moveStartToStartOfNode"].concat(args))},moveStartToStartOfPreviousBlock:function(editor){editor.command(pointEdgeSideObject,"start","start","previous","block")},moveStartToStartOfPreviousInline:function(editor){editor.command(pointEdgeSideObject,"start","start","previous","inline")},moveStartToStartOfPreviousText:function(editor){editor.command(pointEdgeSideObject,"start",
"start","previous","text")},moveStartToStartOfText:function(editor){editor.command(pointEdgeObject,"start","start","text")},moveTo:function(editor){for(var _len31=arguments.length,args=Array(1<_len31?_len31-1:0),_key31=1;_key31<_len31;_key31++)args[_key31-1]=arguments[_key31];editor.command.apply(editor,[proxy,"moveTo"].concat(args))},moveToAnchor:function(editor){editor.command(proxy,"moveToAnchor")},moveToEnd:function(editor){editor.command(proxy,"moveToEnd")},moveToEndOfBlock:function(editor){editor.moveEndToEndOfBlock().moveToEnd()},
moveToEndOfDocument:function(editor){editor.moveEndToEndOfNode(editor.value.document).moveToEnd()},moveToEndOfInline:function(editor){editor.moveEndToEndOfInline().moveToEnd()},moveToEndOfNextBlock:function(editor){editor.moveEndToEndOfNextBlock().moveToEnd()},moveToEndOfNextInline:function(editor){editor.moveEndToEndOfNextInline().moveToEnd()},moveToEndOfNextText:function(editor){editor.moveEndToEndOfNextText().moveToEnd()},moveToEndOfNode:function(editor){for(var _len32=arguments.length,args=Array(1<
_len32?_len32-1:0),_key32=1;_key32<_len32;_key32++)args[_key32-1]=arguments[_key32];editor.command.apply(editor,[proxy,"moveToEndOfNode"].concat(args))},moveToEndOfPreviousBlock:function(editor){editor.moveStartToEndOfPreviousBlock().moveToStart()},moveToEndOfPreviousInline:function(editor){editor.moveStartToEndOfPreviousInline().moveToStart()},moveToEndOfPreviousText:function(editor){editor.moveStartToEndOfPreviousText().moveToStart()},moveToEndOfText:function(editor){editor.moveEndToEndOfText().moveToEnd()},
moveToFocus:function(editor){editor.command(proxy,"moveToFocus")},moveToRangeOfDocument:function(editor){editor.moveToRangeOfNode(editor.value.document)},moveToRangeOfNode:function(editor){for(var _len33=arguments.length,args=Array(1<_len33?_len33-1:0),_key33=1;_key33<_len33;_key33++)args[_key33-1]=arguments[_key33];editor.command.apply(editor,[proxy,"moveToRangeOfNode"].concat(args))},moveToStart:function(editor){editor.command(proxy,"moveToStart")},moveToStartOfBlock:function(editor){editor.moveStartToStartOfBlock().moveToStart()},
moveToStartOfDocument:function(editor){editor.moveStartToStartOfNode(editor.value.document).moveToStart()},moveToStartOfInline:function(editor){editor.moveStartToStartOfInline().moveToStart()},moveToStartOfNextBlock:function(editor){editor.moveEndToStartOfNextBlock().moveToEnd()},moveToStartOfNextInline:function(editor){editor.moveEndToStartOfNextInline().moveToEnd()},moveToStartOfNextText:function(editor){editor.moveEndToStartOfNextText().moveToEnd()},moveToStartOfNode:function(editor){for(var _len34=
arguments.length,args=Array(1<_len34?_len34-1:0),_key34=1;_key34<_len34;_key34++)args[_key34-1]=arguments[_key34];editor.command.apply(editor,[proxy,"moveToStartOfNode"].concat(args))},moveToStartOfPreviousBlock:function(editor){editor.moveStartToStartOfPreviousBlock().moveToStart()},moveToStartOfPreviousInline:function(editor){editor.moveStartToStartOfPreviousInline().moveToStart()},moveToStartOfPreviousText:function(editor){editor.moveStartToStartOfPreviousText().moveToStart()},moveToStartOfText:function(editor){editor.moveStartToStartOfText().moveToStart()},
select:function(editor,properties){var options=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};properties=Selection$jscomp$0.createProperties(properties);options=options.snapshot;options=void 0===options?!1:options;var value=editor.value,document=value.document,selection=value.selection,newProperties={},next=selection.setProperties(properties);next=document.resolveSelection(next);properties=pick(next,Object.keys(properties));for(var k in properties)!0!==options&&immutable.is(properties[k],
selection[k])||(newProperties[k]=properties[k]);selection.marks&&!newProperties.marks&&(newProperties.anchor||newProperties.focus)&&(newProperties.marks=null);0!==Object.keys(newProperties).length&&(k=pick(selection.toJSON(),Object.keys(newProperties)),editor.applyOperation({type:"set_selection",value,properties:k,newProperties},options?{skip:!1,merge:!1}:{}))},setAnchor:function(editor){for(var _len35=arguments.length,args=Array(1<_len35?_len35-1:0),_key35=1;_key35<_len35;_key35++)args[_key35-1]=
arguments[_key35];editor.command.apply(editor,[proxy,"setAnchor"].concat(args))},setEnd:function(editor){for(var _len36=arguments.length,args=Array(1<_len36?_len36-1:0),_key36=1;_key36<_len36;_key36++)args[_key36-1]=arguments[_key36];editor.command.apply(editor,[proxy,"setEnd"].concat(args))},setFocus:function(editor){for(var _len37=arguments.length,args=Array(1<_len37?_len37-1:0),_key37=1;_key37<_len37;_key37++)args[_key37-1]=arguments[_key37];editor.command.apply(editor,[proxy,"setFocus"].concat(args))},
setStart:function(editor){for(var _len38=arguments.length,args=Array(1<_len38?_len38-1:0),_key38=1;_key38<_len38;_key38++)args[_key38-1]=arguments[_key38];editor.command.apply(editor,[proxy,"setStart"].concat(args))},snapshotSelection:function(editor){editor.withoutMerging(function(){editor.select(editor.value.selection,{snapshot:!0})})}},Commands$5={setData:function(editor){var value=editor.value,newProperties=Value.createProperties({data:1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}});
value=pick(value,Object.keys(newProperties));editor.applyOperation({type:"set_value",properties:value,newProperties})},addAnnotation:function(editor,annotation){annotation=Annotation.create(annotation);editor.applyOperation({type:"add_annotation",annotation})},removeAnnotation:function(editor,annotation){annotation=Annotation.create(annotation);editor.applyOperation({type:"remove_annotation",annotation})},setAnnotation:function(editor,annotation,newProperties){annotation=Annotation.create(annotation);
newProperties=Annotation.createProperties(newProperties);editor.applyOperation({type:"set_annotation",properties:annotation,newProperties})},setAnnotations:function(editor){var value=editor.value,newProperties=Value.createProperties({annotations:1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]});value=pick(value,Object.keys(newProperties));editor.applyOperation({type:"set_value",properties:value,newProperties})}},SlateError=function(_Error){function SlateError(code){var attrs=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:{};classCallCheck(this,SlateError);var _this=possibleConstructorReturn(this,(SlateError.__proto__||Object.getPrototypeOf(SlateError)).call(this,code));_this.code=code;for(var key in attrs)_this[key]=attrs[key];Error.captureStackTrace?Error.captureStackTrace(_this,_this.constructor):_this.stack=Error().stack;return _this}inherits(SlateError,_Error);return SlateError}(Error),Commands$6={addMark:function(editor,mark){mark=Mark.create(mark);var value=editor.value,document=
value.document;value=value.selection;value.isExpanded?editor.addMarkAtRange(value,mark):value.marks?(mark=value.marks.add(mark),value=value.set("marks",mark),editor.select(value)):(mark=document.getActiveMarksAtRange(value).add(mark),value=value.set("marks",mark),editor.select(value))},addMarks:function(editor,marks){marks.forEach(function(mark){return editor.addMark(mark)})},delete:function(editor){editor.deleteAtRange(editor.value.selection);editor.moveToFocus()},deleteBackward:function(editor){var n=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteBackwardAtRange(selection,n)},deleteCharBackward:function(editor){var selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteCharBackwardAtRange(selection)},deleteLineBackward:function(editor){var selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteLineBackwardAtRange(selection)},deleteWordBackward:function(editor){var selection=
editor.value.selection;selection.isExpanded?editor.delete():editor.deleteWordBackwardAtRange(selection)},deleteForward:function(editor){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteForwardAtRange(selection,n)},deleteCharForward:function(editor){var selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteCharForwardAtRange(selection)},deleteLineForward:function(editor){var selection=
editor.value.selection;selection.isExpanded?editor.delete():editor.deleteLineForwardAtRange(selection)},deleteWordForward:function(editor){var selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteWordForwardAtRange(selection)},insertBlock:function(editor,block){deleteExpanded(editor);block=Block.create(block);editor.insertBlockAtRange(editor.value.selection,block);(block=editor.value.document.getNode(block.key))&&editor.moveToEndOfNode(block)},insertFragment:function(editor,
fragment){if(fragment.nodes.size){deleteExpanded(editor);var value=editor.value,_value=value;value=_value.document;var selection=_value.selection;_value=selection.start;var keys=Array.from(value.texts(),function(_ref){return slicedToArray(_ref,1)[0].key});editor.insertFragmentAtRange(selection,fragment);value=editor.value;value=value.document;var newTexts=value.getTexts().filter(function(n){return!keys.includes(n.key)});0!==newTexts.size&&(fragment=fragment.text.length,selection=value.getNode(_value.key)||
newTexts.first(),newTexts=newTexts.last()||selection,selection===newTexts?editor.moveTo(newTexts.key,fragment):(value=value.getCommonAncestor(selection.key,newTexts.key),_value=value.getOffset(selection.key)+(_value.key===selection.key?_value.offset:0),newTexts=value.getTextAtOffset(_value+fragment-1)||newTexts,editor.moveTo(newTexts.key,_value+fragment-value.getOffset(newTexts.key))))}},insertInline:function(editor,inline){deleteExpanded(editor);inline=Inline.create(inline);editor.insertInlineAtRange(editor.value.selection,
inline);(inline=editor.value.document.getNode(inline.key))&&editor.moveToEndOfNode(inline)},insertText:function(editor,text,marks){deleteExpanded(editor);var value=editor.value,document=value.document,selection=value.selection;marks=marks||selection.marks||document.getInsertMarksAtRange(selection);editor.withoutNormalizing(function(){editor.insertTextAtRange(selection,text,marks);selection.marks&&document!==editor.value.document&&editor.select({marks:null})})},removeMark:function(editor,mark){mark=
Mark.create(mark);var value=editor.value,document=value.document;value=value.selection;value.isExpanded?editor.removeMarkAtRange(value,mark):value.marks?(mark=value.marks.remove(mark),value=value.set("marks",mark),editor.select(value)):(mark=document.getActiveMarksAtRange(value).remove(mark),value=value.set("marks",mark),editor.select(value))},replaceMark:function(editor,oldMark,newMark){editor.removeMark(oldMark);editor.addMark(newMark)},setBlocks:function(editor,properties){editor.setBlocksAtRange(editor.value.selection,
properties)},setInlines:function(editor,properties){editor.setInlinesAtRange(editor.value.selection,properties)},splitBlock:function(editor){var depth=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;deleteExpanded(editor);var value=editor.value,selection=value.selection;value=value.document;value=selection.marks||value.getInsertMarksAtRange(selection);editor.splitBlockAtRange(selection,depth).moveToEnd();value&&0!==value.size&&editor.select({marks:value})},splitInline:function(editor,height){deleteExpanded(editor);
editor.splitInlineAtRange(editor.value.selection,height)},toggleMark:function(editor,mark){mark=Mark.create(mark);editor.value.activeMarks.has(mark)?editor.removeMark(mark):editor.addMark(mark)},unwrapBlock:function(editor,properties){editor.unwrapBlockAtRange(editor.value.selection,properties)},unwrapInline:function(editor,properties){editor.unwrapInlineAtRange(editor.value.selection,properties)},wrapBlock:function(editor,block){editor.wrapBlockAtRange(editor.value.selection,block)},wrapInline:function(editor,
inline){editor.wrapInlineAtRange(editor.value.selection,inline)},wrapText:function(editor,prefix){var suffix=2<arguments.length&&void 0!==arguments[2]?arguments[2]:prefix,selection=editor.value.selection;editor.wrapTextAtRange(selection,prefix,suffix);selection.isCollapsed&&editor.moveStartBackward(prefix.length);editor.moveEndBackward(suffix.length);selection.isForward!==editor.value.selection.isForward&&editor.flip()}},debug$2=Debug("slate:editor"),Editor=function(){function Editor(){var attrs=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};classCallCheck(this,Editor);var _options$controller=options.controller;_options$controller=void 0===_options$controller?this:_options$controller;var _options$construct=options.construct;_options$construct=void 0===_options$construct?!0:_options$construct;var _attrs$onChange=attrs.onChange;_attrs$onChange=void 0===_attrs$onChange?function(){}:_attrs$onChange;var _attrs$plugins=
attrs.plugins;_attrs$plugins=void 0===_attrs$plugins?[]:_attrs$plugins;var _attrs$readOnly=attrs.readOnly;_attrs$readOnly=void 0===_attrs$readOnly?!1:_attrs$readOnly;attrs=attrs.value;attrs=void 0===attrs?Value.create():attrs;this.controller=_options$controller;this.middleware={};this.onChange=_attrs$onChange;this.operations=immutable.List();this.value=this.readOnly=null;this.tmp={dirty:[],flushing:!1,merge:null,normalize:!0,save:!0};_options$controller=CorePlugin({plugins:_attrs$plugins});registerPlugin(this,
_options$controller);_options$construct&&(this.run("onConstruct"),this.setReadOnly(_attrs$readOnly),this.setValue(attrs,options))}createClass(Editor,[{key:"applyOperation",value:function(operation){var _this=this,operations=this.operations,controller=this.controller,value=this.value;isPlainObject(operation)&&(operation=_extends({},operation,{value}));operation=Operation.create(operation);this.withoutNormalizing(function(){controller.save(operation);value=_this.value});debug$2("apply",{operation});
this.value=operation.apply(value);this.operations=operations.push(operation);operations=getDirtyPaths(operation);var dirty=this.tmp.dirty.map(function(path){path=PathUtils.create(path);return PathUtils.transform(path,operation).toArray()}),pathIndex={};operations=Array.prototype.concat.apply(operations,dirty);this.tmp.dirty=[];operations.forEach(function(dirtyPath){var key=dirtyPath.join(",");pathIndex[key]||_this.tmp.dirty.push(dirtyPath);pathIndex[key]=!0});this.tmp.flushing||(this.tmp.flushing=
!0,Promise.resolve().then(function(){return _this.flush()}));return controller}},{key:"flush",value:function(){this.run("onChange");var controller=this.controller,change={value:this.value,operations:this.operations};this.operations=immutable.List();this.tmp.flushing=!1;this.onChange(change);return controller}},{key:"command",value:function(type){for(var _len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];_len=this.controller;if("function"===typeof type)return type.apply(void 0,
[_len].concat(args)),normalizeDirtyPaths(this),_len;debug$2("command",{type,args});this.run("onCommand",{type,args});normalizeDirtyPaths(this);return _len}},{key:"hasCommand",value:function(type){var controller=this.controller;return type in controller&&controller[type].__command}},{key:"hasQuery",value:function(type){var controller=this.controller;return type in controller&&controller[type].__query}},{key:"normalize",value:function(){var value=this.value,controller=this.controller,document=value.document;
document=document.getKeysToPathsTable();document=Object.values(document).map(PathUtils.create);this.tmp.dirty=this.tmp.dirty.concat(document);normalizeDirtyPaths(this);var selection=value.selection;document=value.document;selection.isUnset&&document.nodes.size&&controller.moveToStartOfDocument();return controller}},{key:"query",value:function(type){for(var _len2=arguments.length,args=Array(1<_len2?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];_len2=this.controller;if("function"===
typeof type)return type.apply(void 0,[_len2].concat(args));debug$2("query",{type,args});return this.run("onQuery",{type,args})}},{key:"registerCommand",value:function(type){var _this2=this,controller=this.controller;if(type in controller&&controller[type].__command)return controller;invariant(!(type in controller),"You cannot register a `"+type+"` command because it would overwrite an existing property of the `Editor`.");var method=function(){for(var _len3=arguments.length,args=Array(_len3),_key3=
0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return _this2.command.apply(_this2,[type].concat(args))};controller[type]=method;method.__command=!0;return controller}},{key:"registerQuery",value:function(type){var _this3=this,controller=this.controller;if(type in controller&&controller[type].__query)return controller;invariant(!(type in controller),"You cannot register a `"+type+"` query because it would overwrite an existing property of the `Editor`.");var method=function(){for(var _len4=arguments.length,
args=Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return _this3.query.apply(_this3,[type].concat(args))};controller[type]=method;method.__query=!0;return controller}},{key:"run",value:function(key){function next(){var fn=fns[i++];if(fn){for(var _len6=arguments.length,overrides=Array(_len6),_key6=0;_key6<_len6;_key6++)overrides[_key6]=arguments[_key6];overrides.length&&(args=overrides);return fn.apply(void 0,toConsumableArray(args).concat([controller,next]))}}for(var _len5=
arguments.length,args=Array(1<_len5?_len5-1:0),_key5=1;_key5<_len5;_key5++)args[_key5-1]=arguments[_key5];var controller=this.controller,fns=this.middleware[key]||[],i=0;Object.defineProperty(next,"change",{get:function(){invariant(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}});Object.defineProperty(next,"onChange",{get:function(){invariant(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}});
Object.defineProperty(next,"props",{get:function(){invariant(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}});Object.defineProperty(next,"schema",{get:function(){invariant(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}});Object.defineProperty(next,"stack",{get:function(){invariant(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}});
return next()}},{key:"setReadOnly",value:function(readOnly){this.readOnly=readOnly;return this}},{key:"setValue",value:function(value){var _options$normalize=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).normalize;_options$normalize=void 0===_options$normalize?value!==this.value:_options$normalize;this.value=value;_options$normalize&&this.normalize();return this}},{key:"withoutNormalizing",value:function(fn){var controller=this.controller,value=this.tmp.normalize;this.tmp.normalize=
!1;fn(controller);this.tmp.normalize=value;normalizeDirtyPaths(this);return controller}},{key:"change",value:function(fn){warning(!1,"As of Slate 0.43 the `change` object has been replaced with `editor`, so the `editor.change()` method is deprecated.`");for(var _len7=arguments.length,args=Array(1<_len7?_len7-1:0),_key7=1;_key7<_len7;_key7++)args[_key7-1]=arguments[_key7];fn.apply(void 0,[this.controller].concat(args))}},{key:"call",value:function(fn){warning(!1,"As of Slate 0.43 the `editor.call(fn)` method has been deprecated, please use `editor.command(fn)` instead.");
for(var _len8=arguments.length,args=Array(1<_len8?_len8-1:0),_key8=1;_key8<_len8;_key8++)args[_key8-1]=arguments[_key8];fn.apply(void 0,[this.controller].concat(args));return this.controller}},{key:"applyOperations",value:function(operations){var _this4=this;warning(!1,"As of Slate 0.43 the `applyOperations` method is deprecated, please apply each operation in a loop instead.");operations.forEach(function(op){return _this4.applyOperation(op)});return this.controller}},{key:"setOperationFlag",value:function(key,
value){warning(!1,"As of slate@0.41 the `change.setOperationFlag` method has been deprecated.");this.tmp[key]=value;return this}},{key:"getFlag",value:function(key){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};warning(!1,"As of slate@0.41 the `change.getFlag` method has been deprecated.");return void 0!==options[key]?options[key]:this.tmp[key]}},{key:"unsetOperationFlag",value:function(key){warning(!1,"As of slate@0.41 the `change.unsetOperationFlag` method has been deprecated.");
delete this.tmp[key];return this}},{key:"withoutNormalization",value:function(fn){warning(!1,"As of slate@0.41 the `change.withoutNormalization` helper has been renamed to `change.withoutNormalizing`.");return this.withoutNormalizing(fn)}},{key:"editor",get:function(){warning(!1,"As of Slate 0.43 the `change` object has been replaced with `editor`, so you don't need to access `change.editor`.");return this.controller}}]);return Editor}(),Leaf$1=function(_Record){function Leaf(){classCallCheck(this,
Leaf);return possibleConstructorReturn(this,(Leaf.__proto__||Object.getPrototypeOf(Leaf)).apply(this,arguments))}inherits(Leaf,_Record);createClass(Leaf,[{key:"updateMark",value:function(mark,newMark){var marks=this.marks;if(newMark.equals(mark)||!marks.has(mark))return this;marks=marks.withMutations(function(collection){collection.remove(mark).add(newMark)});return this.set("marks",marks)}},{key:"addMark",value:function(mark){return this.set("marks",this.marks.add(mark))}},{key:"addMarks",value:function(set$$1){return this.set("marks",
this.marks.union(set$$1))}},{key:"insertText",value:function(offset,string){var text=this.text;offset=text.slice(0,offset)+string+text.slice(offset);return this.set("text",offset)}},{key:"removeMark",value:function(mark){return this.set("marks",this.marks.remove(mark))}},{key:"toJSON",value:function(){return{object:this.object,text:this.text,marks:this.marks.toArray().map(function(m){return m.toJSON()})}}}],[{key:"create",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{};warning(!1,"As of slate@0.47 the `Leaf` model is deprecated.");if(Leaf.isLeaf(attrs))return attrs;"string"===typeof attrs&&(attrs={text:attrs});if(isPlainObject(attrs))return Leaf.fromJSON(attrs);throw Error("`Leaf.create` only accepts objects, strings or leaves, but you passed it: "+attrs);}},{key:"createLeaves",value:function(leaves){if(1>=leaves.size)return leaves;var invalid=!1,result=immutable.List().withMutations(function(cache){leaves.findLast(function(leaf,index){if(index=cache.first()){if(index.marks.equals(leaf.marks)){invalid=
!0;cache.set(0,index.set("text",""+leaf.text+index.text));return}if(""===index.text){invalid=!0;cache.set(0,leaf);return}if(""===leaf.text){invalid=!0;return}}cache.unshift(leaf)})});return invalid?result:leaves}},{key:"splitLeaves",value:function(leaves,offset){if(0>offset)return[immutable.List(),leaves];if(0===leaves.size)return[immutable.List(),immutable.List()];var endOffset=0,index=-1,left=void 0,right=void 0;leaves.find(function(leaf){index++;var startOffset=endOffset,text=leaf.text;endOffset+=
text.length;if(endOffset<offset||startOffset>offset)return!1;startOffset=offset-startOffset;left=leaf.set("text",text.slice(0,startOffset));right=leaf.set("text",text.slice(startOffset));return!0});return left?""===left.text?0===index?[immutable.List.of(left),leaves]:[leaves.take(index),leaves.skip(index)]:""===right.text?index===leaves.size-1?[leaves,immutable.List.of(right)]:[leaves.take(index+1),leaves.skip(index+1)]:[leaves.take(index).push(left),leaves.skip(index+1).unshift(right)]:[leaves,immutable.List()]}},
{key:"createList",value:function(){var attrs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(immutable.List.isList(attrs)||Array.isArray(attrs))return new immutable.List(attrs.map(Leaf.create));throw Error("`Leaf.createList` only accepts arrays or lists, but you passed it: "+attrs);}},{key:"fromJSON",value:function(object){var _object$text=object.text;object=object.marks;return new Leaf({text:void 0===_object$text?"":_object$text,marks:immutable.Set((void 0===object?[]:object).map(Mark.fromJSON))})}},
{key:"isLeafList",value:function(any){return immutable.List.isList(any)&&any.every(function(item){return Leaf.isLeaf(item)})}}]);return Leaf}(immutable.Record({marks:void 0,text:void 0}));Object.entries({Annotation,Block,Change,Decoration,Document:Document$jscomp$0,Editor,Inline,Leaf:Leaf$1,Mark,Node:Node$jscomp$0,Operation,Point,Range:Range$jscomp$0,Selection:Selection$jscomp$0,Text:Text$jscomp$0,Value}).forEach(function(_ref){_ref=slicedToArray(_ref,2);var obj=_ref[1];return mixin(create$2(_ref[0].toLowerCase()),
[obj])});var ModelInterface=function(){function ModelInterface(){classCallCheck(this,ModelInterface)}createClass(ModelInterface,[{key:"toJS",value:function(){return this.toJSON.apply(this,arguments)}}],[{key:"fromJS",value:function(){return this.fromJSON.apply(this,arguments)}}]);return ModelInterface}();mixin(ModelInterface,[Annotation,Block,Decoration,Document$jscomp$0,Inline,Leaf$1,Mark,Node$jscomp$0,Operation,Point,Range$jscomp$0,Selection$jscomp$0,Text$jscomp$0,Value]);var ENABLED=!0,LEAF=Symbol("LEAF"),
STORE_KEY=Symbol("STORE_KEY"),UNDEFINED=Symbol("undefined"),NULL=Symbol("null"),memoizeStore=new WeakMap,NodeInterface=function(){function NodeInterface(){classCallCheck(this,NodeInterface)}createClass(NodeInterface,[{key:"getFirstText",value:function(){if("text"===this.object)return this;var descendant=null,found=this.nodes.find(function(node){if("text"===node.object)return!0;descendant=node.getFirstText();return!!descendant});return descendant||found}},{key:"getKeysToPathsTable",value:function(){var ret=
defineProperty({},this.key,[]);this.nodes&&this.nodes.forEach(function(node,i){node=node.getKeysToPathsTable();for(var key in node){var path=node[key];warning(!(key in ret),'A node with a duplicate key of "'+key+'" was found! Duplicate keys are not allowed, you should use `node.regenerateKey` before inserting if you are reusing an existing node.');ret[key]=[i].concat(toConsumableArray(path))}});return ret}},{key:"getLastText",value:function(){if("text"===this.object)return this;var descendant=null,
found=this.nodes.findLast(function(node){return"text"===node.object?!0:descendant=node.getLastText()});return descendant||found}},{key:"getNode",value:function(path){path=this.resolvePath(path);return!path||"text"===this.object&&path.size?null:path.size?this.getDescendant(path):this}},{key:"getPath",value:function(key){if(immutable.List.isList(key))return key;if(Node$jscomp$0.isNode(key)&&this.descendants){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=
this.descendants()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref2=slicedToArray(_step.value,2),_path=_ref2[1];if(key===_ref2[0])return _path}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError;}}}return(key=this.getKeysToPathsTable()[key])?immutable.List(key):null}},{key:"getText",value:function(){return"text"===
this.object?this.text:this.nodes.reduce(function(memo,c){return memo+c.text},"")}},{key:"hasNode",value:function(path){return!!this.getNode(path)}},{key:"normalize",value:function(editor){return editor.run("normalizeNode",this)}},{key:"regenerateKey",value:function(){var key=KeyUtils.create();return this.set("key",key)}},{key:"resolvePath",value:function(path,index){"string"===typeof path?(path=this.getPath(path),null!=index&&(path=path.concat(index))):path=PathUtils.create(path);return path}},{key:"validate",
value:function(editor){return editor.run("validateNode",this)}}]);return NodeInterface}();memoize(NodeInterface.prototype,"getFirstText getKeysToPathsTable getLastText getText normalize validate".split(" "));mixin(NodeInterface,[Block,Document$jscomp$0,Inline,Text$jscomp$0]);var global$1="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},ElementInterface=function(){function ElementInterface(){classCallCheck(this,ElementInterface)}createClass(ElementInterface,
[{key:"addMark",value:function(path,mark){path=this.resolvePath(path);var node=this.assertDescendant(path);node=node.addMark(mark);return this.replaceNode(path,node)}},{key:"ancestors",value:function(path){return this.createIterable({path,direction:null,downward:!1,includeTargetAncestors:!0,includeRoot:!0})}},{key:"blocks",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},onlyLeaves=options.onlyLeaves,onlyRoots=options.onlyRoots,onlyTypes=options.onlyTypes,_match=
options.match;options=objectWithoutProperties(options,["onlyLeaves","onlyRoots","onlyTypes","match"]);return this.descendants(_extends({includeDocument:!1,includeInlines:!1,includeTexts:!1},options,{match:function(node,path){return onlyTypes&&!onlyTypes.includes(node.type)?!1:onlyRoots&&1!==path.size?!1:onlyLeaves&&!node.isLeafBlock()?!1:_match&&!_match(node,path)?!1:!0}}))}},{key:"createAnnotation",value:function(properties){properties=Annotation.createProperties(properties);return this.resolveAnnotation(properties)}},
{key:"createDecoration",value:function(properties){properties=Decoration.createProperties(properties);return this.resolveDecoration(properties)}},{key:"createIterable",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},_options$direction=options.direction,direction=void 0===_options$direction?"forward":_options$direction;_options$direction=options.downward;var downward=void 0===_options$direction?!0:_options$direction;_options$direction=options.upward;var upward=
void 0===_options$direction?!0:_options$direction;_options$direction=options.includeBlocks;var includeBlocks=void 0===_options$direction?!0:_options$direction;_options$direction=options.includeDocument;var includeDocument=void 0===_options$direction?!0:_options$direction;_options$direction=options.includeInlines;var includeInlines=void 0===_options$direction?!0:_options$direction;_options$direction=options.includeRoot;var includeRoot=void 0===_options$direction?!1:_options$direction;_options$direction=
options.includeTarget;var includeTarget=void 0===_options$direction?!!options.range:_options$direction;_options$direction=options.includeTargetAncestors;var includeTargetAncestors=void 0===_options$direction?!1:_options$direction;_options$direction=options.includeTexts;var includeTexts=void 0===_options$direction?!0:_options$direction;_options$direction=options.match;var match=void 0===_options$direction?null:_options$direction,root=this,targetPath=null,targetRange=null;options.range?(targetRange=
root.resolveRange(options.range),targetPath=root.resolvePath(targetRange.start.path)):options.path&&(targetPath=root.resolvePath(options.path));var targetNode=targetPath&&root.assertNode(targetPath),NativeSet="undefined"===typeof window?global$1.Set:window.Set;return defineProperty({},Symbol.iterator,function(){var visited=new NativeSet,startPath=targetRange&&targetRange.start.path,endPath=targetRange&&targetRange.end.path,path=targetPath,node=targetNode,includedTarget=!1,includedStart=!1,includingStart=
!1,result=function(){return path&&node?!includeRoot&&node===root||!includeBlocks&&"block"===node.object||!includeDocument&&"document"===node.object||!includeInlines&&"inline"===node.object||!includeTexts&&"text"===node.object||match&&!match(node,path)?next$jscomp$0():{value:[node,path],done:!1}:{done:!0}},next$jscomp$0=function next(){if(!path||!node)return result();if(startPath&&!includedStart){if(!includingStart)return includingStart=!0,path=PathUtils.create([]),node=root,result();if(path.size===
startPath.size-1)return includedStart=!0,path=targetPath,node=targetNode,next();path=startPath.slice(0,path.size+1);node=root.assertNode(path);return result()}if(includeTarget&&!includedTarget)return includedTarget=!0,result();if(endPath&&path.equals(endPath))return path=node=null,next();if(downward&&node.nodes&&node.nodes.size&&!visited.has(node))return visited.add(node),path=path.push("forward"===direction?0:node.nodes.size-1),node=root.assertNode(path),result();if("forward"===direction){var newPath=
PathUtils.increment(path),newNode=root.getNode(newPath);if(newNode)return path=newPath,node=newNode,result()}if("backward"===direction&&0!==path.last()&&(newPath=PathUtils.decrement(path),newNode=root.getNode(newPath)))return path=newPath,node=newNode,result();if(upward&&path.size){path=PathUtils.lift(path);node=root.assertNode(path);if(visited.has(node))return next();visited.add(node);return includeTargetAncestors?result():next()}node=path=null;return next()};return{next:next$jscomp$0}})}},{key:"createPoint",
value:function(properties){properties=Point.createProperties(properties);return this.resolvePoint(properties)}},{key:"createRange",value:function(properties){properties=Range$jscomp$0.createProperties(properties);return this.resolveRange(properties)}},{key:"createSelection",value:function(properties){properties=Selection$jscomp$0.createProperties(properties);return this.resolveSelection(properties)}},{key:"descendants",value:function(options){return this.createIterable(_extends({path:[]},options))}},
{key:"filterDescendants",value:function(){var predicate=0<arguments.length&&void 0!==arguments[0]?arguments[0]:identity,matches=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=this.descendants()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref3=slicedToArray(_step.value,2),node=_ref3[0];predicate(node,_ref3[1])&&matches.push(node)}}catch(err){_didIteratorError=!0,_iteratorError=
err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError;}}return immutable.List(matches)}},{key:"findDescendant",value:function(){var predicate=0<arguments.length&&void 0!==arguments[0]?arguments[0]:identity,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=this.descendants()[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=
!0){var _ref5=slicedToArray(_step2.value,2),node=_ref5[0];if(predicate(node,_ref5[1]))return node}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2;}}return null}},{key:"forEachDescendant",value:function(){var predicate=0<arguments.length&&void 0!==arguments[0]?arguments[0]:identity,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _iterator3=
this.descendants()[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done)&&!1!==predicate.apply(void 0,toConsumableArray(_step3.value));_iteratorNormalCompletion3=!0);}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3;}}}},{key:"getActiveMarksAtRange",value:function(range){range=this.resolveRange(range);if(range.isUnset)return immutable.Set();
if(range.isCollapsed)return this.getInsertMarksAtPoint(range.start);var _range2=range;range=_range2.start;var end=_range2.end;_range2=range.path;var startOffset=range.offset;range=end.path;var endOffset=end.offset;end=this.getDescendant(_range2);var endText=this.getDescendant(range);if(!_range2.equals(range)){for(;!_range2.equals(range)&&0===endOffset;)range=this.texts({path:range,direction:"backward"}),range=slicedToArray(range,1),range=slicedToArray(range[0],2),endText=range[0],range=range[1],endOffset=
endText.text.length;for(;!_range2.equals(range)&&startOffset===end.text.length;)_range2=this.texts({path:_range2}),_range2=slicedToArray(_range2,1),_range2=slicedToArray(_range2[0],2),end=_range2[0],_range2=_range2[1],startOffset=0}if(_range2.equals(range))return end.marks;end=end.marks;if(0===end.size)return immutable.Set();endText=end.intersect(endText.marks);if(0===endText.size)return endText;_range2=this.texts({path:_range2});_range2=slicedToArray(_range2,1);_range2=slicedToArray(_range2[0],2);
end=_range2[0];for(_range2=_range2[1];!_range2.equals(range);){if(0!==end.text.length&&(endText=endText.intersect(end.marks),0===endText.size))return immutable.Set();_range2=this.texts({path:_range2});_range2=slicedToArray(_range2,1);_range2=slicedToArray(_range2[0],2);end=_range2[0];_range2=_range2[1]}return endText}},{key:"getAncestors",value:function(path){path=this.ancestors(path);path=Array.from(path,function(_ref6){return slicedToArray(_ref6,1)[0]}).reverse();return immutable.List(path)}},{key:"getBlocks",
value:function(){var iterable=this.blocks({onlyLeaves:!0});iterable=Array.from(iterable,function(_ref8){return slicedToArray(_ref8,1)[0]});return immutable.List(iterable)}},{key:"getBlocksByType",value:function(type){type=this.blocks({onlyLeaves:!0,onlyTypes:[type]});type=Array.from(type,function(_ref10){return slicedToArray(_ref10,1)[0]});return immutable.List(type)}},{key:"getChild",value:function(path){path=this.resolvePath(path);return!path||1<path.size?null:this.nodes.get(path.first())}},{key:"getClosest",
value:function(path,predicate){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _iterator4=this.ancestors(path)[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var _ref13=slicedToArray(_step4.value,2),n=_ref13[0];if(predicate(n,_ref13[1]))return n}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4;
}}return null}},{key:"getClosestBlock",value:function(path){return this.getClosest(path,function(n){return"block"===n.object})}},{key:"getClosestInline",value:function(path){return this.getClosest(path,function(n){return"inline"===n.object})}},{key:"getClosestVoid",value:function(path,editor){invariant(!Value.isValue(editor),"As of Slate 0.42.0, the `node.getClosestVoid` method takes an `editor` instead of a `value`.");return this.getClosest(path,function(n){return editor.isVoid(n)})}},{key:"getCommonAncestor",
value:function(a,b){a=this.resolvePath(a);b=this.resolvePath(b);if(!a||!b)return null;a=PathUtils.relate(a,b);return this.getNode(a)}},{key:"getDecorations",value:function(editor){editor=editor.run("decorateNode",this);return editor=Decoration.createList(editor)}},{key:"getDepth",value:function(path){var startAt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return(path=this.resolvePath(path))?this.getNode(path)?path.size-1+startAt:null:null}},{key:"getDescendant",value:function(path){path=
this.resolvePath(path);if(!path||!path.size)return null;var node=this;path.forEach(function(index){node=node.getIn(["nodes",index]);return!!node});return node}},{key:"getDescendantsAtRange",value:function(range){range=this.descendants({range});range=Array.from(range,function(_ref14){return slicedToArray(_ref14,1)[0]});return immutable.List(range)}},{key:"getFragmentAtRange",value:function(range){range=this.resolveRange(range);if(range.isUnset)return Document$jscomp$0.create();var start=range.start,
end=range.end;range=this;for(var targetPath=end.path,targetPosition=end.offset,side="end";targetPath.size;){var index=targetPath.last();range=range.splitNode(targetPath,targetPosition);targetPosition=index+1;targetPath=PathUtils.lift(targetPath);targetPath.size||"end"!==side||(targetPath=start.path,targetPosition=start.offset,side="start")}start=start.path.first()+1;end=end.path.first()+2;range=range.nodes.slice(start,end);return Document$jscomp$0.create({nodes:range})}},{key:"getFurthest",value:function(path){var predicate=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:identity,iterable=this.ancestors(path);iterable=Array.from(iterable).reverse();var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _iterator5=iterable[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var _ref17=slicedToArray(_step5.value,2),n=_ref17[0];if(predicate(n,_ref17[1]))return n}}catch(err){_didIteratorError5=!0,_iteratorError5=
err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5;}}return null}},{key:"getFurthestBlock",value:function(path){return this.getFurthest(path,function(n){return"block"===n.object})}},{key:"getFurthestChild",value:function(path){return(path=this.resolvePath(path))&&path.size?this.nodes.get(path.first()):null}},{key:"getFurthestInline",value:function(path){return this.getFurthest(path,function(n){return"inline"===n.object})}},
{key:"getInlines",value:function(){var iterable=this.inlines({onlyLeaves:!0});iterable=Array.from(iterable,function(_ref18){return slicedToArray(_ref18,1)[0]});return immutable.List(iterable)}},{key:"getInlinesByType",value:function(type){type=this.inlines({onlyLeaves:!0,onlyTypes:[type]});type=Array.from(type,function(_ref20){return slicedToArray(_ref20,1)[0]});return immutable.List(type)}},{key:"getInsertMarksAtPoint",value:function(point){point=this.resolvePoint(point);var path=point.path,offset=
point.offset;point=this.getDescendant(path);if(0!==offset)return point.marks;var blockPath=offset=void 0,_iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _iterator6=this.ancestors(path)[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var _entry=slicedToArray(_step6.value,2),n=_entry[0],p=_entry[1];"block"===n.object&&(offset=n,blockPath=p)}}catch(err){_didIteratorError6=!0,_iteratorError6=
err}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6;}}_iterator6=PathUtils.drop(path,blockPath.size);_iterator6=offset.texts({path:_iterator6,direction:"backward"});return(_iterator6=slicedToArray(_iterator6,1)[0])?slicedToArray(_iterator6,1)[0].marks:point.marks}},{key:"getInsertMarksAtRange",value:function(range){range=this.resolveRange(range);var start=range.start;return range.isUnset?immutable.Set():range.isCollapsed?
this.getInsertMarksAtPoint(start):this.getDescendant(start.path).marks}},{key:"getLeafBlocksAtRange",value:function(range){range=this.blocks({range,onlyLeaves:!0});range=Array.from(range,function(_ref22){return slicedToArray(_ref22,1)[0]});return immutable.List(range)}},{key:"getLeafInlinesAtRange",value:function(range){range=this.inlines({range,onlyLeaves:!0});range=Array.from(range,function(_ref24){return slicedToArray(_ref24,1)[0]});return immutable.List(range)}},{key:"getNodesToPathsMap",value:function(){var map=
"undefined"===typeof window?new global$1.Map:new window.Map;map.set(this,PathUtils.create([]));this.forEachDescendant(function(node,path){map.set(node,path)});return map}},{key:"getMarks",value:function(){var iterable=this.marks();iterable=Array.from(iterable,function(_ref26){return slicedToArray(_ref26,1)[0]});return immutable.OrderedSet(iterable)}},{key:"getMarksAtRange",value:function(range){range=this.marks({range});range=Array.from(range,function(_ref28){return slicedToArray(_ref28,1)[0]});return immutable.OrderedSet(range)}},
{key:"getMarksByType",value:function(type){type=this.marks({onlyTypes:[type]});type=Array.from(type,function(_ref30){return slicedToArray(_ref30,1)[0]});return immutable.OrderedSet(type)}},{key:"getNextBlock",value:function(path){path=this.blocks({path,onlyLeaves:!0});return(path=slicedToArray(path,1)[0])?path[0]:null}},{key:"getNextNode",value:function(path){path=this.createIterable({path,downward:!1});return(path=slicedToArray(path,1)[0])?path[0]:null}},{key:"getNextSibling",value:function(path){path=
this.siblings(path);return(path=slicedToArray(path,1)[0])?path[0]:null}},{key:"getNextText",value:function(path){path=this.texts({path});return(path=slicedToArray(path,1)[0])?path[0]:null}},{key:"getOffset",value:function(path){path=this.resolvePath(path);this.assertDescendant(path);var index=path.first(),offset=this.nodes.slice(0,index).reduce(function(memo,n){return memo+n.text.length},0);return 1===path.size?offset:offset+this.nodes.get(index).getOffset(PathUtils.drop(path))}},{key:"getOffsetAtRange",
value:function(range){range=this.resolveRange(range);if(range.isUnset)throw Error("The range cannot be unset to calculcate its offset.");if(range.isExpanded)throw Error("The range must be collapsed to calculcate its offset.");range=range.start;return this.getOffset(range.path)+range.offset}},{key:"getParent",value:function(path){path=this.resolvePath(path);if(!path||!path.size)return null;path=PathUtils.lift(path);return this.getNode(path)}},{key:"getPreviousBlock",value:function(path){path=this.blocks({path,
onlyLeaves:!0,direction:"backward"});return(path=slicedToArray(path,1)[0])?path[0]:null}},{key:"getPreviousNode",value:function(path){path=this.createIterable({path,downward:!1,direction:"backward"});return(path=slicedToArray(path,1)[0])?path[0]:null}},{key:"getPreviousSibling",value:function(path){path=this.siblings(path,{direction:"backward"});return(path=slicedToArray(path,1)[0])?path[0]:null}},{key:"getPreviousText",value:function(path){path=this.texts({path,direction:"backward"});return(path=
slicedToArray(path,1)[0])?path[0]:null}},{key:"getRootBlocksAtRange",value:function(range){range=this.blocks({range,onlyRoots:!0});range=Array.from(range,function(_ref32){return slicedToArray(_ref32,1)[0]});return immutable.List(range)}},{key:"getRootInlinesAtRange",value:function(range){range=this.inlines({range,onlyRoots:!0});range=Array.from(range,function(_ref34){return slicedToArray(_ref34,1)[0]});return immutable.List(range)}},{key:"getTextAtOffset",value:function(offset){if(0===offset)return this.getFirstText();
if(offset===this.text.length)return this.getLastText();if(0>offset||offset>this.text.length)return null;var length=0,_iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _iterator7=this.texts()[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){var node=slicedToArray(_step7.value,1)[0];length+=node.text.length;if(length>offset)return node}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{!_iteratorNormalCompletion7&&
_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7;}}return null}},{key:"getTextDirection",value:function(){var dir=getDirection(this.text);return"neutral"===dir?null:dir}},{key:"getTexts",value:function(){var iterable=this.texts();iterable=Array.from(iterable,function(_ref38){return slicedToArray(_ref38,1)[0]});return immutable.List(iterable)}},{key:"getTextsAtRange",value:function(range){range=this.texts({range});range=Array.from(range,function(_ref40){return slicedToArray(_ref40,
1)[0]});return immutable.List(range)}},{key:"hasBlockChildren",value:function(){return!(!this.nodes||!this.nodes.find(function(n){return"block"===n.object}))}},{key:"hasChild",value:function(path){return!!this.getChild(path)}},{key:"hasInlineChildren",value:function(){return!(!this.nodes||!this.nodes.find(function(n){return"inline"===n.object||"text"===n.object}))}},{key:"hasDescendant",value:function(path){return!!this.getDescendant(path)}},{key:"hasVoidParent",value:function(path,editor){invariant(!Value.isValue(editor),
"As of Slate 0.42.0, the `node.hasVoidParent` method takes an `editor` instead of a `value`.");return!!this.getClosestVoid(path,editor)}},{key:"inlines",value:function(){var _this=this,options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},onlyLeaves=options.onlyLeaves,onlyRoots=options.onlyRoots,onlyTypes=options.onlyTypes,_match2=options.match;options=objectWithoutProperties(options,["onlyLeaves","onlyRoots","onlyTypes","match"]);return this.descendants(_extends({includeBlocks:!1,includeTexts:!1,
includeDocument:!1},options,{match:function(node,path){return onlyTypes&&!onlyTypes.includes(node.type)?!1:onlyLeaves&&!node.isLeafInline()?!1:onlyRoots&&"block"!==_this.getParent(path).object?!1:_match2&&!_match2(node,path)?!1:!0}}))}},{key:"insertNode",value:function(path,node){path=this.resolvePath(path);var index=path.last();path=PathUtils.lift(path);var parent=this.assertNode(path);node=parent.nodes.splice(index,0,node);parent=parent.set("nodes",node);return this.replaceNode(path,parent)}},{key:"insertText",
value:function(path,offset,text){path=this.resolvePath(path);var node=this.assertDescendant(path);node=node.insertText(offset,text);return this.replaceNode(path,node)}},{key:"isLeafBlock",value:function(){return"block"!==this.object||this.nodes.some(function(n){return"block"===n.object})?!1:!0}},{key:"isLeafInline",value:function(){return"inline"!==this.object||this.nodes.some(function(n){return"inline"===n.object})?!1:!0}},{key:"isInRange",value:function(path,range){path=this.resolvePath(path);range=
this.resolveRange(range);if(range.isUnset)return!1;var toStart=PathUtils.compare(path,range.start.path);path=PathUtils.compare(path,range.end.path);return-1!==toStart&&1!==path}},{key:"mapChildren",value:function(){var _this2=this,predicate=0<arguments.length&&void 0!==arguments[0]?arguments[0]:identity,nodes=this.nodes;nodes.forEach(function(node,i){i=predicate(node,i,_this2.nodes);i!==node&&(nodes=nodes.set(i.key,i))});return this.set("nodes",nodes)}},{key:"mapDescendants",value:function(){var _this3=
this,predicate=0<arguments.length&&void 0!==arguments[0]?arguments[0]:identity,nodes=this.nodes;nodes.forEach(function(node,index){var ret=node;"text"!==ret.object&&(ret=ret.mapDescendants(predicate));ret=predicate(ret,index,_this3.nodes);ret!==node&&(nodes=nodes.set(index,ret))});return this.set("nodes",nodes)}},{key:"marks",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},_options$onlyTypes=options.onlyTypes,onlyTypes=void 0===_options$onlyTypes?null:_options$onlyTypes,
match=options.match;options=objectWithoutProperties(options,["onlyTypes","match"]);var texts=this.texts(options);return defineProperty({},Symbol.iterator,function(){var iterator=texts[Symbol.iterator](),node=null,path=null,remaining=[];return{next:function next(){if(remaining.length){var mark=remaining.shift();return onlyTypes&&!onlyTypes.includes(mark.type)||match&&!match(mark,node,path)?next():{value:[mark,node,path],done:!1}}mark=iterator.next();if(mark.done)return{done:!0};mark=slicedToArray(mark.value,
2);node=mark[0];path=mark[1];remaining=node.marks.toArray();return next()}}})}},{key:"mergeNode",value:function(path){var b=this.assertNode(path);path=this.resolvePath(path);if(0===path.last())throw Error("Unable to merge node because it has no previous sibling: "+b);var withPath=PathUtils.decrement(path),a=this.assertNode(withPath);if(a.object!==b.object)throw Error("Unable to merge two different kinds of nodes: "+a+" and "+b);b="text"===a.object?a.mergeText(b):a.set("nodes",a.nodes.concat(b.nodes));
path=this.removeNode(path);path=path.removeNode(withPath);return path=path.insertNode(withPath,b)}},{key:"moveNode",value:function(path,newPath){var newIndex=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,node=this.assertNode(path);path=this.resolvePath(path);newPath=this.resolvePath(newPath,newIndex);newIndex=PathUtils.lift(newPath);this.assertNode(newIndex);newIndex=Operation.create({type:"move_node",path,newPath});newPath=PathUtils.transform(path,newIndex).first();newIndex=this.removeNode(path);
return newIndex=newIndex.insertNode(newPath,node)}},{key:"removeMark",value:function(path,mark){path=this.resolvePath(path);var node=this.assertDescendant(path);node=node.removeMark(mark);return this.replaceNode(path,node)}},{key:"removeNode",value:function(path){this.assertDescendant(path);path=this.resolvePath(path);path=path.flatMap(function(x){return["nodes",x]});return this.deleteIn(path)}},{key:"removeText",value:function(path,offset,text){var node=this.assertDescendant(path);node=node.removeText(offset,
text.length);return this.replaceNode(path,node)}},{key:"replaceNode",value:function(path,node){path=this.resolvePath(path);if(!path)throw Error("Unable to replace a node because it could not be found in the first place: "+path);if(!path.size)return node;this.assertNode(path);path=path.flatMap(function(x){return["nodes",x]});return this.setIn(path,node)}},{key:"resolveAnnotation",value:function(annotation){annotation=Annotation.create(annotation);return annotation=annotation.normalize(this)}},{key:"resolveDecoration",
value:function(decoration){decoration=Decoration.create(decoration);return decoration=decoration.normalize(this)}},{key:"resolvePoint",value:function(point){point=Point.create(point);return point=point.normalize(this)}},{key:"resolveRange",value:function(range){range=Range$jscomp$0.create(range);return range=range.normalize(this)}},{key:"resolveSelection",value:function(selection){selection=Selection$jscomp$0.create(selection);return selection=selection.normalize(this)}},{key:"setNode",value:function(path,
properties){var node=this.assertNode(path);node=node.merge(properties);return this.replaceNode(path,node)}},{key:"setMark",value:function(path,properties,newProperties){path=this.resolvePath(path);var node=this.assertDescendant(path);node=node.setMark(properties,newProperties);return this.replaceNode(path,node)}},{key:"siblings",value:function(path,options){return this.createIterable(_extends({path,upward:!1,downward:!1},options))}},{key:"splitNode",value:function(path,position,properties){var child=
this.assertNode(path);path=this.resolvePath(path);if("text"===child.object){var a=child.splitText(position);position=slicedToArray(a,2);a=position[0];position=position[1]}else a=child.nodes.take(position),position=child.nodes.skip(position),a=child.set("nodes",a),position=child.set("nodes",position).regenerateKey();properties&&"text"!==child.object&&(position=position.merge(properties));properties=this.removeNode(path);properties=properties.insertNode(path,position);return properties=properties.insertNode(path,
a)}},{key:"texts",value:function(options){return this.descendants(_extends({includeBlocks:!1,includeInlines:!1,includeDocument:!1},options))}},{key:"getBlocksAtRange",value:function(range){warning(!1,"As of slate@0.44 the `node.getBlocksAtRange` method has been renamed to `getLeafBlocksAtRange`.");return this.getLeafBlocksAtRange(range)}},{key:"getBlocksAtRangeAsArray",value:function(range){warning(!1,"As of slate@0.44 the `node.getBlocksAtRangeAsArray` method has been renamed to `getLeafBlocksAtRangeAsArray`.");
return this.getLeafBlocksAtRangeAsArray(range)}},{key:"getInlinesAtRange",value:function(range){warning(!1,"As of slate@0.44 the `node.getInlinesAtRange` method has been renamed to `getLeafInlinesAtRange`.");return this.getLeafInlinesAtRange(range)}},{key:"getInlinesAtRangeAsArray",value:function(range){warning(!1,"As of slate@0.44 the `node.getInlinesAtRangeAsArray` method has been renamed to `getLeafInlinesAtRangeAsArray`.");return this.getLeafInlinesAtRangeAsArray(range)}},{key:"getNextTextAndPath",
value:function(path){warning(!1,"As of slate@0.47, the `getNextTextAndPath` method has been renamed to `getNextTextEntry`.");return this.getNextTextEntry(path)}},{key:"getNextDeepMatchingNodeAndPath",value:function(path){var iterator=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0};warning(!1,"As of slate@0.47, the `getNextDeepMatchingNodeAndPath` method is deprecated.");var match=this.getNextMatchingNodeAndPath(path);if(!match)return null;var _match3=slicedToArray(match,
2),nextNode=_match3[0],nextPath=_match3[1],childMatch=void 0;for(_match3=function(){return childMatch="text"!==nextNode.object&&nextNode.findFirstDescendantAndPath(iterator,nextPath)};_match3(childMatch);){var _childMatch2=slicedToArray(childMatch,2);nextNode=_childMatch2[0];nextPath=_childMatch2[1]}return nextNode?iterator(nextNode)?[nextNode,nextPath]:this.getNextDeepMatchingNodeAndPath(match[1],iterator):null}},{key:"getPreviousTextAndPath",value:function(path){warning(!1,"As of slate@0.47, the `getPreviousTextAndPath` method has been renamed to `getPreviousTextEntry`.");
return this.getPreviousTextEntry(path)}},{key:"findFirstDescendantAndPath",value:function(iterator,pathToThisNode){warning(!1,"As of slate@0.47, the `findFirstDescendantAndPath` method is deprecated.");return this.findDescendantAndPath(iterator,pathToThisNode,!1)}},{key:"getPreviousMatchingNodeAndPath",value:function(path){var iterator=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0};warning(!1,"As of slate@0.47, the `getPreviousMatchingNodeAndPath` method is deprecated.");
if(!path)return null;for(var i=path.size;0<i;i--){var p=path.slice(0,i);if(0!==p.last()){p=PathUtils.decrement(p);for(var previousNode=this.getNode(p);previousNode&&!iterator(previousNode);)p=PathUtils.decrement(p),previousNode=this.getNode(p);if(previousNode)return[previousNode,p]}}return null}},{key:"getPreviousDeepMatchingNodeAndPath",value:function(path){var iterator=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0};warning(!1,"As of slate@0.47, the `getPreviousDeepMatchingNodeAndPath` method is deprecated.");
var match=this.getPreviousMatchingNodeAndPath(path);if(!match)return null;var _match4=slicedToArray(match,2),previousNode=_match4[0],previousPath=_match4[1],childMatch=void 0;for(_match4=function(){return childMatch="text"!==previousNode.object&&previousNode.findLastDescendantAndPath(iterator,previousPath)};_match4(childMatch);){var _childMatch4=slicedToArray(childMatch,2);previousNode=_childMatch4[0];previousPath=_childMatch4[1]}return previousNode?iterator(previousNode)?[previousNode,previousPath]:
this.getPreviousDeepMatchingNodeAndPath(match[1],iterator):null}},{key:"findLastDescendantAndPath",value:function(iterator,pathToThisNode){warning(!1,"As of slate@0.47, the `findLastDescendantAndPath` method is deprecated.");return this.findDescendantAndPath(iterator,pathToThisNode,!0)}},{key:"findDescendantAndPath",value:function(iterator){var pathToThisNode=1<arguments.length&&void 0!==arguments[1]?arguments[1]:PathUtils.create([]),findLast=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
!1;warning(!1,"As of slate@0.47, the `findDescendantAndPath` method is deprecated.");var found=void 0,foundPath=void 0;this.forEachDescendantWithPath(function(node,path,nodes){if(iterator(node,path,nodes))return found=node,foundPath=path,!1},pathToThisNode,findLast);return found?[found,foundPath]:null}},{key:"forEachDescendantWithPath",value:function(iterator){var path=1<arguments.length&&void 0!==arguments[1]?arguments[1]:PathUtils.create([]),findLast=arguments[2];warning(!1,"As of slate@0.47, the `forEachDescendantWithPath` method is deprecated.");
var nodes=this.nodes,ret=void 0;findLast&&(nodes=nodes.reverse());nodes.forEach(function(child,i){i=path.concat(i);if(!1===iterator(child,i,nodes))return ret=!1;if("text"!==child.object)return ret=child.forEachDescendantWithPath(iterator,i,findLast)});return ret}},{key:"getNextMatchingNodeAndPath",value:function(path){var iterator=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0};warning(!1,"As of slate@0.47, the `getNextMatchingNodeAndPath` method is deprecated.");if(!path)return null;
for(var i=path.size;0<i;i--){var p=path.slice(0,i);p=PathUtils.increment(p);for(var nextNode=this.getNode(p);nextNode&&!iterator(nextNode);)p=PathUtils.increment(p),nextNode=this.getNode(p);if(nextNode)return[nextNode,p]}return null}},{key:"getSelectionIndexes",value:function(range){var isSelected=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;warning(!1,"As of slate@0.47, the `getSelectionIndexes` method is deprecated.");var start=range.start,end=range.end;if(!isSelected||range.isUnset)return null;
if(start.path.equals(end.path))return isSelected=(isSelected=this.getFurthestAncestor(start.path))?this.nodes.indexOf(isSelected):null,{start:isSelected,end:isSelected+1};var startIndex=null,endIndex=null;this.nodes.forEach(function(child,i){"text"===child.object?(null==startIndex&&child.key===start.key&&(startIndex=i),null==endIndex&&child.key===end.key&&(endIndex=i+1)):(null==startIndex&&child.hasDescendant(start.key)&&(startIndex=i),null==endIndex&&child.hasDescendant(end.key)&&(endIndex=i+1));
return null==startIndex||null==endIndex});isSelected&&null==startIndex&&(startIndex=0);isSelected&&null==endIndex&&(endIndex=this.nodes.size);return null==startIndex?null:{start:startIndex,end:endIndex}}},{key:"getTextsBetweenPositionsAsArray",value:function(startPath,endPath){warning(!1,"As of slate@0.47, the `getTextsBetweenPositionsAsArray` method is deprecated.");startPath=this.resolvePath(startPath);endPath=this.resolvePath(endPath);return this.getTextsBetweenPathPositionsAsArray(startPath,endPath)}},
{key:"getOrderedMarksBetweenPositions",value:function(startPath,startOffset,endPath,endOffset){warning(!1,"As of slate@0.47, the `getOrderedMarksBetweenPositions` method is deprecated.");startPath=this.resolvePath(startPath);endPath=this.resolvePath(endPath);startOffset=this.getDescendant(startPath);if(PathUtils.isEqual(startPath,endPath))return startOffset.marks;var texts=this.getTextsBetweenPathPositionsAsArray(startPath,endPath);return immutable.OrderedSet().withMutations(function(result){texts.forEach(function(text){result.union(text.marks)})})}},
{key:"getTextsBetweenPathPositionsAsArray",value:function(startPath,endPath){warning(!1,"As of slate@0.47, the `getTextsBetweenPathPositionsAsArray` method is deprecated.");if(startPath&&endPath&&PathUtils.isEqual(startPath,endPath))return[this.getDescendant(startPath)];if(!startPath&&!endPath)return this.getTextsAsArray();var startIndex=startPath?startPath.get(0,0):0,endIndex=endPath?endPath.get(0,this.nodes.size-1):this.nodes.size-1,array=[];this.nodes.slice(startIndex,endIndex+1).forEach(function(node,
i){if("text"===node.object)array.push(node);else{var childStartPath=startPath&&0===i?PathUtils.drop(startPath):null;i=endPath&&i===endIndex-startIndex?PathUtils.drop(endPath):null;array=array.concat(node.getTextsBetweenPathPositionsAsArray(childStartPath,i))}});return array}},{key:"getFurthestAncestor",value:function(path){warning(!1,"As of slate@0.47, the `getFurthestAncestor` method has been renamed to `getFurthestChild`.");return this.getFurthestChild(path)}},{key:"getLeafBlocksAtRangeAsArray",
value:function(range){warning(!1,"As of slate@0.47, the `getLeafBlocksAtRangeAsArray` method is deprecated.");range=this.resolveRange(range);return range.isUnset?[]:this.getLeafBlocksBetweenPathPositionsAsArray(range.start.path,range.end.path)}},{key:"getLeafBlocksBetweenPathPositionsAsArray",value:function(startPath,endPath){warning(!1,"As of slate@0.47, the `getLeafBlocksBetweenPathPositionsAsArray` method is deprecated.");if(startPath&&endPath&&PathUtils.isEqual(startPath,endPath))return[this.getClosestBlock(startPath)];
if(!startPath&&!endPath)return this.getBlocksAsArray();var startIndex=startPath?startPath.get(0,0):0,endIndex=endPath?endPath.get(0,this.nodes.size-1):this.nodes.size-1,array=[];this.nodes.slice(startIndex,endIndex+1).forEach(function(node,i){if("block"===node.object)if(node.isLeafBlock())array.push(node);else{var childStartPath=startPath&&0===i?PathUtils.drop(startPath):null;i=endPath&&i===endIndex-startIndex?PathUtils.drop(endPath):null;array=array.concat(node.getLeafBlocksBetweenPathPositionsAsArray(childStartPath,
i))}});return array}},{key:"getBlocksAsArray",value:function(){warning(!1,"As of slate@0.47, the `getBlocksAsArray` method is deprecated.");var iterable=this.blocks({onlyLeaves:!0});return Array.from(iterable,function(_ref43){return slicedToArray(_ref43,1)[0]})}},{key:"getBlocksByTypeAsArray",value:function(type){warning(!1,"As of slate@0.47, the `getBlocksByTypeAsArray` method is deprecated.");type=this.blocks({onlyLeaves:!0,onlyTypes:[type]});return Array.from(type,function(_ref45){return slicedToArray(_ref45,
1)[0]})}},{key:"getFurthestOnlyChildAncestor",value:function(path){warning(!1,"As of slate@0.47, the `getFurthestOnlyChildAncestor` method is deprecated.");return(path=this.getAncestors(path))?path.rest().reverse().takeUntil(function(p){return 1<p.nodes.size}).last()||null:null}},{key:"getInlinesAsArray",value:function(){warning(!1,"As of slate@0.47, the `getInlinesAsArray` method is deprecated.");return Array.from(this.inlines({onlyLeaves:!0}),function(_ref47){return slicedToArray(_ref47,1)[0]})}},
{key:"getInlinesByTypeAsArray",value:function(type){warning(!1,"As of slate@0.47, the `getInlinesByTypeAsArray` method is deprecated.");return Array.from(this.inlines({onlyLeaves:!0,onlyTypes:[type]}),function(_ref49){return slicedToArray(_ref49,1)[0]})}},{key:"getLeafInlinesAtRangeAsArray",value:function(range){var _this4=this;warning(!1,"As of slate@0.47, the `getLeafInlinesAtRangeAsArray` method is deprecated.");range=this.resolveRange(range);return range.isUnset?[]:this.getTextsAtRangeAsArray(range).map(function(text){return _this4.getClosestInline(text.key)}).filter(function(exists){return exists})}},
{key:"getOrderedMarks",value:function(){warning(!1,"As of slate@0.47, the `getOrderedMarks` method has been folded into `getMarks`, which will now return an ordered set.");return this.getMarks()}},{key:"getOrderedMarksAtRange",value:function(range){warning(!1,"As of slate@0.47, the `getOrderedMarksAtRange` method has been folded into `getMarksAtRange`, which will now return an ordered set.");return this.getMarksAtRange(range)}},{key:"getOrderedMarksByType",value:function(type){warning(!1,"As of slate@0.47, the `getOrderedMarksByType` method has been folded into `getMarksByType`, which will now return an ordered set.");
return this.getMarksByType(type)}},{key:"getMarksByTypeAsArray",value:function(type){warning(!1,"As of slate@0.47, the `getMarksByTypeAsArray` method is deprecated.");return this.nodes.reduce(function(memo,node){return"text"===node.object?memo.concat(node.marks.filter(function(m){return m.type===type})):memo.concat(node.getMarksByTypeAsArray(type))},[])}},{key:"getMarksAsArray",value:function(){var _ref53;warning(!1,"As of slate@0.47, the `getMarksAsArray` method is deprecated.");var result=[],_iteratorNormalCompletion8=
!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _iterator8=this.texts()[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){var node=slicedToArray(_step8.value,1)[0];result.push(node.marks.toArray())}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{!_iteratorNormalCompletion8&&_iterator8.return&&_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8;}}return(_ref53=[]).concat.apply(_ref53,
result)}},{key:"getRootInlinesAtRangeAsArray",value:function(range){var _this5=this;warning(!1,"As of slate@0.47, the `getRootInlinesAtRangeAsArray` method is deprecated.");range=this.resolveRange(range);return range.isUnset?immutable.List():this.getTextsAtRangeAsArray(range).map(function(text){return _this5.getFurthestInline(text.key)}).filter(function(exists){return exists})}},{key:"getTextsAsArray",value:function(){warning(!1,"As of slate@0.47, the `getTextsAsArray` method is deprecated.");var iterable=
this.texts();return Array.from(iterable,function(_ref54){return slicedToArray(_ref54,1)[0]})}},{key:"getTextsAtRangeAsArray",value:function(range){warning(!1,"As of slate@0.47, the `getTextsAtRangeAsArray` method is deprecated.");range=this.texts({range});return Array.from(range,function(_ref56){return slicedToArray(_ref56,1)[0]})}},{key:"getMarksAtPosition",value:function(path,offset){warning(!1,"As of slate@0.47, the `getMarksAtPosition` method is deprecated.");path=this.resolvePath(path);var currentMarks=
this.getDescendant(path).marks;if(0!==offset)return immutable.OrderedSet(currentMarks);offset=this.getClosestBlock(path);if(""===offset.text)return immutable.OrderedSet(currentMarks);path=this.texts({path,direction:"backward"});path=slicedToArray(path,1)[0];if(!path)return immutable.OrderedSet();path=slicedToArray(path,2);var previousText=path[0];return offset.hasDescendant(path[1])?immutable.OrderedSet(previousText.marks):immutable.OrderedSet(currentMarks)}},{key:"getNodesAtRange",value:function(range){warning(!1,
"As of slate@0.47, the `getNodesAtRange` method has been renamed to `getDescendantsAtRange`.");range=this.descendants({range});range=Array.from(range,function(_ref58){return slicedToArray(_ref58,1)[0]});return immutable.List(range)}},{key:"isNodeInRange",value:function(path,range){warning(!1,"As of slate@0.47, the `isNodeInRange` method has been renamed to `isInRange`.");return this.isInRange(path,range)}},{key:"text",get:function(){return this.getText()}}]);return ElementInterface}(),ASSERTS="Child Depth Descendant Node Parent Path".split(" "),
_loop$1=function(method){ElementInterface.prototype["assert"+method]=function(path){for(var _len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];_len=this["get"+method].apply(this,[path].concat(args));if(null==_len)throw Error("`Node.assert"+method+"` could not find node with path or key: "+path);return _len}},_iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _iterator9=ASSERTS[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=
(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0)_loop$1(_step9.value)}catch(err){_didIteratorError9=!0,_iteratorError9=err}finally{try{!_iteratorNormalCompletion9&&_iterator9.return&&_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9;}}memoize(ElementInterface.prototype,"getBlocksAsArray getBlocksByTypeAsArray getDecorations getFragmentAtRange getInlinesAsArray getInlinesByTypeAsArray getInsertMarksAtRange getLeafBlocksAtRangeAsArray getLeafBlocksAtRangeAsArray getLeafInlinesAtRangeAsArray getMarksAsArray getMarksAtPosition getMarksByTypeAsArray getNextBlock getNodesAtRange getNodesToPathsMap getOffset getOffsetAtRange getOrderedMarksBetweenPositions getPreviousBlock getRootBlocksAtRange getRootInlinesAtRangeAsArray getTextAtOffset getTextDirection getTextsAsArray getTextsBetweenPathPositionsAsArray".split(" "));
mixin(ElementInterface,[Block,Document$jscomp$0,Inline]);var RangeInterface=function(){function RangeInterface(){classCallCheck(this,RangeInterface)}createClass(RangeInterface,[{key:"flip",value:function(){return this.setPoints([this.focus,this.anchor])}},{key:"moveForward",value:function(n){return this.updatePoints(function(point){return point.moveForward(n)})}},{key:"moveBackward",value:function(n){return this.updatePoints(function(point){return point.moveBackward(n)})}},{key:"moveAnchorBackward",
value:function(n){return this.setAnchor(this.anchor.moveBackward(n))}},{key:"moveAnchorForward",value:function(n){return this.setAnchor(this.anchor.moveForward(n))}},{key:"moveAnchorTo",value:function(path,offset){return this.setAnchor(this.anchor.moveTo(path,offset))}},{key:"moveAnchorToStartOfNode",value:function(node){return this.setAnchor(this.anchor.moveToStartOfNode(node))}},{key:"moveAnchorToEndOfNode",value:function(node){return this.setAnchor(this.anchor.moveToEndOfNode(node))}},{key:"moveEndBackward",
value:function(n){return this.setEnd(this.end.moveBackward(n))}},{key:"moveEndForward",value:function(n){return this.setEnd(this.end.moveForward(n))}},{key:"moveEndTo",value:function(path,offset){return this.setEnd(this.end.moveTo(path,offset))}},{key:"moveEndToStartOfNode",value:function(node){return this.setEnd(this.end.moveToStartOfNode(node))}},{key:"moveEndToEndOfNode",value:function(node){return this.setEnd(this.end.moveToEndOfNode(node))}},{key:"moveFocusBackward",value:function(n){return this.setFocus(this.focus.moveBackward(n))}},
{key:"moveFocusForward",value:function(n){return this.setFocus(this.focus.moveForward(n))}},{key:"moveFocusTo",value:function(path,offset){return this.setFocus(this.focus.moveTo(path,offset))}},{key:"moveFocusToStartOfNode",value:function(node){return this.setFocus(this.focus.moveToStartOfNode(node))}},{key:"moveFocusToEndOfNode",value:function(node){return this.setFocus(this.focus.moveToEndOfNode(node))}},{key:"moveStartBackward",value:function(n){return this.setStart(this.start.moveBackward(n))}},
{key:"moveStartForward",value:function(n){return this.setStart(this.start.moveForward(n))}},{key:"moveStartTo",value:function(path,offset){return this.setStart(this.start.moveTo(path,offset))}},{key:"moveStartToStartOfNode",value:function(node){return this.setStart(this.start.moveToStartOfNode(node))}},{key:"moveStartToEndOfNode",value:function(node){return this.setStart(this.start.moveToEndOfNode(node))}},{key:"moveTo",value:function(path,offset){return this.updatePoints(function(point){return point.moveTo(path,
offset)})}},{key:"moveToAnchor",value:function(){return this.setFocus(this.anchor)}},{key:"moveToEnd",value:function(){return this.setStart(this.end)}},{key:"moveToEndOfNode",value:function(node){return this.updatePoints(function(point){return point.moveToEndOfNode(node)})}},{key:"moveToFocus",value:function(){return this.setAnchor(this.focus)}},{key:"moveToRangeOfNode",value:function(start){var end=1<arguments.length&&void 0!==arguments[1]?arguments[1]:start;return this.setPoints([this.anchor.moveToStartOfNode(start),
this.focus.moveToEndOfNode(end)])}},{key:"moveToStart",value:function(){return this.setEnd(this.start)}},{key:"moveToStartOfNode",value:function(node){return this.updatePoints(function(point){return point.moveToStartOfNode(node)})}},{key:"normalize",value:function(node){return this.updatePoints(function(point){return point.normalize(node)})}},{key:"setAnchor",value:function(anchor){return this.set("anchor",anchor)}},{key:"setEnd",value:function(point){return this.isBackward?this.setAnchor(point):
this.setFocus(point)}},{key:"setFocus",value:function(focus){return this.set("focus",focus)}},{key:"setPoints",value:function(values){values=slicedToArray(values,2);var focus=values[1];return this.set("anchor",values[0]).set("focus",focus)}},{key:"updatePoints",value:function(updater){var anchor=this.anchor,focus=this.focus;anchor=updater(anchor);focus=updater(focus);return this.merge({anchor,focus})}},{key:"setStart",value:function(point){return this.isBackward?this.setFocus(point):this.setAnchor(point)}},
{key:"setProperties",value:function(properties){var _properties=properties=Range$jscomp$0.createProperties(properties);properties=_properties.anchor;var focus=_properties.focus;_properties=objectWithoutProperties(_properties,["anchor","focus"]);properties&&(_properties.anchor=Point.create(properties));focus&&(_properties.focus=Point.create(focus));return this.merge(_properties)}},{key:"toJSON",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,
anchor:this.anchor.toJSON(options),focus:this.focus.toJSON(options)}}},{key:"toRange",value:function(){var properties=Range$jscomp$0.createProperties(this);return Range$jscomp$0.create(properties)}},{key:"unset",value:function(){return this.updatePoints(function(p){return p.unset()})}},{key:"isCollapsed",get:function(){return this.anchor===this.focus||this.anchor.key===this.focus.key&&this.anchor.offset===this.focus.offset}},{key:"isExpanded",get:function(){return!this.isCollapsed}},{key:"isBackward",
get:function(){var anchor=this.anchor,focus=this.focus;return this.isUnset?null:anchor.key===focus.key?anchor.offset>focus.offset:PathUtils.isBefore(focus.path,anchor.path)}},{key:"isForward",get:function(){var isBackward=this.isBackward;return null==isBackward?null:!isBackward}},{key:"isUnset",get:function(){var focus=this.focus;return this.anchor.isUnset||focus.isUnset}},{key:"isSet",get:function(){return!this.isUnset}},{key:"start",get:function(){return this.isBackward?this.focus:this.anchor}},
{key:"end",get:function(){return this.isBackward?this.anchor:this.focus}}]);return RangeInterface}();mixin(RangeInterface,[Annotation,Decoration,Range$jscomp$0,Selection$jscomp$0]);var index$jscomp$0={Annotation,Block,Change,Data,Decoration,Document:Document$jscomp$0,Editor,Inline,KeyUtils,Leaf:Leaf$1,Mark,Node:Node$jscomp$0,Operation,PathUtils,Point,Range:Range$jscomp$0,resetMemoization,Selection:Selection$jscomp$0,Text:Text$jscomp$0,TextUtils,useMemoization,Value};exports.Annotation=Annotation;
exports.Block=Block;exports.Change=Change;exports.Data=Data;exports.Decoration=Decoration;exports.Document=Document$jscomp$0;exports.Editor=Editor;exports.Inline=Inline;exports.KeyUtils=KeyUtils;exports.Leaf=Leaf$1;exports.Mark=Mark;exports.Node=Node$jscomp$0;exports.Operation=Operation;exports.PathUtils=PathUtils;exports.Point=Point;exports.Range=Range$jscomp$0;exports.resetMemoization=resetMemoization;exports.Selection=Selection$jscomp$0;exports.Text=Text$jscomp$0;exports.TextUtils=TextUtils;exports.useMemoization=
useMemoization;exports.Value=Value;exports.default=index$jscomp$0}
//# sourceMappingURL=module$node_modules$slate$lib$slate.js.map
